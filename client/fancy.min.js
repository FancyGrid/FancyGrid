/*
All of the code within the FancyGrid software is developed and copyrighted by FancyGrid, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from FancyGrid. All usage must coincide with the
FancyGrid End User License Agreement which can be requested by email at support@fancygrid.com.

Build: 1.7.179
*/

!function(e,t){"object"==typeof module&&module.exports?module.exports=e.document?t(e):t:e.Fancy=t(e)}("undefined"!=typeof window?window:this,function(win){const Fancy={global:window,version:"1.7.179",site:"fancygrid.com",COLORS:["#9DB160","#B26668","#4091BA","#8E658E","#3B8D8B","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"]};var ua,rv,userAgent,check,isOpera,isIE,isChromium,winNav,vendorName,isIEedge,isIOSChrome,isChrome;return window.Fancy=Fancy,Fancy.apply=((e,t)=>{if(void 0!==t)for(const n in t)e[n]=t[n]}),Fancy.applyIf=((e,t)=>{for(const n in t)void 0===e[n]&&(e[n]=t[n])}),Fancy.namespace=((...e)=>{e.forEach(e=>{let t=e.split("."),n=1,i=t.length;Fancy.global[t[0]]=Fancy.global[t[0]]||{};let a=Fancy.global[t[0]];for(;n<i;n++)a[t[n]]=a[t[n]]||{},a=a[t[n]]})}),Fancy.ns=Fancy.namespace,Fancy.typeOf=(e=>{if(null===e)return"null";const t=typeof e;if("undefined"===t||"string"===t||"number"===t||"boolean"===t)return t;const n=Object.prototype.toString.call(e);if(void 0!==e.length&&"function"!=typeof e)return"array";switch(n){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}return"function"===t?"function":"object"===t?"object":void 0}),Fancy.isArray="isArray"in Array?Array.isArray:e=>{return"[object Array]"===Object.prototype.toString.call(e)},Fancy.isObject=(e=>{return"[object Object]"===Object.prototype.toString.call(e)}),Fancy.isFunction=(e=>{return"[object Function]"===Object.prototype.toString.apply(e)}),Fancy.isString=(e=>"string"==typeof e),Fancy.isNumber=(e=>"number"==typeof e&&isFinite(e)),Fancy.isDom=(e=>{try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}),Fancy.isBoolean=(e=>"boolean"==typeof e),Fancy.isDate=(e=>"date"===Fancy.typeOf(e)),Fancy.each=((e,t)=>{switch(Fancy.typeOf(e)){case"array":case"string":let n=0,i=e.length;for(;n<i&&!0!==t(e[n],n,e);n++);break;case"object":for(const n in e)if(!0===t(e[n],n,e))break}}),Fancy.mixin=((e,t)=>{let n,i=0,a=t.length;if("object"===Fancy.typeOf(t[0]))for(;i<a;i++)for(var s=(n=t[i])._class,o=n.methods,l=0,r=o.length;l<r;l++){const t=o[l];e[t]=s.prototype[t]}else for(;i<a;i++)if(n=t[i],Fancy.isString(n)){const t=Fancy.ClassManager.getMixin(n);t?Fancy.apply(e,t.prototype):Fancy.ClassManager.waitMixin(n,e)}else Fancy.apply(e,n.prototype)}),Fancy.Mixin=((e,t)=>{const n=e.split(".");let i=1,a=n.length-1;Fancy.ns(e);let s=Fancy.global[n[0]];for(;i<a;i++)s=s[n[i]];n.length>1?(s[n[n.length-1]]=function(){},s[n[n.length-1]].prototype=t):(Fancy.global[n[0]]=function(){},Fancy.global[n[0]].prototype=t);let o=Fancy.ClassManager.waitMixins[e];if(o)for(i=0,a=(o=o.waiters).length;i<a;i++)Fancy.apply(o[i],t)}),Fancy.applyConfig=((e,t={})=>{if(e.plugins&&t.plugins&&(e.plugins=e.plugins.concat(t.plugins),delete t.plugins),!0===e._isConfigApplied)return e;for(const n in t)e[n]=t[n];return e._isConfigApplied=!0,e}),Fancy.styleToString=((e={})=>{let t="";for(const n in e)t+=`${n}: ${e[n]};`;return t}),Fancy.newEl=(e=>Fancy.get(document.createElement(e))),Fancy.newDomEl=(e=>document.createElement(e)),Fancy.apply(Fancy,{prefix:"fancy-gen-",idSeed:0,zIndex:1,id:(e,t)=>e?((e=e.dom||{}).id||(e.id=(t||Fancy.prefix)+ ++Fancy.idSeed),e.id):(t||Fancy.prefix)+ ++Fancy.idSeed}),Fancy.apply(Fancy,{cls:"fancy",TOUCH_CLS:"fancy-touch",HIDDEN_CLS:"fancy-display-none",CLEARFIX_CLS:"fancy-clearfix",MODAL_CLS:"fancy-modal",PANEL_CLS:"fancy-panel",PANEL_BODY_CLS:"fancy-panel-body",PANEL_BODY_INNER_CLS:"fancy-panel-body-inner",PANEL_GRID_INSIDE_CLS:"fancy-panel-grid-inside",PANEL_SHADOW_CLS:"fancy-panel-shadow",PANEL_SUB_HEADER_CLS:"fancy-panel-sub-header",PANEL_SUB_HEADER_TEXT_CLS:"fancy-panel-sub-header-text",PANEL_HEADER_CLS:"fancy-panel-header",PANEL_HEADER_IMG_CLS:"fancy-panel-header-img",PANEL_HEADER_TEXT_CLS:"fancy-panel-header-text",PANEL_HEADER_TOOLS_CLS:"fancy-panel-header-tools",PANEL_TBAR_CLS:"fancy-panel-tbar",PANEL_BBAR_CLS:"fancy-panel-bbar",PANEL_SUB_TBAR_CLS:"fancy-panel-sub-tbar",PANEL_BAR_PAGING_CLS:"fancy-panel-bar-paging",PANEL_BUTTONS_CLS:"fancy-panel-buttons",PANEL_NOFRAME_CLS:"fancy-panel-noframe",PANEL_FOOTER_CLS:"fancy-panel-footer",PANEL_TAB_CLS:"fancy-panel-tab",PANEL_DRAGGABLE_CLS:"fancy-panel-draggable",BAR_CLS:"fancy-bar",BAR_TEXT_CLS:"fancy-bar-text",BAR_CONTAINER_CLS:"fancy-bar-container",BAR_BUTTON_CLS:"fancy-bar-button",BAR_SEG_BUTTON_CLS:"fancy-bar-seg-button",BAR_LEFT_SCROLLER_CLS:"fancy-bar-left-scroller",BAR_RIGHT_SCROLLER_CLS:"fancy-bar-right-scroller",FORM_CLS:"fancy-form",FORM_BODY_CLS:"fancy-form-body",FORM_PANEL_CLS:"fancy-form-panel",FIELD_CLS:"fancy-field",FIELD_LABEL_CLS:"fancy-field-label",FIELD_EMPTY_CLS:"fancy-field-empty",FIELD_DISABLED_CLS:"fancy-field-disabled",FIELD_BLANK_ERR_CLS:"fancy-field-blank-err",FIELD_NOT_VALID_CLS:"fancy-field-not-valid",FIELD_TEXT_CLS:"fancy-field-text",FIELD_TEXT_INPUT_CLS:"fancy-field-text-input",FIELD_ERROR_CLS:"fancy-field-error",FIELD_SPIN_CLS:"fancy-field-spin",FIELD_SPIN_UP_CLS:"fancy-field-spin-up",FIELD_SPIN_DOWN_CLS:"fancy-field-spin-down",FIELD_CHECKBOX_CLS:"fancy-field-checkbox",FIELD_CHECKBOX_DISABLED_CLS:"fancy-field-checkbox-disabled",FIELD_CHECKBOX_INPUT_CLS:"fancy-field-checkbox-input",FIELD_CHECKBOX_ON_CLS:"fancy-checkbox-on",FIELD_CHECKBOX_MIDDLE_CLS:"fancy-checkbox-middle",FIELD_INPUT_LABEL_CLS:"fancy-field-input-label",FIELD_BUTTON_CLS:"fancy-field-button",FIELD_TAB_CLS:"fancy-field-tab",FIELD_COMBO_CLS:"fancy-combo",FIELD_COMBO_SELECTED_ITEM_CLS:"fancy-combo-item-selected",FIELD_COMBO_FOCUSED_ITEM_CLS:"fancy-combo-item-focused",FIELD_COMBO_DROPDOWN_BUTTON_CLS:"fancy-combo-dropdown-button",FIELD_COMBO_INPUT_CONTAINER_CLS:"fancy-combo-input-container",FIELD_COMBO_LIST_VALUE_CLS:"fancy-combo-list-value",FIELD_COMBO_LEFT_EL_CLS:"fancy-combo-left-el",FIELD_COMBO_RESULT_LIST_CLS:"fancy-combo-result-list",FIELD_SEARCH_CLS:"fancy-field-search",FIELD_SEARCH_LIST_CLS:"fancy-field-search-list",FIELD_SEARCH_PARAMS_LINK_CLS:"fancy-field-search-params-link",FIELD_SEARCH_PARAMED_CLS:"fancy-field-search-paramed",FIELD_SEARCH_PARAMED_EMPTY_CLS:"fancy-field-search-paramed-empty",FIELD_PICKER_BUTTON_CLS:"fancy-field-picker-button",FIELD_LABEL_ALIGN_TOP_CLS:"fancy-field-label-align-top",FIELD_LABEL_ALIGN_RIGHT_CLS:"fancy-field-label-align-right",FIELD_TEXTAREA_CLS:"fancy-textarea",FIELD_TEXTAREA_TEXT_CLS:"fancy-textarea-text",FIELD_TEXTAREA_TEXT_INPUT_CLS:"fancy-textarea-text-input",FIELD_RADIO_CLS:"fancy-field-radio",FIELD_RADIO_COLUMN_CLS:"fancy-field-radio-column",FIELD_RADIO_ON_CLS:"fancy-field-radio-on",FIELD_RADIO_INPUT_CLS:"fancy-field-radio-input",FIELD_TAB_ACTIVE_CLS:"fancy-field-tab-active",GRID_CLS:"fancy-grid",GRID_ANIMATION_CLS:"fancy-grid-animation",GRID_UNSELECTABLE_CLS:"fancy-grid-unselectable",GRID_EMPTY_CLS:"fancy-grid-empty-text",GRID_LEFT_EMPTY_CLS:"fancy-grid-left-empty",GRID_RIGHT_EMPTY_CLS:"fancy-grid-right-empty",GRID_CENTER_CLS:"fancy-grid-center",GRID_LEFT_CLS:"fancy-grid-left",GRID_RIGHT_CLS:"fancy-grid-right",GRID_RESIZER_LEFT_CLS:"fancy-grid-resizer-left",GRID_RESIZER_RIGHT_CLS:"fancy-grid-resizer-right",GRID_STATE_DRAG_COLUMN_CLS:"fancy-grid-state-drag-column",GRID_STATE_RESIZE_COLUMN_CLS:"fancy-grid-state-resize-column",GRID_STATE_SORTED_CLS:"fancy-grid-state-sorted",GRID_STATE_FILTERED_CLS:"fancy-grid-state-filtered",GRID_COPY_TEXTAREA:"fancy-grid-copy-textarea",GRID_HEADER_CLS:"fancy-grid-header",GRID_HEADER_CELL_CLS:"fancy-grid-header-cell",GRID_HEADER_CELL_CONTAINER_CLS:"fancy-grid-header-cell-container",GRID_HEADER_CELL_TEXT_CLS:"fancy-grid-header-cell-text",GRID_HEADER_CELL_LEFT_IMAGE_CLS:"fancy-grid-header-cell-left-image",GRID_HEADER_CELL_CONTAINS_LI:"fancy-grid-header-cell-contains-left-image",GRID_HEADER_CELL_DOUBLE_CLS:"fancy-grid-header-cell-double",GRID_HEADER_CELL_TRIPLE_CLS:"fancy-grid-header-cell-triple",GRID_HEADER_CELL_TRIGGER_CLS:"fancy-grid-header-cell-trigger",GRID_HEADER_CELL_TRIGGER_IMAGE_CLS:"fancy-grid-header-cell-trigger-image",GRID_HEADER_CELL_TRIGGER_DISABLED_CLS:"fancy-grid-header-cell-trigger-disabled",GRID_HEADER_CELL_GROUP_LEVEL_1_CLS:"fancy-grid-header-cell-group-level-1",GRID_HEADER_CELL_GROUP_LEVEL_2_CLS:"fancy-grid-header-cell-group-level-2",GRID_HEADER_CELL_SELECT_CLS:"fancy-grid-header-cell-select",GRID_HEADER_CELL_TRIGGER_UP_CLS:"fancy-grid-header-cell-trigger-up",GRID_HEADER_CELL_TRIGGER_DOWN_CLS:"fancy-grid-header-cell-trigger-down",GRID_HEADER_COLUMN_TRIGGERED_CLS:"fancy-grid-header-column-triggered",GRID_HEADER_CELL_FILTER_CLS:"fancy-grid-header-filter-cell",GRID_HEADER_CELL_FILTER_FULL_CLS:"fancy-grid-header-filter-cell-full",GRID_HEADER_CELL_FILTER_SMALL_CLS:"fancy-grid-header-filter-cell-small",GRID_HEADER_CELL_CHECKBOX_CLS:"fancy-grid-header-cell-checkbox",GRID_HEADER_CELL_SORTABLE_CLS:"fancy-grid-header-cell-sortable",GRID_HEADER_CELL_NOT_SORTABLE_CLS:"fancy-grid-header-cell-not-sortable",GRID_HEADER_CELL_FILTERED_CLS:"fancy-grid-header-cell-filtered",GRID_SUB_HEADER_FILTER_CLS:"fancy-grid-sub-header-filter",GRID_SUB_HEADER_FILTER_CONTAINER_CLS:"fancy-grid-sub-header-filter-container",GRID_CELL_CLS:"fancy-grid-cell",GRID_CELL_INNER_CLS:"fancy-grid-cell-inner",GRID_CELL_OVER_CLS:"fancy-grid-cell-over",GRID_CELL_SELECTED_CLS:"fancy-grid-cell-selected",GRID_CELL_ACTIVE_CLS:"fancy-grid-cell-active",GRID_CELL_EVEN_CLS:"fancy-grid-cell-even",GRID_CELL_WRAPPER_CLS:"fancy-grid-cell-wrapper",GRID_CELL_DIRTY_CLS:"fancy-grid-cell-dirty",GRID_CELL_DIRTY_EL_CLS:"fancy-grid-cell-dirty-el",GRID_PSEUDO_CELL_CLS:"fancy-grid-pseudo-cell",GRID_COLUMN_CLS:"fancy-grid-column",GRID_COLUMN_OVER_CLS:"fancy-grid-column-over",GRID_COLUMN_SELECT_CLS:"fancy-grid-column-select",GRID_COLUMN_SELECTED_CLS:"fancy-grid-column-selected",GRID_COLUMN_ELLIPSIS_CLS:"fancy-grid-column-ellipsis",GRID_COLUMN_ORDER_CLS:"fancy-grid-column-order",GRID_COLUMN_TEXT_CLS:"fancy-grid-column-text",GRID_COLUMN_SORT_ASC:"fancy-grid-column-sort-ASC",GRID_COLUMN_SORT_DESC:"fancy-grid-column-sort-DESC",GRID_COLUMN_COLOR_CLS:"fancy-grid-column-color",GRID_COLUMN_RESIZER_CLS:"fancy-grid-column-resizer",GRID_COLUMN_ROW_DRAG_CLS:"fancy-grid-column-row-drag",GRID_ROW_DRAG_EL_CLS:"fancy-grid-row-drag-el",GRID_COLUMN_TREE_CLS:"fancy-grid-column-tree",GRID_COLUMN_TREE_EXPANDER_CLS:"fancy-grid-tree-expander",GRID_COLUMN_SPARKLINE_CLS:"fancy-grid-column-sparkline",GRID_COLUMN_SPARKLINE_BULLET_CLS:"fancy-grid-column-sparkline-bullet",GRID_COLUMN_SPARK_PROGRESS_DONUT_CLS:"fancy-grid-column-spark-progress-donut",GRID_COLUMN_CHART_CIRCLE_CLS:"fancy-grid-column-chart-circle",GRID_COLUMN_GROSSLOSS_CLS:"fancy-grid-column-grossloss",GRID_COLUMN_PROGRESS_CLS:"fancy-grid-column-progress",GRID_COLUMN_PROGRESS_BAR_CLS:"fancy-grid-column-progress-bar",GRID_COLUMN_H_BAR_CLS:"fancy-grid-column-h-bar",GRID_COLUMN_ACTION_ITEM_CLS:"fancy-grid-column-action-item",GRID_ROW_OVER_CLS:"fancy-grid-cell-over",GRID_ROW_EDIT_CLS:"fancy-grid-row-edit",GRID_ROW_EDIT_BUTTONS_CLS:"fancy-grid-row-edit-buttons",GRID_ROW_EDIT_BUTTON_UPDATE_CLS:"fancy-edit-row-button-update",GRID_ROW_EDIT_BUTTON_CANCEL_CLS:"fancy-edit-row-button-cancel",GRID_ROW_GROUP_CLS:"fancy-grid-group-row",GRID_ROW_GROUP_INNER_CLS:"fancy-grid-group-row-inner",GRID_ROW_GROUP_COLLAPSED_CLS:"fancy-grid-group-row-collapsed",GRID_ROW_SUMMARY_CLS:"fancy-grid-summary-row",GRID_ROW_SUMMARY_CONTAINER_CLS:"fancy-grid-summary-container",GRID_ROW_SUMMARY_BOTTOM_CLS:"fancy-grid-summary-row-bottom",GRID_ROW_EXPAND_CLS:"fancy-grid-expand-row",GRID_ROW_EXPAND_OVER_CLS:"fancy-grid-expand-row-over",GRID_ROW_EXPAND_SELECTED_CLS:"fancy-grid-expand-row-selected",GRID_BODY_CLS:"fancy-grid-body",GRID_ACTIVE_CELL_ENABLED:"fancy-grid-active-cell-enabled",MENU_CLS:"fancy-menu",MENU_ITEM_CLS:"fancy-menu-item",MENU_ITEM_IMAGE_CLS:"fancy-menu-item-image",MENU_ITEM_TEXT_CLS:"fancy-menu-item-text",MENU_ITEM_SIDE_TEXT_CLS:"fancy-menu-item-side-text",MENU_ITEM_ACTIVE_CLS:"fancy-menu-item-active",MENU_ITEM_RIGHT_IMAGE_CLS:"fancy-menu-item-right-image",MENU_ITEM_EXPAND_CLS:"fancy-menu-item-expand",MENU_ITEM_DISABLED_CLS:"fancy-menu-item-disabled",MENU_ITEM_SEP_CLS:"fancy-menu-item-sep",MENU_ITEM_NO_IMAGE_CLS:"fancy-menu-item-no-image",MENU_ITEM_IMG_COPY_CLS:"fancy-menu-item-img-copy",MENU_ITEM_IMG_DELETE_CLS:"fancy-menu-item-img-delete",MENU_ITEM_IMG_DUPLICATE_CLS:"fancy-menu-item-img-duplicate",MENU_ITEM_IMG_EDIT_CLS:"fancy-menu-item-img-edit",TAB_WRAPPER_CLS:"fancy-tab-wrapper",TAB_ACTIVE_WRAPPER_CLS:"fancy-active-tab-wrapper",TAB_TBAR_CLS:"fancy-toolbar-tab",TAB_TBAR_ACTIVE_CLS:"fancy-toolbar-tab-active",BUTTON_CLS:"fancy-button",BUTTON_DISABLED_CLS:"fancy-button-disabled",BUTTON_PRESSED_CLS:"fancy-button-pressed",BUTTON_IMAGE_CLS:"fancy-button-image",BUTTON_IMAGE_COLOR_CLS:"fancy-button-image-color",BUTTON_TEXT_CLS:"fancy-button-text",BUTTON_DROP_CLS:"fancy-button-drop",BUTTON_MENU_CLS:"fancy-button-menu",SEG_BUTTON_CLS:"fancy-seg-button",TOOLTIP_CLS:"fancy-tooltip",TOOLTIP_INNER_CLS:"fancy-tooltip-inner",SEPARATOR_CLS:"fancy-separator",FOOTER_STATUS_CLS:"fancy-footer-status",STATUS_SOURCE_TEXT_CLS:"fancy-status-source-text",STATUS_SOURCE_LINK_CLS:"fancy-status-source-link",FOOTER_SOURCE_CLS:"fancy-footer-source",PICKER_MONTH_CELL_ACTIVE_CLS:"fancy-month-picker-cell-active",PICKER_MONTH_CLS:"fancy-month-picker",PICKER_BUTTON_BACK_CLS:"fancy-picker-button-back",PICKER_BUTTON_NEXT_CLS:"fancy-picker-button-next",PICKER_MONTH_ACTION_BUTTONS_CLS:"fancy-month-picker-action-buttons",PICKER_DATE_CLS:"fancy-date-picker",PICKER_DATE_CELL_TODAY_CLS:"fancy-date-picker-cell-today",PICKER_DATE_CELL_ACTIVE_CLS:"fancy-date-picker-cell-active",PICKER_DATE_CELL_OUT_RANGE_CLS:"fancy-date-picker-cell-out-range",PICKER_BUTTON_DATE_CLS:"fancy-picker-button-date",PICKER_BUTTON_DATE_WRAPPER_CLS:"fancy-picker-button-date-wrapper",PICKER_BUTTON_TODAY_CLS:"fancy-picker-button-today",PICKER_BUTTON_TODAY_WRAPPER_CLS:"fancy-picker-button-today-wrapper"}),Fancy.ANIMATE_DURATION=400,userAgent=navigator.userAgent.toLowerCase(),check=function(e){return e.test(userAgent)},isOpera=check(/opera/),isIE=!isOpera&&check(/msie/),isChromium=window.chrome,winNav=window.navigator,vendorName=winNav.vendor,isIEedge=winNav.userAgent.indexOf("Edge")>-1,isIOSChrome=winNav.userAgent.match("CriOS"),isChrome=function(){const e=winNav.userAgent.indexOf("OPR")>-1;return!!isIOSChrome||null!==isChromium&&void 0!==isChromium&&"Google Inc."===vendorName&&!1===e&&!1===isIEedge}(),11===(rv=-1,"Microsoft Internet Explorer"==navigator.appName?(ua=navigator.userAgent,null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(ua)&&(rv=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(ua=navigator.userAgent,null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(ua)&&(rv=parseFloat(RegExp.$1))),rv)&&(isIE=!0),!1===isIE&&isIEedge&&(isIE=!0),Fancy.apply(Fancy,{isOpera:isOpera,isIE:isIE,isChrome:isChrome}),Fancy.getViewSize=(()=>{const e=[];return Fancy.isIE?(e[0]=document.documentElement.clientHeight,e[1]=document.documentElement.clientWidth):(e[0]=window.innerHeight,e[1]=window.innerWidth),e}),Fancy.getScroll=(()=>{const e=document.documentElement,t=document.body;return e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:t?[t.scrollTop,t.scrollLeft]:[0,0]}),Fancy.getMouseWheelEventName=(()=>"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll"),Fancy.getWheelDelta=(e=>{let t=0;return e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t}),Fancy.isTouch=void 0!==document.ontouchstart,Fancy.i18n={},Fancy.currency={EUR:"€",USD:"$",GBP:"£",RUB:"₽",CZK:"Kč",AUD:"$",JPY:"¥",PLN:"zł",TRY:"₺",DKK:"kr",KRW:"₩",BRL:"R$",CNY:"¥",SEK:"kr",CAD:"$",NOK:"kr",IDR:"Rp"},Fancy.modules={},Fancy.getModulesList=(()=>{const e=[];return Fancy.each(Fancy.modules,(t,n)=>{e.push(n)}),e}),function(){const e={};Fancy.loadModule=function(t,n){var i=document.getElementsByTagName("body")[0],a=document.createElement("script"),s=t,o=Fancy.DEBUG?".js":".min.js",l=Fancy.version.replace(/\./g,""),r=Fancy.MODULESDIR||FancyGrid.MODULESDIR||`https://cdn.jsdelivr.net/npm/fancygrid@${Fancy.version}/client/modules/`;n=n||function(){},!1!==Fancy.MODULELOAD&&!1!==Fancy.MODULESLOAD&&(t=t.replace(/ /g,"-"),Fancy.DEBUG?o+="?_dc="+ +new Date:o+=`?_v=${l}`,Fancy.Modules.on("loaded",(e,i)=>{i===t&&(Fancy.modules[s]=!0,n(t))}),e[t]||(e[t]=!0,a.src=r+t+o,a.charset="utf-8",a.onload=(()=>{Fancy.Modules.fire("loaded",t)}),a.onerror=(()=>{throw new Error(`[FancyGrid Error] - module ${t} was not loaded`)}),i.appendChild(a)))},Fancy.loadLang=((e,t)=>{if(void 0!==Fancy.i18n[e])return!0;const n=document.getElementsByTagName("body")[0],i=document.createElement("script"),a=Fancy.MODULESDIR||FancyGrid.MODULESDIR||`https://cdn.jsdelivr.net/npm/fancygrid@${Fancy.version}/client/modules/`;i.src=`${a}i18n/${e}.js`,i.charset="utf-8",i.async="true",i.onload=(()=>{t({lang:Fancy.i18n[e]})}),n.appendChild(i)}),Fancy.loadStyle=(()=>{let e=document.querySelectorAll("link");if(!Fancy.stylesLoaded&&(e.forEach(e=>{/fancy\./.test(e.href)&&(Fancy.stylesLoaded=!0)}),e=document.querySelectorAll("link"),!Fancy.stylesLoaded&&(e.forEach(e=>{/fancy\./.test(e.href)&&(Fancy.stylesLoaded=!0)}),!Fancy.stylesLoaded))){var t=document.getElementsByTagName("head")[0],n=document.createElement("link"),i=Fancy.DEBUG?".css":".min.css",a=Fancy.version.replace(/\./g,""),s=Fancy.MODULESDIR||FancyGrid.MODULESDIR||`https://cdn.jsdelivr.net/npm/fancygrid@${Fancy.version}/client/modules/`;s=(s=s.replace("modules/","")).replace("modules",""),Fancy.DEBUG?i+="?_dc="+ +new Date:i+=`?_v=${a}`,n.href=s+"fancy"+i,n.rel="stylesheet",Fancy.loadingStyle=!0,n.onload=(()=>{setTimeout(()=>{Fancy.loadingStyle=!1,Fancy.stylesLoaded=!0},100)}),t.appendChild(n)}}),Fancy.error=((e,t)=>{throw new Error(`[FancyGrid Error${t?" {code}":""}]: ${e}`)})}(),Fancy.themes={},Fancy.defineTheme=((e,t)=>{const n={};t.extend?(Fancy.apply(n,Fancy.getTheme(t.extend).config),n.extendedThemes=n.extendedThemes||[],n.extendedThemes.push(t.extend)):"default"!==e&&Fancy.apply(n,Fancy.getTheme("default").config),Fancy.apply(n,t.config),t.config=n,Fancy.themes[e]=t}),Fancy.getThemeCSSCls=(e=>{const t=Fancy.getTheme(e);let n=`fancy-theme-${e}`;return t&&t.config.extendedThemes&&Fancy.each(t.config.extendedThemes,e=>{n+=` fancy-theme-${e}`}),n}),Fancy.getTheme=(e=>{const t={config:{}};return Fancy.isObject(e)?(Fancy.applyIf(t,Fancy.themes[e.name||"default"]),Fancy.apply(t.config,Fancy.themes[e.name||"default"].config),Fancy.apply(t.config,e.config),t):Fancy.themes[e]}),Fancy.defineTheme("default",{config:{cellHeaderHeight:30,cellWidth:70,minCellWidth:40,cellHeight:32,titleHeight:42,subTitleHeight:42,barHeight:38,bottomScrollHeight:12,minCenterWidth:100,panelBorderWidth:2,groupRowHeight:31,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,2,2,2],knobOffSet:2,fieldHeight:37,charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("blue",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("gray",{config:{panelBorderWidth:0,gridBorders:[0,0,1,0],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("extra-gray",{config:{panelBorderWidth:0,gridBorders:[0,0,1,0],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:27,titleHeight:32,subTitleHeight:32,cellHeight:28,cellHeaderHeight:28,barHeight:32,datePickerHeight:287}}),Fancy.defineTheme("extra-dark",{extend:"extra-gray",config:{}}),Fancy.defineTheme("dark",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("sand",{config:{panelBorderWidth:1,gridBorders:[0,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("bootstrap",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("bootstrap-no-borders",{config:{panelBorderWidth:0,gridBorders:[0,0,0,0],gridWithoutPanelBorders:[0,0,0,0],panelBodyBorders:[0,0,0,0],columnLines:!1,charWidth:8,menuItemHeight:30}}),Fancy.defineTheme("material",{config:{columnLines:!1,cellHeaderHeight:40,panelBorderWidth:0,cellHeight:40,titleHeight:48,barHeight:48,subTitleHeight:48,groupRowHeight:40,gridBorders:[1,0,1,0],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:35}}),Fancy.String={format(e){var t,n,i;if("array"===Fancy.typeOf(arguments[1]))t=arguments[1];else for(i=arguments.length,t=[],n=1;n<i;n++)t[n-1]=arguments[n];return e.replace(/\[(\d+)]/g,function(e,n){return t[n]})},upFirstChar:e=>e[0].toLocaleUpperCase()+e.substr(1,e.length),trim:e=>e.replace(/\s/g,"")},Fancy.Array={copy(e,t){if(!t)return e.slice();let n=[],i=0,a=e.length;for(;i<a;i++)switch(Fancy.typeOf(e[i])){case"object":n[i]=Fancy.Object.copy(e[i]);break;case"array":n[i]=Fancy.Array.copy(e[i]);break;default:n=e[i]}return n},each(e,t){e.forEach((e,n)=>{t(e,n)})},count:e=>e.length,sum(e){var t=0,n=e.length,i=0;if(Fancy.isArray(e[0]))for(i=[];t<n;t++)for(var a=0,s=e[t].length;a<s;a++)void 0===i[a]&&(i[a]=0),i[a]+=e[t][a];else for(;t<n;t++)!1!==Fancy.isNumber(e[t])&&(i+=e[t]);return i},min(e){return Math.min.apply(this,e)},max(e){return Math.max.apply(this,e)},average(e){for(var t=0,n=0,i=e.length;n<i;n++)!1!==Fancy.isNumber(e[n])&&(t+=e[n]);return Math.round(t/e.length)},insert(e,t,n){const i=e.splice(t,e.length-t);return e=e.concat(n).concat(i)}},Fancy.Object={copy(e){const t={};for(const n in e)t[n]=e[n];return t},isEmpty(e){for(const t in e)return!1;return!0},keys(e){if(Object.keys)return Object.keys(e);const t=[];for(const n in e)t.push(n);return t}},Fancy.Number={isFloat:e=>Number(e)===e&&e%1!=0,getPrecision:e=>(e+"").split(".")[1].length+1,correctFloat:e=>parseFloat(e.toPrecision(14)),format(e,t,n){let i,a;void 0===t&&(t=","),Fancy.isNumber(t)&&(n=t,t=","),i=""===t?".":","===t?".":",";const s=e.toString().split(".");if(s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),void 0===s[1]&&(s[1]=""),void 0!==n)if(0===n)a=s[0];else{var o=n-s[1].length;if(o>0)for(var l=0;l<o;l++)s[1]+="0";else o<0&&(s[1]=s[1].substring(0,n));a=s[0]+i+s[1]}else a=s[0],s[1].length&&(a+=i+s[1]);return a},currencyFormat(e,t,n,i){const a=e.toString().split(t);if(i=i||0,a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),a[1]){if(i>0){if(a[1].length<i){for(var s="",o=a[1].length;o<i;o++)s+="0";return a[0]+t+a[1]+s}a[1]=String(a[1]).substring(0,i)}return a[0]+t+a[1]}if(i>0&&""!==a[0]){for(s="",o=0;o<i;o++)s+="0";return a[0]+t+s}return a[0]}},Fancy.Collection=function(e){const t=this;if(t.items=[],t.keys=[],t.map={},t.indexMap={},t.length=0,e)if(e.length>0)for(var n=0,i=e.length;n<i;n++)t.add(n,e[n]);else for(const n in e)t.add(n,e[n])},Fancy.Collection.prototype={add(e,t){const n=this;n.items.push(t),n.keys.push(e),n.map[e]=t,n.indexMap[e]=n.length,n.length++},remove(e){const t=this,n=t.indexMap[e];t.items.splice(n,1),t.keys.splice(n,1),delete t.indexMap[n],delete t.map[e],t.length--,t.updateIndexMap()},updateIndexMap(){let e=this,t=0,n=e.keys.length;for(e.indexMap={};t<n;t++)e.indexMap[e.keys[t]]=t},removeAll(){const e=this;e.items=[],e.keys=[],e.indexMap={},e.map={},e.length=0},get(e){return this.map[e]},each(e){let t=this,n=0,i=t.length;for(;n<i;n++)e(t.keys[n],t.items[n],n,t.length)}},Fancy.Template=function(e){const t=this;Fancy.isArray(e)?t.tpl=e.join(""):t.tpl=e,t.compile()},Fancy.Template.prototype={re:/\{([\w\-]+)\}/g,getHTML(e={}){return this.compiled(e)},compile(){const me=this;function fn(e,t){return"'+("+(t="values['"+t+"']")+" === undefined ? '' : "+t+")+'"}return eval("me.compiled = function(values){ return '"+me.tpl.replace(me.re,fn)+"';};"),me}},Fancy.key={BACKSPACE:8,TAB:9,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_DOT:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:120,DOT:190},Fancy.Key={isNum(e){const t=Fancy.key;switch(e){case t.ZERO:case t.ONE:case t.TWO:case t.THREE:case t.FOUR:case t.FIVE:case t.SIX:case t.SEVEN:case t.EIGHT:case t.NINE:case t.NUM_ZERO:case t.NUM_ONE:case t.NUM_TWO:case t.NUM_THREE:case t.NUM_FOUR:case t.NUM_FIVE:case t.NUM_SIX:case t.NUM_SEVEN:case t.NUM_EIGHT:case t.NUM_NINE:return!0;default:return!1}},isNumControl(e,t){const n=Fancy.key;if(Fancy.Key.isNum(e))return!0;if(t.shiftKey&&187===e)return!0;switch(e){case n.NUM_PLUS:case 189:case n.NUM_MINUS:case n.NUM_DOT:case n.BACKSPACE:case n.DELETE:case n.TAB:case n.ENTER:case n.RETURN:case n.SHIFT:case n.CTRL:case n.ALT:case n.ESC:case n.END:case n.HOME:case n.LEFT:case n.UP:case n.RIGHT:case n.DOWN:case n.INSERT:case n.DOT:return!0;default:return!1}}},function(){const e={},t={},n=function(){this.waitMixins={}};n.prototype={items:new Fancy.Collection,add(e,t){const n=e.split(".");let i=1,a=n.length-1;Fancy.ns(e);let s=Fancy.global[n[0]];for(;i<a;i++)s=s[n[i]];n.length>1?s[n[n.length-1]]=t:Fancy.global[n[0]]=t,this.items.add(e,t)},get(e){return this.items.get(e)},waitMixin(e,t){this.waitMixins[e]=this.waitMixins[e]||{waiters:[]},this.waitMixins[e].waiters.push(t)},getMixin(e){const t=e.split(".");let n=1,i=t.length,a=Fancy.global[t[0]];if(void 0===a)return!1;for(;n<i;n++)if(void 0===(a=a[t[n]]))return!1;return a},has(t){if(Fancy.isString(t))return!!e[t];if(Fancy.isArray(t)){let e=!1;return Fancy.each(t,t=>{Fancy.ClassManager.get(t)&&(e=!0)}),e}}},Fancy.ClassManager=new n,Fancy.define=((n,i={})=>{let a=[];if(Fancy.ClassManager.has(n)&&Fancy.error(`Overwriting class name ${n}`),Fancy.isArray(n)&&(n=(a=n)[0]),i.constructor===Object&&(void 0===i.extend?i.constructor=function(){}:i.constructor=function(){this.Super("constructor",arguments)}),void 0===i.extend)e[n]=i.constructor;else{var s;switch(e[n]=i.constructor,typeof i.extend){case"string":s=Fancy.ClassManager.get(i.extend),e[n].prototype.$Super=Fancy.ClassManager.get(i.extend);break;case"function":s=i.extend,e[n].prototype.$Super=i.extend}delete i.extend,e[n].prototype.Super=function(e,t){const n=this;switch(n.$Iam?n.$Iam=Fancy.ClassManager.get(n.$Iam.prototype.$Super.prototype.$name):n.$Iam=Fancy.ClassManager.get(n.$Super.prototype.$name),e){case"const":case"constructor":n.$Iam.apply(n,t);break;default:n.$Iam.prototype[e].apply(n,t)}delete n.$Iam},((e,t)=>{for(const n in t.prototype)void 0===e.prototype[n]&&(e.prototype[n]=t.prototype[n])})(e[n],s)}e[n].prototype.$name=n,i.mixins&&(Fancy.mixin(e[n].prototype,i.mixins),delete e[n].prototype.mixins),void 0!==i.plugins&&(void 0===e[n].prototype.$plugins&&(e[n].prototype.$plugins=[]),e[n].prototype.$plugins=e[n].prototype.$plugins.concat(i.plugins),delete e[n].prototype.plugins);for(const t in i)e[n].prototype[t]=i[t];var o=e[n];!0===i.singleton&&(delete e[n],o=new o(i),e[n]=o),a.length>1?Fancy.each(a,e=>{Fancy.ClassManager.add(e,o)}):Fancy.ClassManager.add(n,o),i.type?(t[i.type]=o,Fancy.addWidgetType(i.type,o)):i.ptype&&(t[i.type]=o,Fancy.addPluginByType(i.ptype,o))}),Fancy.getClassByType=(e=>t[e])}(),Fancy.MixinClass=function(){},Fancy.MixinClass.prototype={initId(){const e=this,t=e.prefix||Fancy.prefix;e.id=e.id||Fancy.id(null,t),Fancy.addWidget(e.id,e)},initPlugins(){const e=this,t=e;let n,i,a;if(e.plugins=e.plugins||[],e._plugins&&(e.plugins=e.plugins.concat(e._plugins)),void 0!==e.plugins&&(e.$plugins=e.plugins,delete e.plugins),void 0!==e.$plugins)for(var s,o=0,l=e.$plugins,r=l.length,d={};o<r;o++){(a=l[o]).widget=t;const e=a.type||a.ptype;if(!0!==d[e]){if(d[e]=!0,void 0===(n=Fancy.getPluginByType(e)))throw new Error(`[FancyGrid Error] - some of module was not loaded. Grid plugin does not exist - ${e}`);i=new n(a),void 0!==(s=a.inWidgetName||i.inWidgetName)&&(t[s]=i)}}}},Fancy.define("Fancy.Data",{constructor:function(e){const t=this;if(t.map={},e)for(var n=0,i=e.length,a=t.map;n<i;n++)a[n]=e[n];t.length=0},add(e,t){this.map[e]=t,this.length++},get(e){return this.map[e]}}),Fancy.define("Fancy.Model",{constructor:function(e){var t=this,n={},i=t.fields||[],a=0,s=i.length;if(Fancy.isArray(e)){for(;a<s;a++){n[o=i[a]]=e[a]}void 0===n.id&&(Fancy.idSeed++,n.id=Fancy.idSeed+1e3),t.data=n,t.id=t.data.id}else{if(e.id?t.id=e.id:(Fancy.idSeed++,t.id=Fancy.idSeed+1e3,e.id=t.id),void 0===t.fields){for(var o in i=[],e)i.push(o);t.fields=i}for(s=i.length;a<s;a++){void 0===e[o=i[a]]?n[o]="":n[o]=e[o]}n.id||(t.fields.push("id"),e.id||(e.id=t.id),n.id=e.id),t.data=n}},get(e){const t=this;return void 0===e?t.data:t.data[e]},set(e,t){const n=this;if(void 0===t&&Fancy.isObject(e))for(const t in e)n.set(t,e[t]);else n.data[e]=t}}),Fancy.define("Fancy.PluginManager",{singleton:!0,constructor:function(){this.ptypes=new Fancy.Data},addPlugin(e,t){this.ptypes.add(e,t)},getPlugin(e){return this.ptypes.get(e)}}),Fancy.addPluginByType=((e,t)=>{Fancy.PluginManager.addPlugin(e,t)}),Fancy.getPluginByType=(e=>Fancy.PluginManager.getPlugin(e)),function(){const e=Fancy;e.define("Fancy.WidgetManager",{singleton:!0,constructor:function(){this.wtypes=new e.Data,this.widgets=new e.Data},addWidgetType(e,t){t.prototype.wtype=e,this.wtypes.add(e,t)},getWidgetClassByType(e){return this.wtypes.get(e)},addWidget(e,t){this.widgets.add(e,t)},getWidget(e){return this.widgets.get(e)}});const t=e.WidgetManager;e.addWidgetType=((e,n)=>{t.addWidgetType(e,n)}),e.getWidgetClassByType=(e=>t.getWidgetClassByType(e)),e.addWidget=((e,n)=>{t.addWidget(e,n)}),e.getWidget=(e=>t.getWidget(e)),e.getGrid=(e=>t.getWidget(e)),e.getForm=(e=>t.getWidget(e))}(),function(){let e=0,t={};Fancy.define(["Fancy.Event","Fancy.Observable"],{mixins:[Fancy.MixinClass],constructor:function(e={}){const t=this;if(Fancy.applyConfig(t,e),t.$events={},t.listeners||t.events)for(var n=t.listeners||t.events,i=0,a=n.length;i<a;i++){var s=n[i],o=null,l=null,r=null,d=0,c=[];for(var h in s)switch(h){case"scope":r=s[h];break;case"params":c=s[h];break;case"delay":d=s[h];break;default:o=h,l=s[h]}if(null===o)throw new Error("[FancyGrid Error] - Event was not set");switch(Fancy.typeOf(l)){case"string":l=t[l],s.handler=l,void 0===s.scope&&(r=t),s.scope=r;break;case"function":break;default:throw new Error("[FancyGrid Error] - Handler has wrong type or not defined")}if(!1===Fancy.isArray(c))throw new Error("[FancyGrid Error] - params must be array");t.addEvent(o),t.on(o,l,r,c,d)}},on(n,i,a,s=[],o){if(void 0===this.$events[n])throw new Error(`[FancyGrid Error] - Event name is not set: ${n}`);if(void 0===i)throw new Error(`[FancyGrid Error] - Handler is undefined. Name of event is ${n}.`);i.$fancyFnSeed=e,t[e]=i,e++,this.$events[n].push({fn:i,scope:a,params:s,delay:o})},un(e,t){const n=this.$events[e];if(!n)return!1;let i=0,a=n.length;for(;i<a;i++){const e=n[i];if(e.fn.$fancyFnSeed===t.$fancyFnSeed)return e.toRemove=!0,!0}return!1},once(e,t,n){const i=this,a=function(){t.apply(this,arguments),i.un(e,a)};i.on(e,a,n)},unAll(){this.$events={}},unAllByType(e){this.$events[e]=[]},fire(e){const t=this,n=t.$events[e];if(!n)return!1;for(var i=1,a=arguments.length,s=[t];i<a;i++)s.push(arguments[i]);for(i=0,a=n.length;i<a;i++){var o=n[i],l=[];!0!==o.toRemove?(l=l.concat(s),o.params&&(l=l.concat(o.params)),o.delay?setTimeout(function(e){return function(){e.fn.apply(e.scope||t,l)}}(o),o.delay):o.fn.apply(o.scope||t,l)):(n.splice(i,1),i--,a=n.length)}},addEvent(e){return this.addEvents(e)},addEvents(e){const t=this;if(arguments.length>1){for(var n=[],i=0,a=arguments.length;i<a;i++)n[i]=arguments[i];e=n}if("string"===Fancy.typeOf(e))t.$events[e]=t.$events[e]||[];else if("array"===Fancy.typeOf(e))for(i=0,a=e.length;i<a;i++)t.$events[e[i]]=t.$events[e[i]]||[]},has(e){const t=this.$events[e];return!!t&&0!==t.length}}),Fancy.define("Fancy.Modules",{extend:Fancy.Event,singleton:!0,constructor:function(){this.Super("const",arguments),this.init()},init(){this.addEvents("loaded")}})}(),Fancy.Mixin("Fancy.store.mixin.Edit",{remove(e,t){var n,i,a,s=this,o=s.widget,l=e.id;switch(Fancy.typeOf(e)){case"string":case"number":l=e;break;default:l=e.id||e.data.id}if(s.isTree&&!0!==s.treeCollapsing){var r=s.getById(l),d=s.getById(r.get("parentId"));if(!1===r.get("leaf")&&r.get("expanded")){var c=r.data.child.length-1;Fancy.each(r.data.child,function(e,t,n){s.remove(n[c]),c--})}d&&Fancy.each(d.data.child,function(e,t){if(e.id===l)return d.data.child.splice(t,1),!0})}if("server"===s.proxyType&&s.autoSave&&s.proxy.api.destroy)!1!==t&&(!1!==o.loadMask&&o.showLoadMask(),s.proxyCRUD("DESTROY",l));else{if(e.rowIndex)n=s.dataViewIndexes[e.rowIndex],i=e.rowIndex;else if(n=s.getDataIndex(l),i=s.getRow(l),void 0===n&&void 0===i)return;var h;if(s.isTree&&s.treeCollapsing&&s.filteredData)Fancy.each(s.data,function(e,t){if(e.data.id===l)return h=t,!0}),a=s.data.splice(h,1)[0];else a=s.data.splice(n,1)[0];s.paging&&(i+=s.showPage*s.pageSize),s.order&&s.order.splice(i,1),s.changeOrderIndexes&&s.changeOrderIndexes(n),s.paging&&(0!==s.showPage&&s.showPage*s.pageSize===s.getTotal()&&s.showPage--,s.calcPages()),delete s.map[l],s.treeCollapsing||!1===t||s.fire("remove",l,a,n),!1!==t&&s.changeDataView()}},removeAt(e){this.remove({rowIndex:e,id:this.getId(e)})},removeAll(){const e=this;e.data=[],e.dataView=[],delete e.order,e.paging&&(e.showPage=0,e.calcPages()),e.filters&&(delete e.filters,delete e.filteredData,delete e.filterOrder)},add(e){return this.insert(this.getTotal(),e)},insert(e,t,n){const i=this;if(Fancy.each(i.fields,e=>{void 0===t[e]&&(t[e]="")}),i.grouping&&!i.bugFixGrouping&&(i.defineModel(t,!0),i.bugFixGrouping=!0),i.addIndex=e,void 0===t.id){Fancy.idSeed++;const e=Fancy.idSeed+1e3;"server"===i.proxyType?t.id=`Temp-${e}`:t.id=e}if(i.getById(t.id)&&i.remove(t.id,n),i.widget.isGroupable()&&(clearTimeout(this.timeOutGroupDataOrder),this.timeOutGroupDataOrder=setTimeout(function(){i.orderDataByGroup()})),"server"!==i.proxyType||!i.autoSave||!i.proxy.api.create)return i.insertItem(t,e,n);!1!==n&&(i.once("create",i.onCreate,i),i.proxyCRUD("CREATE",t))},insertItem(e,t,n){const i=this,a=new(0,i.model)(e);return t=i.addIndex,i.treeExpanding||!1===n||i.fire("beforeinsert"),delete i.addIndex,i.data.splice(t,0,a),i.order&&(i.order.splice(t,0,t),i.changeOrderIndexes(t,"+"),i.order[t]--),!1!==n&&i.changeDataView(),i.map[e.id]=a,i.treeExpanding||!1===n||i.fire("insert",a),a},onCreate(e,t){return this.insertItem(t)}}),Fancy.Mixin("Fancy.store.mixin.Dirty",{initTrackDirty(){const e=this;e.changed={length:0},e.removed={length:0},e.inserted={length:0},e.undoActions=[],e.redoActions=[],e.on("remove",e.onDirtyRemove,e),e.on("set",e.onDirtySet,e),e.on("insert",e.onDirtyInsert,e)},onDirtySet(e,t){const n=this,i=t.id;if("$selected"!==t.key){if(void 0===n.changed[i]?(n.changed[i]={length:1},n.changed.length++):n.changed[i].length++,void 0===n.changed[i][t.key]&&(n.changed[i][t.key]={originValue:t.oldValue}),n.changed[i][t.key].value=t.value,n.changed[i][t.key].value===n.changed[i][t.key].originValue){delete n.changed[i][t.key],n.changed[i].length--;for(var a=0,s=n.undoActions.length-1;a<=s;a++){var o=s-a,l=n.undoActions[o];if(l.id===i&&t.key===l.key){var r=n.undoActions.splice(o,1);n.redoActions.push(r)}}}else n.redoing||(n.redoActions=[]),n.undoActions.push({id:i,type:"edit",key:t.key,value:t.value,oldValue:t.oldValue});0===n.changed[i].length&&(delete n.changed[i],n.changed.length--)}},onDirtyRemove(e,t,n,i){const a=this;a.removed[t]=n.data,a.removed.length++,!0!==a.undoStoppped&&(a.redoing||(a.redoActions=[]),a.undoActions.push({id:t,type:"remove",data:n.data,rowIndex:i}))},onDirtyInsert(e,t){const n=this;n.treeExpanding||(n.inserted[t.id]=t,n.inserted.length++,!0!==n.undoStoppped&&(n.redoing||(n.redoActions=[]),n.undoActions.push({id:t.id,type:"insert",data:t.data})))},clearDirty(){const e=this;e.changed={length:0},e.removed={length:0},e.inserted={length:0},e.undoActions=[],e.redoActions=[]},isDirty(){var e=!1;return this.changed.length&&(e=!0),this.removed.length&&(e=!0),this.inserted.length&&(e=!0),e}}),Fancy.define("Fancy.Store",{extend:Fancy.Event,mixins:["Fancy.store.mixin.Paging","Fancy.store.mixin.Infinite","Fancy.store.mixin.Proxy","Fancy.store.mixin.Rest","Fancy.store.mixin.Reader","Fancy.store.mixin.Writer","Fancy.store.mixin.Sort","Fancy.store.mixin.Edit","Fancy.store.mixin.Grouping","Fancy.store.mixin.Filter","Fancy.store.mixin.Dirty","Fancy.store.mixin.Tree"],pageSize:10,showPage:0,pages:0,loading:!1,constructor:function(){const e=this;e.Super("const",arguments),e.init(),e.data=e.data||[],e.dataView=e.dataView||[],e.dataViewMap=e.dataViewMap||{},e.map={},e.setModel(),e.data&&(e.data.proxy?e.initProxy():e.widget.isTreeData||e.setData(e.data)),e.readSmartIndexes(),e.widget.isGroupable()&&e.orderDataByGroup(),e.widget.isTreeData&&e.initTreeData()},init(){const e=this;e.addEvents("add","change","changepages","set","beforeupdate","update","beforeremove","remove","beforedestroy","destroy","beforecreate","create","beforesort","sort","beforeload","load","filter","beforeinsert","insert","servererror","serversuccess"),e.initId(),e.initPlugins(),e.paging&&e.initPaging(),e.infinite&&e.initInfinite(),e.initTrackDirty&&e.initTrackDirty()},setModel(){var e=this,t=e.model;if(t=void 0===t?Fancy.Model:Fancy.ClassManager.get(e.model),e.model=t,e.fields=t.prototype.fields,void 0===e.fields)throw new Error("[FancyGrid Error] - needed to set fields in Model of Store")},setData(e){var t,n=this,i=0,a=e.length,s=n.model;if(n.data=[],n.dataView=[],n.dataViewMap={},n.dataViewIndexes={},n.map={},n.collapsed)for(;i<a;i++)t=new s(e[i]),n.data[i]=t,n.map[t.id]=t;else if(n.expanded)for(;i<a;i++)t=new s(e[i]),n.data[i]=t,n.map[t.id]=t;else if(n.paging)for(;i<a;i++)t=new s(e[i]),n.data[i]=t,i<n.pageSize&&(n.dataView[i]=t,n.dataViewMap[t.id]=i,n.dataViewIndexes[i]=i),n.map[t.id]=t;else for(;i<a;i++)t=new s(e[i]),n.data[i]=t,n.dataView[i]=t,n.dataViewMap[t.id]=i,n.dataViewIndexes[i]=i,n.map[t.id]=t;n.isTree&&Fancy.each(n.data,e=>{e.get("expanded")&&Fancy.each(e.data.child,function(t,i){const a=n.getById(t.id);e.data.child[i]=a})})},getItem(e){var t=this,n=t.dataView[e];return n||(n=t.order?t.data[t.order[e]]:t.data[e]),n},get(e,t,n){let i,a=this;if(void 0===e)return a.data;let s=a.dataView[e];return s?void 0===t?(void 0===(i=s.data).id&&(i.id=a.dataView[e].id),a.dataView[e].data):"none"===t?"":n?(s=a.data[e],"id"===t?s.data[t]||s.id:s.data[t]):(s=a.dataView[e],"id"===t?s.data[t]||s.id:s.data[t]):(s=a.order?a.data[a.order[e]]:a.data[e])?"id"===t?s.data[t]||s.id:s.data[t]:s},getId(e){return this.dataView[e]?this.dataView[e].id:""},getRow(e){return this.dataViewMap[e]},set(e,t,n,i){var a,s=this,o=s.widget,l=0;if(!Number.isNaN(n)){if(s.infiniteScrolledToRow&&(l=s.infiniteScrolledToRow),e+l===-1?a=s.getById(i):(a=s.dataView[e+l],i=a.data.id||a.id),s._stopSaving||o.fire("beforesaving",{rowIndex:e,key:t,value:n,id:i,saving:function(){s._set(e,t,n,i)}}),s.stopSaving)return s._stopSaving=!0,void setTimeout(()=>{delete s.stopSaving,delete s._stopSaving});this._set(e,t,n,i)}},_set(e,t,n,i){var a,s,o=this,l=0;if(o.infiniteScrolledToRow&&(l=o.infiniteScrolledToRow),e+l===-1?a=o.getById(i):i=(a=o.dataView[e+l]).data.id||a.id,void 0!==n){if((s=e+l===-1?a.get(t):o.get(e+l,t))!=n){if(e+l===-1)a.set(t,n);else{var r=o.dataView[e+l];if(r.data.parentId){var d=o.getById(r.data.parentId);Fancy.each(d.data.child,e=>{e.id===r.id&&(e[t]=n)})}r.data[t]=n}var c;"server"===o.proxyType&&o.autoSave&&o.proxyCRUD("UPDATE",i,t,n),c=-1===e?a.data:o.dataView[e+l].data,o.fire("set",{id:i,data:c,rowIndex:e,infiniteRowIndex:e+l,key:t,value:n,oldValue:s,item:a})}}else{const n=t;for(const t in n){if("id"===t)continue;let r;e+l===-1?(s=a.get(t),a.set(t,n[t]),r=a.data):(s=o.get(e+l,t),o.dataView[e+l].data[t]=n[t],r=o.dataView[e+l].data),o.fire("set",{id:i,data:r,rowIndex:e,infiniteRowIndex:e+l,key:t,value:n[t],oldValue:s,item:a})}"server"===o.proxyType&&o.autoSave&&o.proxyCRUD("UPDATE",i,n)}},setItemData(e,t){const n=this,i=n.get(e);if(n.infinite&&(e-=n.infiniteScrolledToRow),n.writeAllFields&&"server"===n.proxyType)n.set(e,t);else for(const a in t)i[a]!=t[a]&&n.set(e,a,t[a])},getLength(){let e=this,t=e.dataView.length;return e.infinite&&t>e.infiniteDisplayedRows&&(t=e.infiniteDisplayedRows),t},getTotal(){const e=this;return"server"===e.pageType?e.totalCount:e.filteredData?e.filteredData.length:void 0===e.data?0:Fancy.isObject(e.data)?0:e.data.length},defineModel(e,t){const n=this,i=n.store;if(!n.model||!n.fields||0===n.fields.length||t){e=e||n.data||i.data;var a=n.getFieldsFromData(e),s="Fancy.model."+Fancy.id();Fancy.define(s,{extend:Fancy.Model,fields:a}),n.model=s,n.fields=a,n.setModel()}},getFieldsFromData(e){const t=e.items||e;if(e.fields)return e.fields;if(!t)throw new Error("[FancyGrid Error] - not set fields of data");var n=t[0],i=[];void 0===t.length&&(n=t);for(const e in n)i.push(e);return i},getColumnOriginalValues(e,t={}){var n,i=this,a=0,s=[],o=i[t.dataProperty||"data"],l=o.length;if(/\./.test(e)&&(n=!0),t.smartIndexFn)if(i.infinite)for(;a<l;a++)s.push(t.smartIndexFn(o[a+i.infiniteScrolledToRow].data));else for(;a<l;a++)s.push(t.smartIndexFn(o[a].data));else if(t.format)if("date"===t.type)for(;a<l;a++){null===(d=o[a].data[e])||""===d?s.push(Number.NEGATIVE_INFINITY):s.push(Fancy.Date.parse(d,t.format,t.mode))}else if(n)for(;a<l;a++)s.push(this.getNestedValue(o[a].data,e));else for(;a<l;a++)s.push(o[a].data[e]);else if(t.groupMap)if(i.groupMap={},n)for(;a<l;a++){var r=o[a],d=this.getNestedValue(r.data,e);s.push(d),i.groupMap[r.id]=d}else for(;a<l;a++){d=(r=o[a]).data[e];s.push(d),i.groupMap[r.id]=d}else if(n)for(;a<l;a++)s.push(this.getNestedValue(o[a].data||o[a],e));else for(;a<l;a++){var c=o[a].data||o[a];s.push(c[e])}return s},getNestedValue(e,t){const n=t.split(".");return n.length>1?this.getNestedValue(e[n.shift(0,1)],n.join(".")):e[t]},changeDataView(e={}){var t,n=this,i=[],a={},s=0,o=n.data.length,l=n.isFiltered(),r=n.isSorted(),d=n.data;if(r&&e.reSort&&(n.remoteSort||n.reSort()),l){if(e.stoppedFilter||e.doNotFired){if(n.paging&&"server"===n.pageType)return}else n.filterData();n.remoteFilter||(void 0===(d=n.filteredData)&&(d=n.data),o=d.length)}n.dataViewIndexes={},n.dataViewMap={},n.paging&&(o=(s="server"===n.pageType?0:n.showPage*n.pageSize)+n.pageSize);const c=n.getTotal();let h;if(o>n.data.length&&(o=n.data.length),l&&o>c&&(o=c),Fancy.isObject(n.data)&&(o=0),n.order)if(n.grouping)for(t=n.grouping.by;s<o;s++)!0===l?(n.dataViewIndexes[i.length]=n.filterOrder[s],h=d[s]):(n.dataViewIndexes[i.length]=n.order[s],h=d[n.order[s]]),n.expanded[h.data[t]]&&(i.push(h),a[h.id]=i.length-1);else for(;s<o;s++)!0===l?(n.dataViewIndexes[i.length]=n.filterOrder[s],h=d[s]):(n.dataViewIndexes[i.length]=n.order[s],h=d[n.order[s]]),i.push(h),a[h.id]=i.length-1;else if(n.grouping)for(t=n.grouping.by;s<o;s++)n.expanded[d[s].data[t]]&&(n.dataViewIndexes[i.length]=s,h=d[s],i.push(h),a[h.id]=i.length-1);else for(;s<o;s++)n.dataViewIndexes[i.length]=s,h=d[s],i.push(d[s]),a[h.id]=i.length-1;n.dataView=i,n.dataViewMap=a,e.doNotFired||n.fire("change")},getColumnData(e,t){var n=0,i=this.data.length,a=[];if(t)for(;n<i;n++)a.push(t(this.data[n].data));else for(;n<i;n++)a.push(this.data[n].data[e]);return a},getColumnUniqueData(e){for(var t=0,n=this.data.length,i=[],a={};t<n;t++){var s=this.data[t].data[e];!0!==a[s]&&(a[s]=!0,i.push(s))}return i=i.sort()},getData(){for(var e=0,t=this.data.length,n=[];e<t;e++)n.push(this.data[e].data);return n},getDataView(){for(var e=0,t=this.dataView.length,n=[];e<t;e++)n.push(this.dataView[e].data);return n},getById(e){return this.map[e]},changeItemId(e,t){var n=this.getById(e);if(!n)return!1;n.id=t,void 0!==n.data.id&&(n.data.id=t),delete this.map[e],this.map[t]=n,this.fire("changeitemid",e,t)},find(e,t,n){var i=this,a=i.dataView,s=0,o=a.length,l=[];if(n)for(o=i.data.length;s<o;s++)(i.order?i.data[i.order[s]]:i.data[s]).data[e]===t&&l.push(s);else for(;s<o;s++)a[s].data[e]===t&&l.push(s);return l},findItem(e,t){for(var n,i=this.data,a=0,s=i.length,o=[];a<s;a++)(n=i[a]).data[e]===t&&o.push(n);return o},getDataIndex(e){for(var t,n=this.data,i=0,a=n.length;i<a;i++)n[i].data.id===e&&(t=i);return t},each(e,t){var n=this.dataView,i=0,a=n.length;if(t)for(;i<a;i++)e.apply(this,[n[i]]);else for(;i<a;i++)e(n[i])},readSmartIndexes(){var e=this.widget,t=0,n={};Fancy.each(e.columns,e=>{e.smartIndexFn&&(n[e.index]=e.smartIndexFn,t++)}),t&&(this.smartIndexes=n)},destroy(){const e=this;Fancy.each(e.data,e=>{delete e.data,delete e.id}),e.data=[],e.map={},e.dataView=[],e.dataViewIndexes={},e.dataViewMap={}},addField(e){var t=this,n=t.fields,i=!1;Fancy.isArray(e)?Fancy.Array.each(e,e=>t.addField(e)):(Fancy.each(n,t=>{if(t===e)return i=!0,!0}),i||t.fields.push(e))},isFiltered(){const e=this.filters||{};if(this._clearedFilter)return!0;for(const t in e)return!0;return!1},isSorted(){const e=this.sorters||{};return!Fancy.Object.isEmpty(e)}}),Fancy.$=window.$||window.jQuery,Fancy.nojQuery=void 0===Fancy.$,Fancy.get=(e=>{switch(Fancy.typeOf(e)){case"string":return new Fancy.Element(Fancy.$("#"+e)[0]);case"array":return new Fancy.Elements(e);default:return new Fancy.Element(e)}}),Fancy.Element=function(e){const t=this;t.dom=e,t.$dom=Fancy.$(e),e&&e.id&&(t.id=e.id),t.length=1},Fancy.Element.prototype={last(){return Fancy.get(this.$dom)},closest(e){return Fancy.get(this.$dom.closest(e)[0])},destroy(){this.$dom.remove()},remove(){this.$dom.remove()},finish(){this.$dom.finish()},prev(){return Fancy.get(this.$dom.prev()[0])},lastChild(){const e=this.$dom.children();return Fancy.get(e[e.length-1])},firstChild(){return Fancy.get(this.$dom.children()[0])},child(){return this.$dom.children().map(e=>Fancy.get(e))},on(e,t,n,i){const a=this;switch(n&&(t=Fancy.$.proxy(t,n)),i?a.$dom.on(e,i,t):a.$dom.on(e,t),e){case"mouseenter":a.onTouchEnterEvent&&a.onTouchEnterEvent(e,t,n,i);break;case"mouseleave":a.onTouchLeaveEvent&&a.onTouchLeaveEvent(e,t,n,i);break;case"mousemove":a.onTouchMove&&a.onTouchMove("touchmove",t)}},once(e,t,n,i){const a=this;n&&(t=Fancy.$.proxy(t,n)),i?a.$dom.one(e,i,t):a.$dom.one(e,t)},prop:function(e){return this.$dom.prop(e)},un(e,t,n,i){const a=this;n&&(t=Fancy.$.proxy(t,n)),i?a.$dom.off(e,i,t):a.$dom.off(e,t)},show(){this.$dom.show()},hide(){this.$dom.hide()},replaceClass(e,t){this.$dom.removeClass(e),this.$dom.addClass(t)},getByTag(e){return Fancy.get(this.$dom.find(e)[0])},getByClass(e){return this.$dom.find(`.${e}`)[0]},addClass(...e){this.addCls.apply(this,e)},addCls(e,...t){this.$dom.addClass(e),t.forEach(e=>this.$dom.addClass(e))},removeClass(e,...t){this.$dom.removeClass(e),t.forEach(e=>this.$dom.removeClass(e))},removeCls(e,...t){this.$dom.removeClass(e),t.forEach(e=>this.$dom.removeClass(e))},hasClass(e){return this.$dom.hasClass(e)},hasCls(e){return this.$dom.hasClass(e)},toggleClass(e){this.$dom.toggleClass(e)},toggleCls(e){this.$dom.toggleClass(e)},select(e){const t=this.$dom.find(e);return 1===t.length?Fancy.get(t[0]):t.length>1?Fancy.get(t):0===t.length?{length:0,dom:void 0,addClass:()=>{},addCls:()=>{},removeClass:()=>{},removeCls:()=>{},destroy:()=>{},remove:()=>{},css:()=>{},each:()=>{},last:()=>{},attr:()=>{}}:t},css(e,t){return void 0===t?this.$dom.css(e):this.$dom.css(e,t)},attr(e,t){return void 0===t?this.$dom.attr(e):this.$dom.attr(e,t)},append(e){return Fancy.get(this.$dom.append(e)[0])},after(e){return Fancy.get(this.$dom.after(e)[0])},next(){return Fancy.get(this.$dom.next()[0])},insertAfter(e){return Fancy.get(this.$dom.insertAfter(e)[0])},before(e){return Fancy.get(this.$dom.before(e)[0])},height(e){return e?(this.$dom.height(e),this):this.$dom.height()},width(e){return e?(this.$dom.width(e),this):this.$dom.width()},parent(e){return Fancy.get(this.$dom.parent(e)[0])},update(e){this.dom.innerHTML=e},hover(e,t){e&&this.$dom.on("mouseenter",e),e&&this.$dom.on("mouseleave",t)},position(){return this.$dom.position()},offset(){return this.$dom.offset()},focus(){this.$dom.focus()},blur(){this.$dom.blur()},within(e){var t,n=!0,i=!1;return void 0!==(t=(e=Fancy.get(e)).attr("id"))&&""!==t||(t=Fancy.id(),i=!0),e.attr("id",t),0===this.select(`#${t}`).length&&(n=!1),this.dom.id===e.dom.id&&(n=!0),i&&this.removeAttr(t),n},removeAttr(e){this.$dom.removeAttr(e)},item(){return this},stop(){this.$dom.stop&&this.$dom.stop()},animate(e,t,n,i){var a={},s=!1,o=e.force;Fancy.nojQuery||(s=!0,o=!0),Fancy.isObject(e)&&delete e.force;for(const t in e){let n=e[t];Fancy.isString(n)&&(n=Number(n.replace("px","")));let i=this.css(t);Fancy.isString(i)&&(i=Number(i.replace("px",""))),n!==i&&(a[t]=e[t],s=!0)}!1!==s&&(o?this.$dom.animate(a,t,n,i):this.$dom.css(a))},index(){return this.$dom.index()},onTouchEnterEvent(e,t,n,i){const a=this,s=Fancy.get(document.body);if(Fancy.isTouch){s.on("touchmove",function(e,s){const o=Fancy.id(),l="fancy-tempt-attr";e=e.originalEvent||e,a.attr(l,o);for(var r=e.targetTouches[0],d=[r.pageX,r.pageY],c=Fancy.get(document.elementFromPoint(d[0]-document.body.scrollLeft,d[1]-document.body.scrollTop)),h=!1,u=10,p=c;u>0&&p.dom;){if(p.attr(l)===o){h=!0;break}p=p.parent(),u--}if(!h||a.touchIn||i||(e.pageX=r.pageX,e.pageY=r.pageY,t(e,s),a.touchIn=!0),h&&i){u=10,p=c;for(var g=[],y=0;u>0&&p.dom;){var m=p.select(i);if(0!==m.length){var f=a.getDelegateTarget(i,m,g,y);f&&(e.currentTarget=f,e.delegateTarget=f,e.pageX=r.pageX,e.pageY=r.pageY,a.touchIn=!0,a.touchInDelegate=a.touchInDelegate||{},void 0===a.touchInDelegate[i]?a.touchInDelegate[i]=f:a.touchInDelegate[i]!==f&&(a.touchInDelegate[i]=[a.touchInDelegate[i],f]),t.apply(n,[e,f]));break}if(p.attr(l)===o)break;g.push(p.dom),p=p.parent(),u--,y++}}a.removeAttr(l)})}},onTouchLeaveEvent(e,t,n,i){var a=this,s=Fancy.get(document.body),o=[];if(Fancy.isTouch){s.on("touchmove",function(e,n){var s=Fancy.id(),l="fancy-tempt-attr";e=e.originalEvent||e;if(a.attr(l,s),!0===a.touchIn){var r=e.targetTouches[0],d=[r.pageX,r.pageY],c=Fancy.get(document.elementFromPoint(d[0]-document.body.scrollLeft,d[1]-document.body.scrollTop));if(!i){for(var h=!1,u=10,p=c;u>0&&p.dom;){if(p.attr(l)===s){h=!0;break}p=p.parent(),u--}if(!1===h)return e.pageX=r.pageX,e.pageY=r.pageY,a.touchIn=!1,t(e,n),void a.removeAttr(l)}if(o.length>30&&(o=o.slice(o.length-5,o.length-1)),o.push(c.dom),i&&a.touchInDelegate[i]){var g,y=Fancy.id();(g=Fancy.isArray(a.touchInDelegate[i])?Fancy.get(a.touchInDelegate[i][0]):Fancy.get(a.touchInDelegate[i])).attr(l,y),u=10;var m=!1;for(p=c;u>0&&p.dom;){if(p.attr(l)===y){m=!0;break}p=p.parent(),u--}g.removeAttr(l),m||(delete a.touchInDelegate[i],a.touchIn=!1,e.currentTarget=g.dom,e.delegateTarget=g.dom,e.pageX=r.pageX,e.pageY=r.pageY,t(e,g.dom))}a.removeAttr(l)}else a.removeAttr(l)})}},getDelegateTarget(e,t,n,i){for(var a=n[i-e.match(/\./g).length],s=0,o=t.length;s<o;s++)if(t.item(s).dom===a)return a;return!1},onTouchMove(e,t,n){const i=this,a=Fancy.get(document.body);if(Fancy.isTouch){a.on("touchmove",function(e,n){var a=Fancy.id(),s="fancy-tempt-attr";e=e.originalEvent||e,i.attr(s,a);for(var o=e.targetTouches[0],l=[o.pageX,o.pageY],r=!1,d=10,c=Fancy.get(document.elementFromPoint(l[0]-document.body.scrollLeft,l[1]-document.body.scrollTop));d>0&&c.dom;){if(c.attr(s)===a){r=!0;break}c=c.parent(),d--}i.removeAttr(s),r&&(e.pageX=o.pageX,e.pageY=o.pageY,t(e,n))})}},each(e){e(this,0)},getCls(){return this.dom.className.split(/\s+/)}},Fancy.Elements=function(e){this.dom=e,this.$dom=e,this.length=e.length},Fancy.Elements.prototype={attr(e,t){var n=this.$dom;return this.length>1&&(n=this.$dom[0]),void 0===t?n.attr(e):n.attr(e,t)},addClass(...e){this.addCls.apply(this,e)},finish(){for(var e=0,t=this.length;e<t;e++)Fancy.get(this.$dom[e]).finish()},addCls(e){for(var t=0,n=this.length;t<n;t++)Fancy.get(this.$dom[t]).addClass(e);if(arguments.length>1)for(t=1,n=arguments.length;t<n;t++)this.addClass(arguments[t])},removeClass(e){this.removeCls.apply(this,arguments)},removeCls(e){for(var t=0,n=this.length;t<n;t++)Fancy.get(this.$dom[t]).removeCls(e)},hover(e){this.$dom.on("mouseenter",e)},on:Fancy.Element.prototype.on,once:Fancy.Element.prototype.once,item(e){return Fancy.get(this.$dom[e])},css(e,t){const n=this;let i=0,a=n.length;for(;i<a;i++)Fancy.get(n.$dom[i]).css(e,t)},toggleClass(e){const t=this;let n=0,i=t.length;for(;n<i;n++)Fancy.get(t.$dom[n]).toggleClass(e)},toggleCls(e){const t=this;let n=0,i=t.length;for(;n<i;n++)Fancy.get(t.$dom[n]).toggleClass(e)},destroy(){const e=this;let t=0,n=e.length;for(;t<n;t++)Fancy.get(e.$dom[t]).destroy()},remove(){this.destroy()},hide(){for(var e=0,t=this.length;e<t;e++)Fancy.get(this.$dom[e]).hide()},show(){for(var e=0,t=this.length;e<t;e++)Fancy.get(this.$dom[e]).show()},index(){return this.$dom[0].index()},each(e){for(var t=0,n=this.length;t<n;t++)e(new Fancy.Element(this.$dom[t]),t)},last(){return new Fancy.Element(this.$dom[this.length-1])}},Fancy.select=(e=>Fancy.get(document.body).select(e)),Fancy.onReady=(e=>{Fancy.$(document).ready(e)}),Fancy.Ajax=(e=>{const t={};e.url&&(t.url=e.url),e.success&&(t.success=e.success),e.error&&(t.error=e.error),e.method&&(t.type=e.method),e.params&&(t.data=e.params),e.dataType&&(t.dataType=e.dataType),e.sendJSON&&(t.dataType="json",t.contentType="application/json; charset=utf-8",t.data=JSON.stringify(t.data)),e.getJSON&&(t.dataType="json",t.contentType="application/json; charset=utf-8"),e.headers&&(t.headers=e.headers),Fancy.$.ajax(t)}),Fancy.i18n.en={paging:{first:"First Page",last:"Last Page",prev:"Previous Page",next:"Next Page",info:"Rows [0] - [1] of [2]",page:"Page",of:"of [0]"},loadingText:"Loading...",thousandSeparator:",",decimalSeparator:".",currencySign:"$",sourceText:"Source",date:{read:"m/d/Y",write:"m/d/Y",edit:"m/d/Y",today:"Today",startDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],am:"am",pm:"pm",AM:"AM",PM:"PM",ok:"OK",cancel:"Cancel"},yes:"Yes",no:"No",dragText:"[0] selected row[1]",update:"Update",cancel:"Cancel",columns:"Columns",autoSizeColumn:"Autosize Column",autoSizeColumns:"Autosize All Columns",sortAsc:"Sort ASC",sortDesc:"Sort DESC",lock:"Lock",unlock:"Unlock",rightLock:"Right Lock"},Fancy.i18n["en-US"]=Fancy.i18n.en,Fancy.controllers={},Fancy.defineController=((e,t)=>{Fancy.controllers[e]=t}),Fancy.defineControl=Fancy.defineController,Fancy.getController=(e=>Fancy.controllers[e]),Fancy.getControl=Fancy.getController,Fancy.define("Fancy.DD",{extend:Fancy.Event,singleton:!0,constructor:function(){this.Super("const",arguments),this.init()},init(){this.addEvents(),this.els={}},add(e){const t=Fancy.id(e.overEl);this.els[t]=e,e.overEl.on("mousedown",this.onMouseDown,this)},onMouseDown(e){const t=this,n=Fancy.get(document),i=Fancy.get(e.currentTarget),a=t.els[i.attr("id")].dragEl;e.preventDefault(),t.clientX=e.clientX,t.clientY=e.clientY,t.startX=parseInt(a.css("left")),t.startY=parseInt(a.css("top")),t.activeId=i.attr("id"),n.once("mouseup",t.onMouseUp,t),n.on("mousemove",t.onMouseMove,t)},onMouseUp(){Fancy.get(document).un("mousemove",this.onMouseMove,this)},onMouseMove(e){var t=this,n=t.els[t.activeId].dragEl,i=e.clientX,a=e.clientY,s=t.clientX-i,o=t.clientY-a,l=t.startX-s,r=t.startY-o;r<0&&(r=0),n.css({left:l,top:r})}}),Fancy.define("Fancy.Widget",{extend:Fancy.Event,constructor:function(e){const t=this;Fancy.applyConfig(t,e),t.preInitControls(),t.Super("const",arguments),t.init(),t.initControls()},init(){this.initId(),this.addEvents("beforerender","afterrender","render","show","beforehide","hide","destroy"),this.initPlugins()},renderItems(e){const t=this;Fancy.each(t.items,function(n,i){const a=Fancy.getClassByType(n.type);n.renderTo=e,t.items[i]=new a(n)})},preInitControls(){const e=this;let t=e.controller||e.controllers;if(t)switch(Fancy.typeOf(t)){case"string":for(var n in t=Fancy.getController(t))void 0===e[n]&&(e[n]=t[n]);break;case"array":for(var i=[],a=0,s=t.length;a<s;a++){var o=Fancy.getController(t[a]);for(var n in o)"controls"!==n?void 0===e[n]&&(e[n]=o[n]):i=i.concat(o.controls)}e.controls=i}},initControls(){const e=this;if(void 0!==e.controls)for(var t=e.controls,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a.event&&Fancy.error("Not set event name for control"),void 0===a.handler&&Fancy.error("Not set event handler for control");var s=a.event,o=a.handler,l=a.scope||e,r=a.selector;Fancy.isString(o)&&(o=e[o]),r?function(t,n,i,a){e.$events[t]?e.on(t,(e,t)=>{const s=t.e.target,o=Fancy.get(s).parent().select(a);if(1===o.length&&o.within(s))n.apply(i,arguments);else if(o.length>1)for(var l=0,r=o.length;l<r;l++)o.item(l).within(s)&&n.apply(i,arguments)},i):e.on("render",()=>e.el.on(t,n,i,a))}(s,o,l,r):void 0===r&&void 0===a.widget&&e.on(s,o,l)}},css(e,t){return this.el.css(e,t)},addClass(e){this.el.addCls(e)},addCls(e){this.el.addCls(e)},removeClass(e){this.el.removeCls(e)},removeCls(e){this.el.removeCls(e)},hasClass(e){return this.el.hasCls(e)},hasCls(e){return this.el.hasCls(e)},toggleClass(e){this.el.toggleCls(e)},toggleCls(e){this.el.toggleCls(e)},destroy(){this.el&&this.el.dom&&this.el.destroy()},show(){this.el.show()},hide(){this.el.hide()},isVisible(){return"none"!==this.el.css("display")},initTpl(){this.tpl&&(this.tpl=new Fancy.Template(this.tpl))}}),Fancy.define("Fancy.Plugin",{extend:Fancy.Event,constructor:function(){this.Super("const",arguments),this.init()},init(){this.initId(),this.addEvents("beforerender","afterrender","render","show","hide","destroy")},initTpl(){const e=this.tpl;e&&(this.tpl=new Fancy.Template(e))}}),function(){const e={},t=Fancy,n=t.GRID_CLS,i=t.PANEL_BODY_CLS,a=t.BUTTON_CLS,s=t.BUTTON_DISABLED_CLS,o=t.BUTTON_PRESSED_CLS,l=t.BUTTON_IMAGE_CLS,r=t.BUTTON_IMAGE_COLOR_CLS,d=t.BUTTON_TEXT_CLS,c=t.BUTTON_DROP_CLS,h=t.BUTTON_MENU_CLS;t.define("Fancy.Button",{extend:t.Widget,minWidth:30,constructor:function(t,n){const i=this;t.toggleGroup&&(e[t.toggleGroup]=e[t.toggleGroup]||{active:!1,items:[]},e[t.toggleGroup].items.push(i)),i.scope=n||t.scope||i.scope||i,i.Super("const",arguments)},init(){const e=this;e.addEvents("click","mousedown","mouseup","mouseover","mouseout","pressedchange","init-menu"),e.Super("init",arguments),e.style=e.style||{},e.initTpl(),e.render(),e.setOns()},setOns(){const e=this,t=e.el;t.on("click",e.onClick,e),t.on("mousedown",e.onMouseDown,e),t.on("mouseup",e.onMouseUp,e),t.on("mouseover",e.onMouseOver,e),t.on("mouseout",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},widgetCls:a,cls:"",extraCls:"",disabledCls:s,pressedCls:o,buttonImageCls:l,buttonImageColorCls:r,textCls:d,dropCls:c,text:"",height:28,paddingTextWidth:5,imageWidth:20,rightImageWidth:20,pressed:!1,theme:"default",tpl:['<div class="'+l+'"></div>','<a class="'+d+'">{text}</a>','<div class="'+c+'" style="{dropDisplay}"></div>'],render(){var e,n=this,i=t.newEl("div"),a=0,o=7;switch(n.theme&&Fancy.themes[n.theme]&&(o=Fancy.themes[n.theme].config.charWidth),n.i18n){case"zh-CN":case"zh-TW":case"ja":case"ko":o=10}if(n.fire("beforerender"),n.wrapper&&n.renderWrapper(),e=t.get(n.renderTo||document.body).dom,n.width?a=n.width:!1!==n.text&&void 0!==n.text&&(a+=n.text.length*o+2*o),n.imageColor&&(n.imageCls=r),a<n.minWidth&&(a=(n.text&&n.text.length,n.minWidth)),n.imageCls&&n.text&&(a+=n.imageWidth),n.menu&&(a+=n.rightImageWidth),i.addCls(t.cls,n.widgetCls,n.cls,n.extraCls),n.disabled&&i.addCls(s),n.menu&&!1!==n.menuIcon&&i.addCls(h),i.css({width:a+"px",height:n.height+"px"}),n.hidden&&i.css("display","none"),i.css(n.style||{}),i.update(n.tpl.getHTML({text:n.text||""})),n.imageCls){const e=i.select(`.${l}`);n.imageColor&&e.css("background-color",n.imageColor),e.css("display","block"),t.isString(n.imageCls)&&e.addCls(n.imageCls)}n.id&&i.attr("id",n.id),n.el=t.get(e.appendChild(i.dom)),n.disabled&&n.disable(),n.pressed&&n.setPressed(n.pressed),n.initToggle(),n.width=a,n.fire("afterrender"),n.fire("render")},renderWrapper(){const e=this,n=e.wrapper,i=t.get(e.renderTo||document.body).dom,a=t.newEl("div");a.css(n.style||{}),a.addCls(n.cls||""),e.wrapper=t.get(i.appendChild(a.dom)),e.renderTo=e.wrapper.dom},initToggle(){if(!this.enableToggle)return!1},setPressed(t,n){const i=this;if(t){if(i.addCls(o),i.pressed=!0,i.toggleGroup){const t=e[i.toggleGroup].active;t&&t.setPressed(!1),e[i.toggleGroup].active=i}}else i.removeCls(o),i.pressed=!1,i.toggleGroup&&delete e[i.toggleGroup].active;!1!==n&&i.fire("pressedchange",i.pressed)},toggle(){const e=!this.pressed;this.setPressed(e),this.pressed=e},onClick(e){let n=this,i=n.handler;n.fire("click"),!0!==n.disabled&&(i&&(t.isString(i)&&(i=n.getHandler(i)),n.scope?i.apply(n.scope,[n]):i(n)),n.enableToggle&&(n.toggleGroup?n.pressed?n.setPressed(!1):n.setPressed(!0):n.toggle()),n.menu&&(n.toggleMenuShow(e),n.toggle()))},getHandler(e){return t.getWidget(this.el.closest(`.${i}`).select(`.${n}`).attr("id"))[e]||function(){t.error("Handler does not exist")}},onMouseDown(){this.fire("mousedown")},onMouseUp(){this.fire("mouseup")},onMouseOver(e){const t=this;t.fire("mouseover"),t.tip&&t.renderTip(e)},renderTip(e){const n=this;n.tooltip&&n.tooltip.destroy(),n.tooltip=new t.ToolTip({text:n.tip}),n.tooltip.css("display","block"),n.tooltip.show(e.pageX+15,e.pageY-25)},onMouseOut(){const e=this;e.fire("mouseout"),e.tooltip&&(e.tooltip.destroy(),delete e.tooltip)},setText(e,t){let n=this,i=n.el,a=7;switch(n.text=e,n.theme&&Fancy.themes[n.theme]&&(a=Fancy.themes[n.theme].config.charWidth),n.i18n){case"zh-CN":case"zh-TW":case"ja":case"ko":a=10}t||(t=0),t||(t+=e.length*a+2*a,n.imageColor&&(n.imageCls=r),t<n.minWidth&&(t=(n.text&&n.text.length,n.minWidth)),n.imageCls&&n.text&&(t+=n.imageWidth),n.menu&&(t+=n.rightImageWidth)),n.css("width",t),i.select(`.${d}`).update(e)},disable(){this.disabled=!0,this.addCls(s)},enable(){this.disabled=!1,this.removeCls(s)},onMouseMove(e){const t=this;t.tip&&t.tooltip&&t.tooltip.show(e.pageX+15,e.pageY-25)},toggleMenuShow(){const e=this,n=e.el.$dom.offset(),i=[n.left,n.top+e.el.$dom.height()];e.pressed?e.menu.hide():(t.isArray(e.menu)?e.initMenu():e.menu.type||e.initMenu(),setTimeout(()=>{e.menu.showAt(i[0],i[1])},100))},initMenu(){const e=this,n={theme:e.theme,events:[{hide:e.onMenuHide,scope:e}]};t.isObject(e.menu)?t.apply(n,e.menu):n.items=e.menu,e.menu=new t.Menu(n),e.fire("init-menu")},onMenuHide(){this.setPressed(!1)}})}(),Fancy.define("Fancy.SegButton",{extend:Fancy.Widget,constructor:function(e,t){this.scope=t,this.Super("const",arguments)},init(){const e=this;e.addEvents("toggle"),e.Super("init",arguments),e.style=e.style||{},e.render()},widgetCls:Fancy.SEG_BUTTON_CLS,cls:"",extraCls:"",text:"",render(){let e,t=this,n=Fancy.newEl("div");t.fire("beforerender"),e=Fancy.get(t.renderTo||document.body).dom,n.addCls(Fancy.cls,t.widgetCls,t.cls,t.extraCls),t.hidden&&n.css("display","none"),t.el=Fancy.get(e.appendChild(n.dom)),Fancy.each(t.style,(e,n)=>{t.el.css(n,e)}),t.renderButtons(),t.fire("afterrender"),t.fire("render")},renderButtons(){for(var e=this,t=e.items,n=0,i=t.length,a=Fancy.id(null,"fancy-toggle-group-");n<i;n++){const s=t[n];s.renderTo=e.el.dom,!1!==e.allowToggle&&(s.enableToggle=!0,!0!==e.multiToggle&&(s.toggleGroup=a)),0===n?(s.style={"border-right-width":0,"border-top-right-radius":0,"border-bottom-right-radius":0},1===i&&delete s.style["border-right-width"]):s.style=n>1?{"border-left-width":0,"border-top-left-radius":0,"border-bottom-left-radius":0}:{"border-top-left-radius":0,"border-bottom-left-radius":0},t.length>2&&0!==n&&n!==i-1&&Fancy.apply(s.style,{"border-top-right-radius":0,"border-bottom-right-radius":0,"border-top-left-radius":0,"border-bottom-left-radius":0}),e.items[n]=new Fancy.Button(s),e.items[n].on("pressedchange",function(t,n){e.fire("toggle",t,n,e.getValues())})}},getValues(){for(var e=[],t=this.items,n=0,i=t.length;n<i;n++)e.push(t[n].pressed);return e},clear(e){for(var t=this.items,n=0,i=t.length;n<i;n++)t[n].setPressed(!1,e)},setItems(e){this.el.update(""),this.items=e,this.renderButtons()},setActiveItem(e,t){this.items[e].setPressed(!0,t)},setValue(e){const t=this.items;switch(this.clear(!1),Fancy.typeOf(e)){case"array":Fancy.each(e,function(e){switch(Fancy.typeOf(e)){case"string":Fancy.each(t,function(t){t.value===e&&t.setPressed(!0,!0)});break;case"number":t[e].setPressed(!0,!0)}});break;case"string":Fancy.each(t,function(t){t.value===e&&t.setPressed(!0,!0)});break;case"number":var n=t[e];n&&n.setPressed(!0,!0)}}}),Fancy.define("Fancy.toolbar.Tab",{extend:Fancy.Button,constructor:function(){this.Super("const",arguments)},init(){this.Super("init",arguments)},cls:`${Fancy.BUTTON_CLS} ${Fancy.TAB_TBAR_CLS}`,render(){this.Super("render",arguments)}}),function(){const e=Fancy,t=e.FOOTER_STATUS_CLS,n=e.STATUS_SOURCE_TEXT_CLS,i=e.STATUS_SOURCE_LINK_CLS,a=e.FOOTER_SOURCE_CLS;Fancy.Mixin("Fancy.panel.mixin.PrepareConfig",{prepareConfigTheme(e,t){const n=e.theme||t.theme,i=Fancy.getTheme(n).config;return Fancy.isObject(n)&&(e.theme=n.name),Fancy.applyIf(e,i),e.theme&&(this.theme=e.theme),e},prepareConfigFooter(e){const s=e.footer,o=e.lang;if(s){const l=[];if(Fancy.isString(s.status)&&l.push({type:"text",text:s.status,cls:t}),s.status&&s.source&&l.push("side"),Fancy.isString(s.source))l.push({type:"text",text:s.source,cls:a});else if(Fancy.isObject(s.source)){let e=s.source.text,t=s.source.sourceText||o.sourceText;if(s.source.link){let a=s.source.link;a=(a=a.replace("http://","")).replace("https://",""),e=`<span class="${n}">${t}</span>: <a class="${i}" href="${a=`https://${a}`}">${e}</a>`}else e=`<span>${t}:</span> ${e}`;l.push({type:"text",text:e,cls:a})}e.footer=l}return e},prepareConfigLang(e,t){const n=e.i18n||t.i18n,i=Fancy.Object.copy(Fancy.i18n[n]);if(e.lang){for(var a in e.lang)switch(Fancy.isObject(e.lang[a])){case!1:case void 0:i[a]=e.lang[a]}for(var a in i.paging={},e.lang.paging&&Fancy.apply(i.paging,e.lang.paging),e.lang.paging)"paging"!==a&&(Fancy.isObject(a)||(i[a]=e.lang.paging[a]));i.date={},e.lang.date&&Fancy.apply(i.date,e.lang.date)}return e.lang=i,e}})}(),Fancy.Mixin("Fancy.panel.mixin.methods",{setTitle(e){this.panel&&this.panel.setTitle(e)},getTitle(){if(this.panel)return this.panel.getTitle()},setSubTitle(e){this.panel&&this.panel.setSubTitle(e)},getSubTitle(){if(this.panel)return this.panel.getSubTitle()}}),Fancy.Mixin("Fancy.panel.mixin.DD",{ddCls:Fancy.PANEL_DRAGGABLE_CLS,initDD(){this.addDDCls(),this.addDD()},addDDCls(){this.el.addCls(this.ddCls)},addDD(){Fancy.DD.add({dragEl:this.el,overEl:this.el.select(`.${Fancy.PANEL_HEADER_CLS}`).item(0)})}}),Fancy.Mixin("Fancy.panel.mixin.Resize",{cornerResizeCls:"fancy-panel-resize-corner",resizeMaskCls:"fancy-panel-resize-mask",initResize(){this.activeResizeEl=void 0,this.renderResizeEls(),this.onsResizeEls()},renderResizeEls(){const e=this.el,t=Fancy.newEl("div");t.addCls(this.cornerResizeCls),this.cornerResizeEl=Fancy.get(e.dom.appendChild(t.dom))},onResize(){const e=this;e.tbar&&e._tbar.applyScrollChanges(),e.subTBar&&e._subTBar.applyScrollChanges(),e.bbar&&e._bbar.applyScrollChanges(),e.footer&&e._footer.applyScrollChanges(),e.buttons&&e._buttons.applyScrollChanges();const t=e.items[0];t&&"grid"===t.type&&t.infinite&&(delete t.numOfVisibleCells,t.update())},onsResizeEls(){const e=this;Fancy.isTouch?e.cornerResizeEl.on("touchstart",e.onMouseDownResizeEl,e):e.cornerResizeEl.on("mousedown",e.onMouseDownResizeEl,e),e.on("resize",e.onResize,e)},onMouseDownResizeEl(e){const t=this,n=Fancy.get(document);if(e.preventDefault(),Fancy.nojQuery&&t.el.select(`.${Fancy.GRID_ANIMATION_CLS}`).removeCls(Fancy.GRID_ANIMATION_CLS),Fancy.isTouch){const i=(e=e.originalEvent||e).changedTouches[0];n.once("touchend",t.onMouseUpResize,t),n.on("touchmove",t.onMouseMoveResize,t),t.renderResizeMask(),t.startClientX=i.clientX,t.startClientY=i.clientY}else n.once("mouseup",t.onMouseUpResize,t),n.on("mousemove",t.onMouseMoveResize,t),t.renderResizeMask(),t.startClientX=e.clientX,t.startClientY=e.clientY},onMouseUpResize(){const e=this,t=Fancy.get(document);delete e.activeResizeEl,e.resizeMaskEl.destroy(),delete e.startClientX,delete e.startClientY,t.un("mousemove",e.onMouseMoveResize,e),e.setWidth(e.newResizeWidth),e.setHeight(e.newResizeHeight),e.fire("resize",{width:e.newResizeWidth,height:e.newResizeHeight}),Fancy.nojQuery&&e.el.select(".fancy-grid").addCls(Fancy.GRID_ANIMATION_CLS)},onMouseMoveResize(e){let t=this,n=e.clientX,i=e.clientY;if(Fancy.isTouch){const t=(e=e.originalEvent||e).originalEvent.changedTouches[0];n=t.clientX,i=t.clientY}let a=t.startClientX-n,s=t.startClientY-i,o=t.startResizeWidth-a,l=t.startResizeHeight-s;e.preventDefault(),e.stopPropagation(),o<t.minWidth&&(o=t.minWidth),l<t.minHeight&&(l=t.minHeight),t.newResizeWidth=o,t.newResizeHeight=l,t.resizeMaskEl.css({width:o,height:l})},renderResizeMask(){const e=this,t=e.el;let n=Fancy.newEl("div"),i=parseInt(t.css("top")),a=parseInt(t.css("left")),s=parseInt(t.css("width"))-4,o=parseInt(t.css("height"))-4,l=parseInt(t.css("z-index"));if(e.startResizeWidth=s,e.startResizeHeight=o,!e.window&&"absolute"!==t.css("position")){const e=t.offset();i=e.top,a=e.left}n.addCls(e.resizeMaskCls),n.css({left:a,top:i,width:s,height:o,"z-index":l}),e.resizeMaskEl=Fancy.get(document.body.appendChild(n.dom))}}),function(){const e=Fancy,t=e.HIDDEN_CLS,n=e.MODAL_CLS,i=e.PANEL_CLS,a=e.PANEL_HEADER_CLS,s=e.PANEL_SUB_HEADER_TEXT_CLS,o=e.PANEL_HEADER_TEXT_CLS,l=e.PANEL_HEADER_TOOLS_CLS,r=e.PANEL_SUB_HEADER_CLS,d=e.PANEL_BODY_CLS,c=e.PANEL_BODY_INNER_CLS,h=e.PANEL_TBAR_CLS,u=e.PANEL_SUB_TBAR_CLS,p=e.PANEL_BUTTONS_CLS,g=e.PANEL_BBAR_CLS,y=e.PANEL_HEADER_IMG_CLS,m=e.PANEL_NOFRAME_CLS,f=e.PANEL_SHADOW_CLS,v=e.PANEL_FOOTER_CLS,C=e.FIELD_PICKER_BUTTON_CLS;e.define("Fancy.Panel",{extend:e.Widget,barScrollEnabled:!0,tabScrollStep:80,mixins:["Fancy.panel.mixin.DD","Fancy.panel.mixin.Resize"],constructor:function(t){e.apply(this,t),this.Super("constructor",arguments)},init(){const e=this;e.Super("init",arguments),e.addEvents("resize"),e.initTpl(),e.render(),e.draggable&&e.initDD(),e.resizable&&e.initResize(),e.window&&e.setActiveWindowWatcher()},cls:"",fieldCls:i,value:"",width:300,height:200,titleHeight:30,subTitleHeight:30,barHeight:37,title:void 0,frame:!0,shadow:!0,draggable:!1,minWidth:200,minHeight:200,barContainer:!0,theme:"default",tpl:['<div style="height:{titleHeight}px;" class="'+a+" "+t+'">',"{titleImg}",'<div class="'+o+'">{title}</div>','<div class="'+l+'"></div>',"</div>",'<div style="height:{subTitleHeight}px;" class="'+r+" "+t+'">','<div class="'+s+'">{subTitle}</div>',"</div>",'<div class="'+d+'">','<div class="'+h+" "+t+'" style="height:{tbarHeight}px;"></div>','<div class="'+u+" "+t+'" style="height:{subTBarHeight}px;"></div>','<div class="'+c+'"></div>','<div class="'+g+" "+t+'" style="height:{bbarHeight}px;"></div>','<div class="'+p+" "+t+'" style="height:{buttonsHeight}px;"></div>','<div class="'+v+" "+t+'" style="height:{barHeight}px;"></div>',"</div>"],render(){var i=this,s=e.get(i.renderTo||document.body),o=e.newEl("div"),l=i.titleHeight,c=i.subTitleHeight;i.renderOuter&&(o=s),s.dom||e.error(`Could not find renderTo element: ${i.renderTo}`,1),!0===i.window&&o.css({display:"none",position:"absolute"}),!1===i.frame&&o.addCls(m),o.addCls(e.cls,i.cls,i.fieldCls),"default"!==i.theme&&o.addCls(Fancy.getThemeCSSCls(i.theme)),i.shadow&&o.addCls(f),o.css({width:`${i.width}px`,height:i.height-0+"px"}),i.style&&o.css(i.style);let C="",b="";e.isObject(i.title)?C=i.title.text:e.isString(i.title)&&(C=i.title),e.isObject(i.subTitle)?b=i.subTitle.text:e.isString(i.subTitle)&&(b=i.subTitle);let F="";e.isObject(i.title)&&i.title.imgCls&&(F=`<div class="${y} ${i.title.imgCls}"></div>`),o.update(i.tpl.getHTML({titleImg:F,barHeight:i.barHeight,subTBarHeight:i.subTBarHeight||i.barHeight,tbarHeight:i.tbarHeight||i.barHeight,bbarHeight:i.bbarHeight||i.barHeight,buttonsHeight:i.buttonsHeight||i.barHeight,titleHeight:l,subTitleHeight:c,title:C,subTitle:b})),e.isObject(i.title)&&(i.title.style&&o.select(`.${a}`).css(i.title.style),i.title.cls&&o.select(`.${a}`).addCls(i.title.cls),i.title.tools&&(i.tools=i.title.tools)),e.isObject(i.subTitle)&&(i.subTitle.style&&o.select(`.${r}`).css(i.subTitle.style),i.subTitle.cls&&o.select(`.${r}`).addCls(i.subTitle.cls)),i.title?o.select(`.${a}`).removeCls(t):o.select(`.${d}`).css("border-top-width","0px"),i.subTitle&&(o.select(`.${d}`).css("border-top-width","0px"),o.select(`.${r}`).removeCls(t)),i.tbar&&o.select(`.${h}`).removeCls(t),i.subTBar&&o.select(`.${u}`).removeCls(t),i.bbar&&o.select(`.${g}`).removeCls(t),i.buttons&&o.select(`.${p}`).removeCls(t),i.footer&&o.select(`.${v}`).removeCls(t),i.renderOuter?i.el=o:(i.el=s.dom.appendChild(o.dom),i.el=e.get(i.el)),i.modal&&0===e.select(n).length&&e.get(document.body).append(`<div class="${n}" style="display: none;"></div>`),i.id&&!i.el.attr("id")&&i.el.attr("id",i.id),i.renderTools(),i.renderBars(),i.setHardBordersWidth()},setHardBordersWidth(){const e=this.panelBodyBorders;this.el.select(`.${d}`).css({"border-top-width":e[0],"border-right-width":e[1],"border-bottom-width":e[2],"border-left-width":e[3]})},renderTools(){const t=this,n=t.tools;void 0!==n&&e.each(n,function(n,i){n.renderTo=t.el.select(`.${l}`).dom,t.tools[i]=new e.Tool(n,t.scope||t)})},renderBars(){var t=this,n=!1,i=t.theme,a=this;t.items&&t.items[0]&&("grid"===t.items[0].type&&(n=!0),a=t.items[0]),t.bbar&&(t._bbar=new e.Bar({el:t.el.select(`.${g}`),items:t.bbar,height:t.bbarHeight||t.barHeight,barContainer:t.barContainer,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.bbarHidden,scope:a,theme:i,i18n:this.i18n}),t.bbar=t._bbar.items),t.buttons&&(t._buttons=new e.Bar({el:t.el.select(`.${p}`),items:t.buttons,height:t.buttonsHeight||t.barHeight,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.buttonsHidden,scope:a,theme:i}),t.buttons=t._buttons.items),t.tbar&&(t._tbar=new e.Bar({el:t.el.select(`.${h}`),items:t.tbar,height:t.tbarHeight||t.barHeight,tabEdit:!t.subTBar&&n,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.tbarHidden,scope:a,theme:i}),t.tbar=t._tbar.items),t.subTBar&&(t._subTBar=new e.Bar({el:t.el.select(`.${u}`),items:t.subTBar,height:t.subTBarHeight||t.barHeight,tabEdit:n,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.subTBarHidden,scope:a,theme:i}),t.subTBar=t._subTBar.items),t.footer&&(t._footer=new e.Bar({disableScroll:!0,el:t.el.select(`.${v}`),items:t.footer,height:t.barHeight,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,scope:a,theme:i,isFooter:!0}),t.footer=t._footer.items)},showAt(t,n){this.css({left:`${t}px`,display:"","z-index":1e3+e.zIndex++}),void 0!==n&&this.css({top:n+"px"})},show(){const t=this;if(t.el.show(),!0!==t.window)return;t.buttons&&t._buttons.checkScroll(),t.tbar&&t._tbar.checkScroll(),t.bbar&&t._bbar.checkScroll(),t.subTBar&&t._subTBar.checkScroll();const i=e.getViewSize(),a=t.el.height(),s=t.el.width(),o=[],l=e.getScroll(),r=l[0],d=l[1];o[0]=(i[1]-s)/2,o[1]=(i[0]-a)/2,o[0]<10&&(o[0]=10),o[1]<10&&(o[1]=10),t.css({left:o[0]+d+"px",top:o[1]+r+"px",display:"","z-index":1e3+e.zIndex++}),t.modal&&e.select(`.${n}`).css({display:"","z-index":1e3+e.zIndex-2})},hide(){this.css({display:"none"}),this.modal&&e.select(`.${n}`).css("display","none"),e.each(this.items||[],e=>{"combo"===e.type&&e.hideList()})},setTitle(e){this.el.select(`.${o}`).update(e)},getTitle(){return this.el.select(`.${o}`).dom.innerHTML},setSubTitle(e){this.el.select(`.${s}`).update(e)},getSubTitle(){return this.el.select(`.${s}`).dom.innerHTML},getHeight(){return parseInt(this.css("height"))},setWidth(e){this.items[0].setWidth(e)},setHeight(e){this.css("height",e),this.items[0].setHeight(e,!1)},setActiveWindowWatcher(){const t=this;t.el.on("mousedown",function(n){e.get(n.target).hasCls(C)||(1e3+e.zIndex-1>parseInt(t.css("z-index"))&&t.css("z-index",1e3+e.zIndex++),e.get(document.body).select(".fancy-active-panel").removeCls("fancy-active-panel"),t.el.addCls("fancy-active-panel"))})}})}(),function(){const e=Fancy,t=e.BUTTON_CLS;e.define("Fancy.Tool",{extend:e.Widget,constructor:function(e,t){this.scope=t,this.Super("const",arguments)},init(){const e=this;e.addEvents("click","mousedown","mouseup","mouseover","mouseout"),e.Super("init",arguments),e.style=e.style||{},e.render(),e.ons()},ons(){this.el.on("click",this.onClick,this)},cls:t,text:"",height:28,paddingTextWidth:5,render(){const t=this,n=e.get(t.renderTo||document.body).dom,i=e.newDomEl("div");t.fire("beforerender"),i.className="fancy-tool-button",i.innerHTML=t.text,t.el=e.get(n.appendChild(i)),t.fire("afterrender"),t.fire("render")},onClick(){const e=this;e.fire("click"),e.handler&&(e.scope?e.handler.apply(e.scope,[e]):e.handler(e))},setText(e){this.el.update(e)}})}(),function(){var e=Fancy;const t=e.PANEL_BODY_INNER_CLS,n=e.PANEL_GRID_INSIDE_CLS,i=e.TAB_WRAPPER_CLS,a=e.TAB_ACTIVE_WRAPPER_CLS,s=e.TAB_TBAR_ACTIVE_CLS,o=e.PANEL_TAB_CLS,l=e.PANEL_CLS,r=e.GRID_CLS;e.define(["Fancy.panel.Tab","Fancy.Tab","FancyTab"],{extend:e.Panel,constructor:function(e,t){const n=this,i=function(){Fancy.isDom(e)?(t=t||{}).renderTo=e:t=e,(t=t||{}).renderOuter&&(t.renderTo=t.renderOuter),Fancy.loadStyle(),n.prepareConfigTheme(t),n.prepareConfigSize(t),Fancy.applyConfig(n,t),n.Super("const",arguments)};Fancy.fullBuilt||!1===Fancy.MODULELOAD?i():!Fancy.nojQuery||Fancy.modules.dom||Fancy.modules.grid?i():Fancy.loadModule("dom",function(){Fancy.loadModule("grid",function(){i()})})},init(){const e=this;e.prepareTabs(),e.Super("init",arguments),e.setActiveTab(e.activeTab),e.ons()},activeTab:0,theme:"default",render:function(){const e=this;e.Super("render",arguments),Fancy.loadingStyle&&(e.el.css("opacity",0),e.intervalStyleLoad=setInterval(()=>{Fancy.loadingStyle||(clearInterval(e.intervalStyleLoad),e.el.animate({opacity:1,force:!0}))},100)),e.panelBodyEl=e.el.select(`.${t}`).item(0),e.setPanelBodySize(),e.renderTabWrappers(),e.wrapped||e.el.addCls(n),e.el.addCls(o),e.rendered=!0},ons(){const t=this;t.responsive&&e.$(window).bind("resize",function(){t.onWindowResize(),clearInterval(t.intWindowResize),t.intWindowResize=setTimeout(()=>{t.onWindowResize(),delete t.intWindowResize,setTimeout(()=>{t.onWindowResize()},300)},30)})},onWindowResize(){var t,n=this,a=n.renderTo;n.panel&&(a=n.panel.renderTo),((t=n.responsive?e.get(a):n.panel?n.panel.el:e.get(a)).hasClass(l)||t.hasClass(r))&&(t=t.parent());let s=t.width();if(void 0===t.dom)return;if(0===s&&(s=t.parent().width()),n.responsive&&n.setWidth(s),n.responsiveHeight){let e=parseInt(t.height());0===e&&(e=parseInt(t.parent().height())),n.setHeight(e)}n.setPanelBodySize(),n.el.select(`.${i} .${l}:first-child`).forEach(e=>{e.css({height:"auto",width:"auto"})})},setPanelBodySize(){let e=this,t=e.height,n=e.panelBodyBorders;e.title&&(t-=e.titleHeight),e.subTitle&&(t-=e.subTitleHeight,t+=n[2]),e.bbar&&(t-=e.bbarHeight||e.barHeight),e.tbar&&(t-=e.tbarHeight||e.barHeight),e.subTBar&&(t-=e.subTBarHeight||e.barHeight),e.buttons&&(t-=e.buttonsHeight||e.barHeight),e.footer&&(t-=e.barHeight),t-=n[0]+n[2],e.panelBodyEl.css({height:t}),e.panelBodyHeight=t,e.panelBodyWidth=e.width-n[1]-n[3]},prepareConfigTheme(t){const n=this,i=t.theme||n.theme,a=e.getTheme(i).config;(n.wrapped||t.wrapped)&&(t.panelBodyBorders=[0,0,0,0],n.panelBodyBorders=[0,0,0,0]),e.applyIf(t,a),e.apply(n,t)},prepareConfigSize(e){let t,n=e.renderTo;if(void 0===e.width&&n&&(e.responsive=!0,t=Fancy.get(n),e.width=parseInt(t.width())),void 0===e.height&&n){e.responsiveHeight=!0,t=Fancy.get(n);let i=parseInt(t.height());i<50&&(i=parseInt(t.parent().css("height"))),e.height=i}},prepareTabs(){const e=this;let t=[],n=0,i=e.items.length;for(;n<i;n++){const i=e.items[n],a={type:"tab"};i.tabTitle?a.text=i.tabTitle:i.title&&(a.text=i.title,delete i.title),a.handler=function(t){return function(){e.setActiveTab(t)}}(n),t.push(a)}e.tbar=t,e.tabs=t},renderTabWrappers(){const t=this;t.items.forEach(n=>{const a=e.newEl("div");a.addCls(i),n.renderTo=t.panelBodyEl.dom.appendChild(a.dom)})},setActiveTab(e){const t=this,n=t.el.select(`.${i}`),o=t.activeTab;if(0===t.items.length)return;n.item(t.activeTab).removeCls(a),t.activeTab=e,n.item(t.activeTab).addCls(a);const l=t.items[t.activeTab];if(l.theme=t.theme,l.wrapped=!0,l.width=t.panelBodyWidth,l.height=t.panelBodyHeight,l.rendered)t.setActiveItemWidth(),t.setActiveItemHeight();else switch(l.type){case"form":t.items[t.activeTab]=new FancyForm(l);break;case"grid":t.items[t.activeTab]=new FancyGrid(l);break;case"tab":t.items[t.activeTab]=new FancyTab(l)}t.tabs&&(t.tbar[o].removeCls(s),t.tbar[t.activeTab].addCls(s))},setWidth(e){this.width=e,this.css("width",e),this.setPanelBodySize(),this.setActiveItemWidth()},setHeight(e){this.height=e,this.css("height",e),this.setPanelBodySize(),this.setActiveItemHeight()},setActiveItemWidth(){0!==this.items.length&&this.items[this.activeTab].setWidth(this.panelBodyWidth)},setActiveItemHeight(){0!==this.items.length&&this.items[this.activeTab].setHeight(this.panelBodyHeight,!1)}}),FancyTab.get=(t=>{const n=e.get(t).select(`.${o}`).dom.id;return e.getWidget(n)}),!e.nojQuery&&e.$&&(e.$.fn.FancyTab=function(t){return this.selector?t.renderTo=e.$(this.selector)[0].id:t.renderTo=this.attr("id"),new FancyTab(t)})}(),function(){const e=Fancy,t=e.GRID_CLS,n=e.GRID_CELL_CLS,i=e.BAR_CLS,a=e.BAR_CONTAINER_CLS,s=e.BAR_BUTTON_CLS,o=e.BAR_SEG_BUTTON_CLS,l=e.BAR_LEFT_SCROLLER_CLS,r=e.BAR_RIGHT_SCROLLER_CLS,d=e.FIELD_LABEL_CLS,c=e.FIELD_TEXT_CLS,h=e.FIELD_TEXT_INPUT_CLS,u=e.FIELD_SEARCH_CLS,p=e.FIELD_SEARCH_LIST_CLS,g=e.FIELD_SEARCH_PARAMS_LINK_CLS,y=e.FIELD_SEARCH_PARAMED_CLS,m=e.FIELD_SEARCH_PARAMED_EMPTY_CLS,f=e.PICKER_MONTH_ACTION_BUTTONS_CLS,v=e.CLEARFIX_CLS;e.define("Fancy.Bar",{extend:e.Widget,widgetCls:i,containerCls:a,cls:"",text:"",floating:"left",sideRight:3,scrolled:0,tabOffSet:5,tabScrollStep:80,barScrollEnabled:!0,constructor:function(t){e.apply(this,t),this.init()},init(){const e=this;e.roles={},e.render(),e.barScrollEnabled&&(e.initScroll(),setTimeout(function(){e.checkScroll()},150))},render(){this.renderEl(),this.renderItems(),this.initTabEdit()},renderEl(){const t=this;if(!t.el){const n=e.newEl("div");n.addCls(t.widgetCls,t.cls),n.update(t.text),t.el=e.get(t.renderTo.appendChild(n.dom)),t.style&&t.el.css(t.style)}t.hidden&&t.el.css("display","none");const n=e.newEl("div");n.addCls(t.containerCls),t.containerEl=e.get(t.el.dom.appendChild(n.dom))},renderItems(){for(var t=this,n=t.containerEl,i=t.items||[],a=0,s=i.length,o=!1,l=[],r=s-1,d=0;a<s;a++){var c=i[a];switch(o&&(c=i[r],r--),c.toggleGroup&&(c.enableToggle=!0),e.isObject(c)&&(c.type=c.type||"button"),o&&(t.floating="right",c.style=c.style||{},c.style.right=d),e.isObject(c)&&(c.renderTo=n.dom),c){case"|":const a={float:t.floating,"margin-right":"5px","margin-top":"6px","padding-left":"0px"};"right"===t.floating&&e.applyIf(a,{right:"1px",position:"absolute"}),l.push(new e.Separator({renderTo:n.dom,style:a}));continue;case"side":case"->":t.isFooter||(o=!0);continue;default:o?l[r]=t.renderItem(c):l.push(t.renderItem(c))}o&&(c.text?d+=7*c.text.length+5+5+5:c.width&&(d+=c.width+5),c.imageCls&&(c.imageWidth?d+=c.imageWidth:d+=20),d+=3)}t.items=l},renderItem(n){var i,a=this,l=a.containerEl,r=a.theme;switch(n.style=n.style||{},n.label=!1,n.padding=!1,n.theme=a.theme,e.applyIf(n.style,{float:a.floating}),"right"===a.floating&&e.applyIf(n.style,{right:a.sideRight,position:"absolute"}),!n.scope&&a.scope&&(n.scope=a.scope),n.type){case"wrapper":n.cls===f&&(l.destroy(),l=a.el);for(var C,b=l.append('<div class="'+(n.cls||"")+'"></div>').select("div").item(0),F=0,L=n.items.length,_=0;F<L;F++){C=n.items[F],e.isObject(C)&&(C.type=C.type||"button"),C.renderTo=b.dom;const t=(i=a.renderItem(C)).el;F===L-1?t.css("margin-right","0px"):_+=parseInt(t.css("margin-right")),e.nojQuery?_+=parseInt(t.width()):_+=parseInt(t.$dom.outerWidth()),_+=parseInt(t.css("margin-left"))}b.css("width",_);break;case void 0:case"button":n.extraCls=s,n.scope=n.scope||a.scope,i=new e.Button(n);break;case"segbutton":n.extraCls=o,e.applyIf(n.style,{"margin-right":"6px"}),i=new e.SegButton(n);break;case"tab":i=new e.toolbar.Tab(n);break;case"text":a.isFooter||e.applyIf(n.style,{"margin-right":"10px","padding-left":"0px","padding-top":"11px"}),e.apply(n,{renderTo:l.dom,cls:n.cls||""}),i=new e.bar.Text(n);break;case"combo":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:70}),i=new e.Combo(n);break;case"date":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:100}),i=new e.DateField(n);break;case"number":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:35}),i=new e.NumberField(n);break;case"checkbox":e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),i=new e.CheckBox(n);break;case"switcher":e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:35}),i=new e.Switcher(n);break;case"string":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:100}),i=new e.StringField(n);break;case"search":n.inputWidth=18,n.events=n.events||[],n.events=n.events.concat([{enter:function(n,i){const a=e.getWidget(n.el.parent().parent().parent().parent().select(`.${t}`).item(0).attr("id"));a.search(i),a.expander&&a.expander.reSet()}},{key:function(n,i){const a=this,s=e.getWidget(n.el.parent().parent().parent().parent().select(`.${t}`).item(0).attr("id"));s.filter&&!1===s.filter.autoEnterDelay||(a.autoEnterTime||(a.autoEnterTime=new Date),clearInterval(a.intervalAutoEnter),delete a.intervalAutoEnter,a.intervalAutoEnter=setInterval(function(){new Date-a.autoEnterTime>500&&(clearInterval(a.intervalAutoEnter),delete a.intervalAutoEnter,i=n.getValue(),s.search(i),s.expander&&s.expander.reSet())},200))}},{render:function(n){var i=this,a=!1;n.el.on("mouseenter",function(){a=!0},null,"."+g),n.el.on("mousedown",function(e){e.preventDefault()},null,"."+g),n.el.on("click",function(s){var o=!1,l=e.getWidget(n.el.parent().parent().parent().parent().select("."+t).attr("id")),d=l.columns||[],c=l.leftColumns||[],h=l.rightColumns||[],u=d.concat(c).concat(h),g=[],y=0,m=u.length,f=1;if(l.searching.items)e.each(l.searching.items,function(e){g.push({inputLabel:" &nbsp;&nbsp;"+e.text,value:!0,name:e.index}),f+=l.fieldHeight});else for(;y<m;y++){var v=u[y],C=v.title;if(void 0===C&&(C=""),!1!==v.searchable){switch(v.type){case"color":case"combo":case"date":case"number":case"string":case"text":case"currency":break;default:continue}f+=l.fieldHeight,g.push({inputLabel:" &nbsp;&nbsp;"+C,value:!0,name:v.index})}}if(i.list){if("none"!==i.list.el.css("display"))return void i.list.el.css("display","none");o=!0}else{var b=0;e.each(g,function(e){e.inputLabel.replace(/\&nbsp\;/g,"").length>b&&(b=e.inputLabel.length)});var F=150;b>15&&(F=9*b),i.list=new FancyForm({width:F,height:f,theme:r,defaults:{type:"checkbox",label:!1,style:{padding:"8px 16px 0px"}},items:g,cls:p,events:[{set:function(){l.searching.setKeys(i.list.get())}},{init:function(){setTimeout(function(){var t=i.list.el;t.on("mouseenter",function(){a=!0}),t.on("mouseleave",function(){a=!1,setTimeout(function(){!1===a&&i.list&&t.css("display","none")},750)});var o=e.get(s.target).offset(),l=parseInt(n.el.css("height"));t.css({position:"absolute",top:o.top+l+20,left:o.left}),i.list.el.css("display","block"),t.animate({duration:200,top:o.top+l-1})},50)}}]})}var L=e.get(s.target).offset(),_=parseInt(n.el.css("height"));i.list&&i.list.el&&(i.list.css({position:"absolute",top:L.top+_+20,left:L.left}),o&&i.list.css("display","block"),i.list.el.animate({duration:200,top:L.top+_-1}))},null,"."+g),n.el.on("mouseleave",function(){a=!1,setTimeout(function(){!1===a&&i.list&&i.list.el.css("display","none")},750)},null,"."+g)}}]),e.applyIf(n.style,{float:a.floating,"padding-left":"0px","margin-right":"8px","margin-top":"4px"});var E=u;n.paramsMenu&&(n.tpl=['<div class="'+d+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+c+'">','<input placeholder="{emptyText}" class="'+h+'" style="{inputWidth}" value="{value}">','<div class="'+g+'" style="">'+(n.paramsText||"&nbsp;")+"</div>","</div>",'<div class="'+v+'"></div>'],E+=" "+y,n.paramsText||(E+=" "+m)),e.applyIf(n,{padding:!1,width:250,cls:E,emptyText:"Search"}),i=new e.StringField(n)}return"right"===a.floating&&(a.sideRight+=i.width,a.sideRight+=7),n.role&&(a.roles[n.role]=i),i},initScroll:function(){const t=this;t.leftScroller=new e.Button({imageCls:!0,renderTo:t.el.dom,cls:l,height:t.height+2,minWidth:20,paddingTextWidth:0,imageWidth:20,width:0,text:!1,style:{position:"absolute",left:-1,top:-1,display:"none"},listeners:[{click:t.onPrevScrollClick,scope:t}]}),t.rightScroller=new e.Button({imageCls:!0,renderTo:t.el.dom,cls:r,height:t.height+2,minWidth:20,paddingTextWidth:0,imageWidth:20,width:0,text:!1,style:{position:"absolute",right:-1,top:-1,display:"none"},listeners:[{click:t.onNextScrollClick,scope:t}]})},getBarWidth(){return parseInt(this.el.css("width"))},getItemsWidth(){let t=0;return e.each(this.items,function(n){"none"!==n.el.css("display")&&(t+=n.el.width(),t+=parseInt(n.el.css("margin-left")),t+=parseInt(n.el.css("margin-right")),e.nojQuery||(t+=parseInt(n.el.css("padding-right")),t+=parseInt(n.el.css("padding-left")),t+=parseInt(n.el.css("border-left-width")),t+=parseInt(n.el.css("border-right-width"))))}),t},onPrevScrollClick(){const e=this;e.scrolled+=e.tabScrollStep,e.scrolled>-20&&(e.scrolled=0),e.applyScrollChanges()},onNextScrollClick(){this.scrolled-=this.tabScrollStep,this.applyScrollChanges()},applyScrollChanges(){const e=this,t=e.getItemsWidth()+e.tabOffSet,n=e.getBarWidth()-parseInt(e.leftScroller.el.css("width"))-parseInt(e.rightScroller.el.css("width"))-2*e.tabOffSet,i=t-n;if(0===e.scrolled?e.leftScroller.disable():e.scrolled<0&&e.leftScroller.enable(),t>n&&0===e.scrolled&&e.rightScroller.enable(),n+Math.abs(e.scrolled)<t&&e.rightScroller.enable(),t<n)return e.scrolled=0,e.leftScroller.el.hide(),e.rightScroller.el.hide(),void e.containerEl.css({"margin-left":"0px"});e.scrolled>0?(e.scrolled=0,e.leftScroller.disable(),e.rightScroller.enable()):e.scrolled<-i&&(e.scrolled=-i,e.leftScroller.enable(),e.rightScroller.disable()),e.leftScroller.el.show(),e.rightScroller.el.show(),e.containerEl.css({"margin-left":e.scrolled+20+"px"})},onDocMouseUp(){const e=this;e.scrollInterval&&(clearTimeout(e.scrollInterval),delete e.scrollInterval)},checkScroll(){const e=this,t=e.getItemsWidth(),n=e.getBarWidth();e.disableScroll||(e.isParentHidden()?e.checkVisInt=setInterval(function(){e.isParentHidden()||(e.checkScroll(),clearInterval(e.checkVisInt),delete e.checkVisInt)},300):(clearInterval(e.checkVisInt),delete e.checkVisInt),t>n?e.enableScroll():e.barScrollEnabled&&(e.leftScroller.el.hide(),e.rightScroller.el.hide()))},enableScroll(){const e=this;e.barScrollEnabled&&(e.leftScroller.el.show(),e.rightScroller.el.show(),0===e.scrolled&&(e.leftScroller.disable(),e.containerEl.css("margin-left","20px")))},initTabEdit(){const e=this;if(!e.tabEdit)return;let t=e.items.length-1;for(;t>-1;t--){const n=e.items[t];switch(n.type){case"number":case"string":case"date":return void n.on("tab",e.onTabLastInput,e)}}},onTabLastInput(i,a){const s=e.getWidget(this.el.parent().select(`.${t}`).attr("id"));a.preventDefault(),s.leftColumns.length?setTimeout(()=>{s.leftBody.el.select(`.${n}`).item(0).dom.click()},100):setTimeout(()=>{s.body.el.select(`.${n}`).item(0).dom.click()},100)},isParentHidden(n,i=1){const a=e.getWidget(this.el.parent().select(`.${t}`).attr("id"));return!!a&&(n||(n=a.el),"none"===n.css("display")||!(i>5||"body"===n.dom.tagName.toLocaleLowerCase())&&(i++,n=n.parent(),this.isParentHidden(n,i)))}})}(),Fancy.define("Fancy.Separator",{cls:Fancy.SEPARATOR_CLS,constructor:function(e){Fancy.apply(this,e),this.init()},init(){this.render()},render(){const e=this,t=Fancy.newEl("div");t.addCls(e.cls),t.update("<div></div>"),e.el=Fancy.get(e.renderTo.appendChild(t.dom)),e.style&&e.el.css(e.style)}}),Fancy.define("Fancy.bar.Text",{extend:Fancy.Widget,widgetCls:Fancy.BAR_TEXT_CLS,cls:"",text:"",tipTpl:"{value}",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){this.Super("init",arguments),this.render(),this.ons()},render(){const e=this,t=Fancy.newEl("div");t.addCls(e.widgetCls,e.cls),t.update(e.text),e.el=Fancy.get(e.renderTo.appendChild(t.dom));const{style:n,hidden:i,id:a,width:s}=e;n&&e.el.css(n),i&&e.el.css("display","none"),a&&e.el.attr("id",a),s&&e.el.css("width",s)},get(){return this.el.dom.innerHTML},getValue(){return this.get()},set(e){this.el.dom.innerHTML=e},ons(){const e=this,t=e.el;t.on("mouseover",e.onMouseOver,e),t.on("mouseout",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onMouseMove(e){const t=this;t.tip&&t.tooltip&&t.tooltip.show(e.pageX+15,e.pageY-25)},onMouseOver(e){const t=this;t.fire("mouseover"),t.tip&&t.renderTip(e)},renderTip(e){const t=this;let n="";if(t.tooltip&&t.tooltip.destroy(),!0===t.tip)t.tip=new Fancy.Template(t.tipTpl).getHTML({value:t.get()});else switch(Fancy.typeOf(t.tip)){case"function":n=t.tip(this,t.get,t.label||"");break;case"string":n=t.tpl.getHTML({value:t.get()})}t.tooltip?t.tooltip.update(n):t.tooltip=new Fancy.ToolTip({text:n}),t.tooltip.css("display","block"),t.tooltip.show(e.pageX+15,e.pageY-25)},onMouseOut(){const e=this;e.fire("mouseout"),e.tooltip&&(e.tooltip.destroy(),delete e.tooltip)}}),Fancy.define(["Fancy.Form","FancyForm"],{extend:Fancy.Widget,mixins:["Fancy.form.mixin.Form",Fancy.panel.mixin.PrepareConfig,Fancy.panel.mixin.methods,"Fancy.form.mixin.PrepareConfig"],type:"form",theme:"default",i18n:"en",maxLabelNumber:11,minWidth:200,minHeight:200,barScrollEnabled:!0,scrollable:!1,constructor:function(e,t){const n=this;Fancy.isDom(e)?(t=t||{}).renderTo=e:t=e,t=t||{};const i=function(e){e&&Fancy.apply(t,e),t=n.prepareConfig(t,n),Fancy.applyConfig(n,t),n.Super("const",arguments)},a=function(){const e=t.i18n||n.i18n;!0===Fancy.loadLang(e,i)&&i({})};Fancy.loadStyle(),Fancy.modules.form||Fancy.fullBuilt||!1===Fancy.MODULELOAD||!1===Fancy.MODULESLOAD||!0===n.fullBuilt||!0===n.neededModules?a():Fancy.modules.grid?Fancy.loadModule("form",function(){a()}):n.loadModules(a,t)},loadModules(e,t){const n=this,i={form:!0};Fancy.modules=Fancy.modules||{},Fancy.nojQuery&&(i.dom=!0),Fancy.isTouch&&(i.touch=!0),t.url&&(i.ajax=!0);const a=function(e){if(e.menu)return i.menu=!0,!0};Fancy.each(t.tbar,a),Fancy.each(t.bbar,a),Fancy.each(t.buttons,a),Fancy.each(t.subTBar,a);const s=function(e){for(var t,n=0,a=e.length;n<a;n++)"combo"===(t=e[n]).type&&t.data&&t.data.proxy&&(i.ajax=!0),"date"===t.type&&(i.grid=!0,i.date=!0,i.selection=!0),t.items&&s(t.items)};for(var o in s(t.items||[]),n.neededModules={length:0},i)void 0===Fancy.modules[o]&&(n.neededModules[o]=!0,n.neededModules.length++);if(0===n.neededModules.length)return n.neededModules=!0,void e();const l=function(t){delete n.neededModules[t],n.neededModules.length--,0===n.neededModules.length&&(n.neededModules=!0,e())};if(n.neededModules.dom)Fancy.loadModule("dom",function(){for(var e in delete n.neededModules.dom,n.neededModules.length--,n.neededModules)"length"!==e&&Fancy.loadModule(e,l)});else for(var o in n.neededModules)"length"!==o&&Fancy.loadModule(o,l)}}),FancyForm.get=(e=>{const t=Fancy.get(e);if(!t.dom)return;const n=t.select(".fancy-form").dom.id;return Fancy.getWidget(n)}),FancyForm.defineTheme=Fancy.defineTheme,FancyForm.defineController=Fancy.defineController,FancyForm.addValid=Fancy.addValid,!Fancy.nojQuery&&Fancy.$&&(Fancy.$.fn.FancyForm=function(e){return this.selector?e.renderTo=Fancy.$(this.selector)[0].id:e.renderTo=this.attr("id"),new Fancy.Form(e)}),function(){const e=Fancy,t=e.FIELD_NOT_VALID_CLS,n=e.FIELD_LABEL_ALIGN_TOP_CLS,i=e.FIELD_TEXT_CLS,a=e.FIELD_LABEL_CLS,s=e.FIELD_TEXTAREA_TEXT_CLS,o=e.FIELD_LABEL_ALIGN_RIGHT_CLS,l=e.FIELD_DISABLED_CLS;e.ns("Fancy.form.field"),e.form.field.Mixin=function(){},e.form.field.Mixin.prototype={padding:"8px 8px 0px 8px",inputHeight:29,labelHeight:18,failedValidCls:t,cls:"",checkValidOnTyping:!1,editable:!0,ons(){const e=this,t=e.el,n=e.el.getByTag("input");if(e.input=n,n.on("blur",e.onBlur,e),n.on("focus",e.onFocus,e),n.on("input",e.onInput,e),n.on("keydown",e.onKeyDown,e),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.on("key",e.onKey,e),e.tip&&t.on("mousemove",e.onMouseMove,e),e.format&&e.format.inputFn){switch(e.value){case"":case void 0:break;default:e.formatValue(e.value)}e.on("key",e.onKeyInputFn)}e.stopPropagation&&t.on("mousedown",function(e){e.stopPropagation()}),t.on("mousedown",function(t){e.disabled&&(t.preventDefault(),t.stopPropagation())})},onKeyInputFn(t,n,i){const a=i.keyCode,s=e.key;if(!this.disabled){switch(a){case s.ENTER:case s.ESC:case s.LEFT:case s.RIGHT:case s.TAB:return}this.formatValue(n)}},formatValue(e){e=this.format.inputFn(e);let t=this.input.dom.selectionStart;const n=this.input.dom.value;this.input.dom.value=e,n.length<e.length&&t++,this.setCaretPosition(t)},setCaretPosition(e){const t=this.input.dom;if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else t.selectionStart?(t.focus(),t.setSelectionRange(e,e)):t.focus()},onMouseOver(e){const t=this;t.disabled||(t.fire("mouseover"),t.tip&&t.renderTip(e))},onMouseOut(){this.disabled||(this.fire("mouseout"),this.tip&&e.tip.hide())},render(){var t=this,r=t.renderTo||document.body,d=t.renderAfter,c=t.renderBefore,h=e.newEl("div");e.isString(r)&&((r=document.getElementById(r))||(r=e.select(r).item(0))),t.fire("beforerender"),h.addCls(e.cls,t.cls,t.fieldCls),h.attr("id",t.id);var u="",p="";t.itemsHTML&&(p=t.itemsHTML),"top"===t.labelAlign&&t.label&&t.labelWidth<7*t.label.length&&(t.labelWidth=7*(t.label.length+2)),t.labelWidth&&(u="width:"+t.labelWidth+"px;");let g=t.label;""===t.label?g="&nbsp;":void 0===t.label?g="&nbsp;":"right"!==t.labelAlign&&(g+=":");var y="",m="",f="";if(!1===t.label&&(y="display:none;"),t.inputLabel?f=t.inputLabel:m="display:none;","recaptcha"===t.type)h.update(t.tpl.getHTML({key:t.key}));else{const e={labelWidth:u,label:g,labelDisplay:y,inputLabelDisplay:m,inputLabel:f,emptyText:t.emptyText,value:t.value,height:t.height,itemsHTML:p,errorTextStyle:"",buttonText:t.buttonText};"set"===t.type&&delete e.height,h.update(t.tpl.getHTML(e))}if(t.el=h,t.setStyle(),!0===t.renderId&&h.attr("id",t.id),d?h=(d=e.get(d)).after(h.dom.outerHTML).next():c?h=c.before(h.dom.outerHTML).prev():r.appendChild(h.dom),t.el=h,"textarea"===t.type?t.input=t.el.getByTag("textarea"):t.input=t.el.getByTag("input"),t.name&&(t.input.name=t.name),t.setSize(),"top"===t.labelAlign)t.el.addCls(n),t.el.select("."+i).css("float","none");else if("right"===t.labelAlign)switch(t.el.addCls(o),t.type){case"radio":e.$(h.dom).find("."+a).insertAfter(e.$(h.dom).find("."+i+":last")),e.$(h.dom).find("."+a).css("float","right");break;case"textarea":e.$(h.dom).find("."+a).insertAfter(e.$(h.dom).find("."+s));break;case"checkbox":e.$(h.dom).find("."+a).css("float","right");break;default:e.$(h.dom).find("."+a).insertAfter(e.$(h.dom).find("."+i))}else t.type;if(t.acceptedValue=t.value,t.fire("afterrender"),t.fire("render"),"recaptcha"!==t.type&&"chat"!==t.type&&setTimeout(function(){t.input&&t.input.dom&&0===t.input.dom.value.length&&void 0===t.prevColor&&(t.prevColor=t.input.css("color"))},1),t.disabled){switch(t.type){case"hidden":break;default:t.addCls(l)}t.input&&t.input.attr("tabIndex",-1)}else t.input&&t.tabIndex&&t.input.attr("tabIndex",t.tabIndex)},onKeyDown(t){const n=this,i=t.keyCode,a=e.key;if(n.fire("beforekey",n.input.dom.value,t),!n.disabled){switch(i){case a.BACKSPACE:case a.DELETE:switch(n.type){case"field.number":case"field.string":case"field.date":setTimeout(function(){""===n.getValue()&&n.fire("empty")},1)}break;case a.TAB:n.fire("tab",t);break;case a.ESC:n.fire("esc",t);break;case a.ENTER:const e="textarea"===n.type||"field.textarea"===n.type;if(e&&t.shiftKey)break;n.fire("enter",n.getValue()),e||(t.preventDefault(),t.stopPropagation());break;case a.UP:switch(n.type){case"number":case"field.number":this.spin&&n.spinUp()}n.fire("up",n.getValue()),"textarea"!==n.type&&(t.preventDefault(),t.stopPropagation());break;case a.DOWN:switch(n.type){case"number":case"field.number":this.spin&&n.spinDown()}n.fire("down",n.getValue()),"textarea"!==n.type&&(t.preventDefault(),t.stopPropagation());break;case a.LEFT:case a.RIGHT:t.stopPropagation();break;default:setTimeout(function(){n.input&&(0===n.input.dom.value.length?(void 0===n.prevColor&&(n.prevColor=n.input.css("color")),n.input.css("color","grey")):n.prevColor?n.input.css("color",n.prevColor):n.input.css("color"," "))},1)}setTimeout(()=>{n.fire("key",n.input.dom.value,t)},1)}},onKey(e,t){e.disabled||e.isValid()&&!e.checkValidOnTyping||e.validate(t)},onBlur(){const e=this;if(e.disabled)return!0;if(e.fire("blur"),e.input){if("combo"!==e.type)return e.validate(e.input.dom.value);setTimeout(()=>{e.listItemClicked||e.validate(e.input.dom.value)},100)}return!0},validate(t){const n=this,i=n.vtype;if(void 0===i)return!0;{const a=e.isValid(i,t);return!0!==a?(n.errorText=new e.Template(a.text).getHTML(a),n.failedValid(),!1):(n.successValid(),!0)}},isValid(){return!this.hasCls(this.failedValidCls)},onFocus(){this.disabled||!1===this.editable?this.input.blur():this.fire("focus")},blur(){this.input.blur()},onInput(){const e=this,t=e.getValue(),n=e.acceptedValue;e.disabled||(e.acceptedValue=e.get(),e.fire("input",t),e.fire("change",t,n))},get(){const t=this;if(t.format)if(e.isString(t.format));else{if(!e.isObject(t.format))return t.value;if(t.format.inputFn&&("number"===t.type||"field.number"===t.type))return isNaN(parseFloat(t.value))?t.value:Number(t.value)}return t.input.dom.value},getValue(){return this.get()},set(e,t){const n=this;n.value=e,n.format&&n.format.inputFn?n.formatValue(e):n.input.dom.value=e,!1!==t&&n.onInput(),n.validate(e)},setLabel(e){this.el.select(`.${a}`).update(e)},setValue(e,t){this.set(e,t)},clear(){this.set(""),this.clearValid()},failedValid(){const t=this;t.hasCls(t.failedValidCls)?t.tooltip&&t.errorText&&e.tip.update(t.errorText):(!t.tooltip&&t.errorText&&(t.showErrorTip(),t.el.on("mousemove",t.onMouseMove,t),t.input.hover(function(n){t.errorText&&(t.showErrorTip(),e.tip.show(n.pageX+15,n.pageY-25))},function(){t.hideErrorTip()})),t.addCls(t.failedValidCls))},clearValid(){this.removeCls(this.failedValidCls)},successValid(){this.removeCls(this.failedValidCls),this.hideErrorTip(),delete this.errorText},showErrorTip(){e.tip.update(this.errorText)},hideErrorTip(){e.tip.hide()},setInputSize(e){const t=this;"combo"===t.type&&t.inputContainer.css("width",e.width),e.width&&t.input.css("width",e.width),e.height&&"set"!==t.type&&t.input.css("height",e.height)},focus(){const e=this;e.input.focus(),setTimeout(()=>{e.input.dom.selectionStart=e.input.dom.selectionEnd=1e4},0)},hide(){this.fire("beforehide"),this.css("display","none"),this.fire("hide")},show(){this.css("display","block")},setSize(e,t){const n=this;if(n.type,void 0===e&&void 0===t)e=n.width,t=n.height;else if(void 0===t){const i=e;e=i.width?i.width:n.width,t=i.height?i.height:n.height}n.size?n.size({width:e,height:t}):(void 0!==e&&n.css("width",e),"top"===n.labelAlign?n.css("height",1.5*t):("set"!==n.type&&n.css("height",t),n.label&&n.el.select("."+a).css("height",n.inputHeight)),n.setInputSize({width:n.inputWidth,height:n.inputHeight}))},setStyle(){let t=this,n=t.style||{},i=t.padding;i?(e.isNumber(i)?i+="px":e.isString(i),void 0===n.padding&&(n.padding=i)):n.padding="0px",t.hidden&&t.css("display","none"),t.css(n)},preRender(){const t=this;t.tpl&&!1===e.isObject(t.tpl)&&(t.tpl=new e.Template(t.tpl)),t.calcSize()},calcSize(){var t,n,i,a,s=this,o=s.inputHeight,l=s.padding;if(e.isString(l))switch((l=(l=l.replace(/px/g,"")).split(" ")).length){case 1:l=[n=Number(l[0]),n,n,n];break;case 2:l=[i=Number(l[0]),a=Number(l[1]),i,a];break;case 3:l=[i=Number(l[0]),a=Number(l[1]),Number(l[2]),i];break;case 4:l=[Number(l[0]),Number(l[1]),Number(l[2]),Number(l[3])]}else e.isNumber(l)?l=[l,l,l,l]:!1===l&&(l=[0,0,0,0]);"top"===s.labelAlign&&(s.height*=1.5),t=s.width,"top"!==s.labelAlign&&s.label&&(t-=s.labelWidth),s.height===s.inputHeight&&!1!==s.padding&&(o-=l[0]+l[2]),"radio"!==s.type||s.column||(s.calcColumns(),1!==s.rows&&(o=(o-l[0]-l[2])*s.rows)),s.inputHeight=o,s.inputWidth=t-l[1]-l[3],s.height=o+l[0]+l[2]},setWidth(e){const t=this;t.width=e,t.calcSize(),t.css("width",e),t.setInputSize({width:t.inputWidth})},onMouseMove(t){const n=this,i=n.widget;if(!n.disabled){if(i){if(i.startResizing&&n.tooltip)return void e.tip.hide();if(i.columndrag&&"dragging"===i.columndrag.status)return void e.tip.hide()}n.tooltip?e.tip.show(t.pageX+15,t.pageY-25):n.tip&&n.renderTip(t)}},renderTip(t){var n,i=this,a="",s=i.tip;if(i.getValue)switch(i.type){case"button":case"field.button":a="";break;default:a=i.getValue()}switch(Fancy.typeOf(s)){case"function":n=s(this,a,i.label||"");break;case"string":n=new e.Template(s).getHTML({value:a})}e.tip.update(n),e.tip.show(t.pageX+15,t.pageY-25)},getInputSelection(){var e,t,n,i,a,s=0,o=0,l=this.input.dom;return"number"==typeof l.selectionStart&&"number"==typeof l.selectionEnd?(s=l.selectionStart,o=l.selectionEnd):(t=document.selection.createRange())&&t.parentElement()==l&&(i=l.value.length,e=l.value.replace(/\r\n/g,"\n"),(n=l.createTextRange()).moveToBookmark(t.getBookmark()),(a=l.createTextRange()).collapse(!1),n.compareEndPoints("StartToEnd",a)>-1?s=o=i:(s=-n.moveStart("character",-i),s+=e.slice(0,s).split("\n").length-1,n.compareEndPoints("EndToEnd",a)>-1?o=i:(o=-n.moveEnd("character",-i),o+=e.slice(0,o).split("\n").length-1))),{start:s,end:o}},enable(){const e=this;e.disabled=!1,e.removeCls(l),e.button&&e.button.enable(),e.input&&e.input.attr("tabIndex",e.tabIndex||0)},disable(){const e=this;e.disabled=!0,e.addCls(l),e.button&&e.button.disable(),e.input&&e.input.attr("tabIndex",-1)},getInputValue(){return this.input.dom.value},clearInput(){const e=this;e.input&&(e.input.dom.value="")}}}(),Fancy.define(["Fancy.form.field.String","Fancy.StringField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.string",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("focus","blur","input","enter","up","down","esc","tab","change","key","empty"),e.Super("init",arguments),e.preRender(),e.render(),e.ons(),e.isPassword&&(e.input.attr({type:"password"}),e.showPassTip&&(e.el.select(".fancy-field-text").item(0).append('<div class="fancy-field-pass-tip">abc</div>'),e.passTipEl=e.el.select(".fancy-field-pass-tip").item(0),e.passTipEl.on("mousedown",function(e){e.preventDefault()}),e.passTipEl.on("click",function(){"password"!==e.input.attr("type")?(e.passTipEl.update("abc"),e.input.attr("type","password"),e.passTipEl.css("line-height","22px")):(e.passTipEl.update("***"),e.input.attr("type",""),e.passTipEl.css("line-height","28px"))}))),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:Fancy.FIELD_CLS,value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<input autocomplete="off" placeholder="{emptyText}" class="fancy-field-text-input" style="{inputWidth}" value="{value}">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']}),function(){const e=Fancy.CLEARFIX_CLS,t=Fancy.FIELD_CLS,n=Fancy.FIELD_LABEL_CLS,i=Fancy.FIELD_ERROR_CLS,a=Fancy.FIELD_TEXT_CLS,s=Fancy.FIELD_TEXT_INPUT_CLS,o=Fancy.FIELD_SPIN_CLS,l=Fancy.FIELD_SPIN_UP_CLS,r=Fancy.FIELD_SPIN_DOWN_CLS;Fancy.define(["Fancy.form.field.Number","Fancy.NumberField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.number",allowBlank:!0,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("focus","blur","input","enter","up","down","esc","tab","change","key","empty"),e.Super("init",arguments),e.preRender(),e.render(),e.ons(),e.hidden&&e.css("display","none"),e.initSpin()},fieldCls:t,value:"",width:100,emptyText:"",step:1,tpl:['<div class="'+n+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+a+'">','<input autocomplete="off" placeholder="{emptyText}" class="'+s+'" style="{inputWidth}" value="{value}">','<div class="'+o+'">','<div class="'+l+'"></div>','<div class="'+r+'"></div>',"</div>",'<div class="'+i+'" style="{errorTextStyle}"></div>',"</div>",'<div class="'+e+'"></div>'],onInput(){var e=this,t=e.input,n=e.get(),i=e.acceptedValue;if(e.isValid()){for(var a=t.dom.value,s="",o=0,l=a.length;o<l;o++)switch(a[o]){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":case"+":case".":s+=a[o]}isNaN(Number(s))||(e.value=s,n=s)}e.acceptedValue=Number(e.get()),e.fire("input",n),e.fire("change",Number(n),Number(i))},isNumber:e=>""===e||"-"===e||Fancy.isNumber(+e),checkMinMax(e){return""===e||"-"===e||(e=+e)>=this.min&&e<=this.max},setMin(e){this.min=e},setMax(e){this.max=e},initSpin(){const e=this;!0===e.spin&&(e.el.select("."+o).css("display","block"),e.el.select("."+l).on("mousedown",e.onMouseDownSpinUp,e),e.el.select("."+r).on("mousedown",e.onMouseDownSpinDown,e))},onMouseDownSpinUp(e){var t=this,n=Fancy.get(document),i=700,a=new Date;t.disabled||(e.preventDefault(),t.mouseDownSpinUp=!0,t.spinUp(),t.spinInterval=setInterval(function(){t.mouseDownSpinUp=!1,new Date-a>i&&(700===i&&(i=150),a=new Date,t.spinUp(),--i<20&&(i=20))},20),n.once("mouseup",()=>clearInterval(t.spinInterval)),t.focus())},onMouseDownSpinDown(e){var t=this,n=Fancy.get(document),i=700,a=new Date;t.disabled||(e.preventDefault(),t.mouseDownSpinDown=!0,t.spinDown(),t.spinInterval=setInterval(function(){t.mouseDownSpinDown=!1,new Date-a>i&&(700===i&&(i=150),a=new Date,t.spinDown(),--i<20&&(i=20))},20),n.once("mouseup",()=>clearInterval(t.spinInterval)),t.focus())},spinUp(){let e=this,t=+e.get()+e.step;Fancy.Number.isFloat(e.step)&&(t=Fancy.Number.correctFloat(t)),isNaN(t)&&(t=e.min||0),void 0!==e.max&&t>e.max?t=e.max:t<e.min&&(t=e.min),e.set(t)},spinDown(){let e=this,t=+e.get()-e.step;Fancy.Number.isFloat(e.step)&&(t=Fancy.Number.correctFloat(t)),isNaN(t)&&(t=e.min||0),void 0!==e.min&&t<e.min?t=e.min:t>e.max&&(t=e.max),e.set(t)}})}(),Fancy.define(["Fancy.form.field.Text","Fancy.TextField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.text",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.Super("init",arguments),e.preRender(),e.render(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:Fancy.FIELD_CLS+" fancy-field-field-text",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-text-value">{value}</div>','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],set(e){this.el.select(".fancy-field-text-value").item(0).update(e)}}),Fancy.define(["Fancy.form.field.Empty","Fancy.EmptyField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.empty",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents(),e.Super("init",arguments),e.preRender(),e.render(),e.style&&e.css(e.style)},ons(){},fieldCls:Fancy.FIELD_CLS+" "+Fancy.FIELD_EMPTY_CLS,width:100,tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']}),function(){const e=Fancy,t=e.FIELD_CLS,n=e.FIELD_TEXTAREA_CLS,i=e.FIELD_LABEL_CLS,a=e.FIELD_TEXTAREA_TEXT_CLS,s=e.FIELD_TEXTAREA_TEXT_INPUT_CLS,o=e.FIELD_ERROR_CLS,l=e.CLEARFIX_CLS;e.define(["Fancy.form.field.TextArea","Fancy.TextArea"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.textarea",constructor:function(){this.Super("const",arguments)},init(){const e=this;e.addEvents("change","key"),e.Super("init",arguments),e.preRender(),e.render(),e.ons()},fieldCls:t+" "+n,value:"",width:250,height:100,labelWidth:60,inputWidth:180,minHeight:100,maxHeight:210,lineHeight:12.5,emptyText:"",tpl:['<div class="'+i+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+a+'">','<textarea autocomplete="off" placeholder="{emptyText}" type="text" class="'+s+'" style="{inputWidth}height:{inputHeight}px;">{value}</textarea>','<div class="'+o+'" style="{errorTextStyle}"></div>',"</div>",'<div class="'+l+'"></div>'],ons(){const e=this,t=e.el,n=e.el.getByTag("textarea");e.input=n,n.on("blur",e.onBlur,e),n.on("focus",e.onFocus,e),n.on("input",e.onInput,e),n.on("keydown",e.onKeyDown,e),e.on("key",e.onKey,e),e.autoHeight&&n.on("input",e.onChange,e),n.on("mousedown",function(t){e.disabled&&t.preventDefault()}),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},preRender(){const t=this;t.tpl&&(t.tpl=new e.Template(t.tpl)),t.initHeight(),t.calcSize()},initHeight(){let e,t=this;if(t.height)e=t.height,t.maxHeight<t.height&&setTimeout(()=>{t.input.css({"overflow-y":"scroll"})},1);else if(t.value){let n=t.value.match(/\n/g);e=(n=n?n.length:1)*t.lineHeight}else e=t.height;e<t.minHeight||e>t.maxHeight&&setTimeout(()=>{t.input.css({"overflow-y":"scroll"})},1),t.height=e,t.inputHeight=e},calcSize(){let t,n,i,a,s,o=this,l=o.padding;if(e.isString(l))switch((l=(l=l.replace(/px/g,"")).split(" ")).length){case 1:l=[n=Number(l[0]),n,n,n];break;case 2:l=[i=Number(l[0]),a=Number(l[1]),i,a];break;case 3:l=[i=Number(l[0]),a=Number(l[1]),s=Number(l[2]),i];break;case 4:l=[Number(l[0]),Number(l[1]),Number(l[2]),Number(l[3])]}else e.isNumber(l)?l=[l,l,l,l]:!1===l&&(l=[0,0,0,0]);"top"===o.labelAlign&&(o.inputHeight-=40),t=o.width,"top"!==o.labelAlign&&o.label&&(t-=o.labelWidth),o.height===o.inputHeight&&!1!==o.padding&&(o.inputHeight-=l[0]+l[2]),o.inputWidth=t-l[1]-l[3],o.height=o.inputHeight+l[0]+l[2]},onChange(){let e=this,t=e.input.dom.value,n=e.el.getByTag("textarea"),i=t.match(/\n/g).length*e.lineHeight;i<e.minHeight?(i=e.minHeight,n.css({"overflow-y":"hidden"})):i>e.maxHeight?(i=e.maxHeight,n.css({"overflow-y":"scroll"})):n.css({"overflow-y":"hidden"}),e.height=i}})}(),function(){const e=Fancy.CLEARFIX_CLS,t=Fancy.FIELD_CLS,n=Fancy.FIELD_LABEL_CLS,i=Fancy.FIELD_TEXT_CLS,a=Fancy.FIELD_CHECKBOX_CLS,s=Fancy.FIELD_CHECKBOX_INPUT_CLS,o=Fancy.FIELD_INPUT_LABEL_CLS,l=Fancy.FIELD_CHECKBOX_ON_CLS;Fancy.define(["Fancy.form.field.CheckBox","Fancy.CheckBox"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.checkbox",middle:!1,disabled:!1,constructor:function(e){Fancy.applyConfig(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("focus","blur","input","up","down","beforechange","change","key"),e.Super("init",arguments),e.preRender(),e.render({labelWidth:e.labelWidth,labelDisplay:e.labelText?"":"none",label:e.label}),e.expander&&e.addCls("fancy-checkbox-expander"),e.acceptedValue=e.value,e.set(e.value,!1),e.checkMiddle(),e.ons()},labelText:"",labelWidth:60,value:!1,editable:!0,stopIfCTRL:!1,checkedCls:l,fieldCls:`${t} ${a}`,tpl:['<div class="'+n+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+i+'">','<div class="'+s+'"></div>',"</div>",'<div class="'+o+'" style="{inputLabelDisplay}">',"{inputLabel}","</div>",'<div class="'+e+'"></div>'],ons(){const e=this,t=e.el;t.on("click",e.onClick,e),t.on("mousedown",e.onMouseDown,e),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onClick(e){const t=this,n=t.el;if(t.disabled)return;if(t.fire("beforechange"),e.ctrlKey&&t.stopIfCTRL)return;if(!1===t.editable)return;if(!0===t.canceledChange)return void(t.canceledChange=!1);n.toggleCls(t.checkedCls);const i=t.value;t.value=n.hasCls(t.checkedCls),t.fire("change",t.value,i),!0===t.middle&&(t.middle=!1,t.checkMiddle())},onMouseDown(e){e.preventDefault()},set(e,t){const n=this,i=n.el;if(""===e&&(e=!1),!0===e||1===e)i.addCls(n.checkedCls),e=!0;else if(!1===e||0===e)i.removeClass(n.checkedCls),e=!1;else{if(void 0!==e)throw new Error(`[FancyGrid Error] - not right value for checkbox ${e}`);e=!1}n.value=e,!1!==t&&n.fire("change",n.value)},setValue(e,t){this.set(e,t)},getValue(){return this.value},get(){return this.getValue()},clear(){this.set(!1)},toggle(){this.set(!this.value)},destroy(){this.Super("destroy",arguments)},checkMiddle(){const e=this;e.middle?e.el.addCls("fancy-checkbox-middle"):e.el.removeCls("fancy-checkbox-middle")},setMiddle(e){this.middle=e,this.checkMiddle()}})}(),Fancy.define(["Fancy.form.field.Switcher","Fancy.Switcher"],{extend:Fancy.CheckBox,type:"field.switcher",constructor:function(e){Fancy.applyConfig(this,e),this.Super("const",arguments)},init(){this.Super("init",arguments)},checkedCls:"fancy-switcher-on",fieldCls:`${Fancy.FIELD_CLS} fancy-field-switcher`,tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">',"</div>",'<div class="fancy-field-input-label" style="{inputLabelDisplay}">',"{inputLabel}","</div>",'<div class="fancy-clearfix"></div>']}),function(){const e=Fancy,t=e.FIELD_CLS,n=e.FIELD_COMBO_RESULT_LIST_CLS,i=e.FIELD_COMBO_CLS,a=e.FIELD_COMBO_SELECTED_ITEM_CLS,s=e.FIELD_COMBO_FOCUSED_ITEM_CLS,o=e.FIELD_LABEL_CLS,l=e.FIELD_TEXT_CLS,r=e.CLEARFIX_CLS,d=e.FIELD_ERROR_CLS,c=e.FIELD_TEXT_INPUT_CLS,h=e.FIELD_DISABLED_CLS,u=e.FIELD_COMBO_DROPDOWN_BUTTON_CLS,p=e.FIELD_COMBO_INPUT_CONTAINER_CLS,g=e.FIELD_COMBO_LEFT_EL_CLS,y=e.FIELD_LABEL_ALIGN_TOP_CLS,m=e.FIELD_LABEL_ALIGN_RIGHT_CLS,f=e.FIELD_CHECKBOX_INPUT_CLS,v=e.FIELD_COMBO_LIST_VALUE_CLS;e.define("Fancy.combo.Manager",{singleton:!0,opened:[],add(e){this.hideLists(),this.opened.push(e)},hideLists(){e.each(this.opened,e=>{e.hideList(),e.hideAheadList()}),this.opened=[]}}),e.define(["Fancy.form.field.Combo","Fancy.Combo"],{type:"field.combo",mixins:[e.form.field.Mixin],extend:e.Widget,selectedItemCls:a,focusedItemCls:s,fieldCls:t+" "+i,width:250,labelWidth:60,listRowHeight:28,dropButtonWidth:27,leftWidth:20,maxListRows:9,emptyText:"",editable:!0,typeAhead:!0,readerRootProperty:"data",valueKey:"value",displayKey:"text",multiSelect:!1,itemCheckBox:!1,listCls:"",tpl:['<div class="'+o+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+l+'">','<div class="'+p+'" style="{inputWidth}{inputHeight}">','<div class="'+g+'" style="{inputHeight}cursor:default;">&nbsp;</div>','<input autocomplete="off" placeholder="{emptyText}" class="'+c+'" style="{inputHeight}cursor:default;" value="{value}">','<div class="'+u+'">&nbsp;</div>',"</div>","</div>",'<div class="'+d+'" style="{errorTextStyle}"></div>','<div class="'+r+'"></div>'],constructor:function(){this.tags=this.tags||[],this.Super("const",arguments)},init(){const e=this;e.addEvents("focus","blur","input","up","down","change","key","enter","esc","empty","load","add-new-value"),e.Super("init",arguments),e.subSearch&&(e.editable=!1),e.loadListData()||(e.data=e.configData(e.data),e.data=Fancy.Array.copy(e.data)),e.multiSelect&&e.data.length&&e.initMultiSelect(),e.preRender(),e.render(),e.ons(),e.applyStyle(),e.applyTheme(),setTimeout(()=>{e.applyTheme()},1)},loadListData(){const t=this;if(!e.isObject(t.data))return!1;let n=t.data.proxy,i=t.readerRootProperty;if(!n||!n.url)throw new Error("[FancyGrid Error]: combo data url is not defined");return n.reader&&n.reader.root&&(i=n.reader.root),e.Ajax({url:n.url,params:n.params||{},method:n.method||"GET",getJSON:!0,success:e=>{if(t.data=t.configData(e[i]),t.renderList(),t.onsList(),t.multiSelect)t.initMultiSelect(),t.value&&t.updateInput();else if(t.value){const e=t.getDisplayValue(t.value);e&&(t.input.dom.value=e)}t.fire("load")}}),!0},configData(t){if(e.isObject(t)||0===t.length)return t;if(!e.isObject(t[0])){for(var n=[],i=0,a=t.length;i<a;i++)n.push({text:t[i],value:i});return n}return t},applyStyle(){const e=this;e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},applyTheme(){const e=this;e.theme&&"default"!==e.theme&&(e.addCls(Fancy.getThemeCSSCls(e.theme)),e.list.addCls(Fancy.getThemeCSSCls(e.theme)),e.aheadList&&e.aheadList.addCls(Fancy.getThemeCSSCls(e.theme)))},ons(){const e=this,t=e.el,n=e.el.select(`.${u}`);e.input=e.el.getByTag("input"),e.inputContainer=e.el.select(`.${p}`),e.drop=n,e.onsList(),e.input.on("blur",e.onBlur,e),e.input.on("mousedown",e.onInputMouseDown,e),e.input.on("click",e.onInputClick,e),n.on("mousedown",e.onDropMouseDown,e),n.on("click",e.onDropClick,e),e.on("key",e.onKey,e),e.typeAhead&&e.editable&&e.input.on("keydown",e.onKeyDown,e),e.on("esc",e.onEsc,e),e.on("enter",e.onEnter,e),e.on("up",e.onUp,e),e.on("down",e.onDown,e),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onSubSearchKeyDown(t){const n=this,i=t.keyCode,a=e.key;switch(i){case a.ESC:n.fire("esc",t);break;case a.ENTER:n.fire("enter",t);break;case a.UP:n.fire("up",t);break;case a.DOWN:n.fire("down",t)}},onKeyDown(t){const n=this,i=t.keyCode,a=e.key;switch(i){case a.ESC:n.fire("esc",t);break;case a.ENTER:n.fire("enter",t);break;case a.UP:n.fire("up",t);break;case a.DOWN:n.fire("down",t);break;case a.TAB:break;case a.BACKSPACE:setTimeout(()=>{if(0===n.input.dom.value.length)n.value=-1,n.valueIndex=-1,n.hideAheadList(),n.multiSelect&&(n.values=[],n.clearListActive()),n.fire("empty");else{if(n.multiSelect&&(n.input.dom.value.split(",").length,n.valuesIndex.length),0===n.generateAheadData().length)return void n.hideAheadList();n.renderAheadList(),n.showAheadList()}},100);break;default:setTimeout(()=>{0!==n.generateAheadData().length?(n.renderAheadList(),n.showAheadList()):n.hideAheadList()},1)}setTimeout(()=>{n.fire("key",n.input.dom.value,t)},1)},onInputClick(){const e=this,t=e.list;e.disabled||!0!==e.editable&&("none"===t.css("display")?e.showList():e.hideList())},onDropClick(){const t=this,n=t.list;t.disabled||("none"===n.css("display")?(e.combo.Manager.add(this),t.showList()):t.hideList(),!0===t.editable&&t.input.focus())},showList(){const t=this,n=t.list,i=t.input.parent().parent(),a=i.$dom.offset(),s=[a.left,a.top+i.$dom.height()],o=e.get(document),l=t.selectedItemCls,r=t.focusedItemCls;if(t.hideAheadList(),!t.list||0===t.data.length)return;if(!t.isListInsideViewBox(i)){const e=this.calcListHeight();s[1]=a.top-e}let d;n.css({display:"",left:s[0]+"px",top:s[1]+3+"px",opacity:0,width:t.getListWidth(),"z-index":2e3+e.zIndex++}),t.listCls&&n.addCls(t.listCls),n.animate({opacity:1,top:s[1]},e.ANIMATE_DURATION),t.clearFocused();const c=n.select(`.${l}`);0===c.length?t.multiSelect&&t.values.length?t.valuesIndex.each(function(e,t,i){void 0===d&&(d=e),n.select("li").item(e).addCls(l)}):d=0:(t.multiSelect&&c.length!==t.valuesIndex.length&&(n.select(`.${l}`).removeCls(l),t.valuesIndex.each((e,t,i)=>{void 0===d&&(d=e),n.select("li").item(e).addCls(l)})),d=c.item(0).index()),-1===d&&(d=0),n.select("li").item(d).addCls(r),t.scrollToListItem(d),t.docSpy||(t.docSpy=!0,o.on("click",t.onDocClick,t)),!1!==t.subSearch&&t.subSearchField&&(t.subSearchField.setInputSize({width:t.getListWidth()-6,height:25}),t.subSearchField.input.focus())},showAheadList(){var t=this,n=t.aheadList,i=t.input.parent().parent(),a=i.$dom.offset(),s=[a.left,a.top+i.$dom.height()],o=e.get(document);t.hideList(),n&&0!==t.data.length&&(n.css({display:"",left:s[0]+"px",top:s[1]+"px",width:t.getListWidth(),"z-index":2e3+e.zIndex++}),t.docSpy2||(t.docSpy2=!0,o.on("click",t.onDocClick,t)))},onDocClick(e){const t=this;if(!1===t.input.parent().parent().within(e.target)){if(!0===t.list.within(e.target))return;t.hideList(),t.hideAheadList()}},hideList(){const t=this;if(t.list&&(t.list.css("display","none"),t.docSpy)){const n=e.get(document);t.docSpy=!1,n.un("click",t.onDocClick,t)}},hideAheadList(){const t=this;if(t.aheadList&&(t.aheadList.css("display","none"),t.docSpy)){const n=e.get(document);t.docSpy=!1,n.un("click",t.onDocClick,t)}},onInputMouseDown(e){this.disabled?e.preventDefault():!1===this.editable&&e.preventDefault()},onDropMouseDown(e){this.disabled&&e.stopPropagation(),e.preventDefault()},onsList(){const e=this;e.list.on("mousedown",e.onListItemMouseDown,e,"li"),e.list.on("click",e.onListItemClick,e,"li"),e.list.on("mouseenter",e.onListItemOver,e,"li"),e.list.on("mouseleave",e.onListItemLeave,e,"li"),e.selectAllText&&e.list.select(".fancy-combo-list-select-all").on("click",e.onSelectAllClick,e)},onsAheadList(){this.aheadList.on("click",this.onAHeadListItemClick,this,"li")},onListItemOver(t){if(this.disabled)return;const n=e.get(t.target);"li"===n.prop("tagName").toLocaleLowerCase()&&n.addCls(this.focusedItemCls)},onListItemLeave(){this.disabled||this.clearFocused()},onListItemMouseDown(){const e=this;e.listItemClicked=!0,setTimeout(()=>{delete e.listItemClicked},1e3)},onListItemClick(t){var n=this,i=e.get(t.currentTarget),a=i.attr("value"),s=n.selectedItemCls,o=n.focusedItemCls;n.disabled||(e.nojQuery&&0===a&&(a=""),n.multiSelect?(0===n.values.length&&n.clearListActive(),n.clearFocused(),"list"===n.getTypeActiveList()&&i.toggleCls(s),i.hasCls(s)?(n.addValue(a),i.addCls(o)):(n.removeValue(a),n.clearFocused(),n.selectAllText&&n.list.select(".fancy-combo-list-select-all").removeCls("fancy-combo-item-selected")),n.updateInput()):(n.set(a),n.hideList()),n.editable?n.input.focus():n.onBlur())},onAHeadListItemClick(t){var n=this,i=e.get(t.currentTarget),a=i.attr("value"),s=n.focusedItemCls;n.disabled||(e.nojQuery&&0===a&&(a=""),n.multiSelect?(0===n.values.length&&n.clearListActive(),n.clearFocused(),n.addValue(a),i.addCls(s),n.updateInput()):(n.set(a),n.hideList()),n.editable?n.input.focus():n.onBlur())},set(t,n){let i,a=this,s="";if(a.multiSelect&&!e.isArray(t)&&(t=-1===t?[]:[t]),e.isArray(t)&&a.multiSelect){const n=[];a.valuesIndex.removeAll(),e.each(t,function(e,i){const o=a.getIndex(e);-1!==o&&(a.valuesIndex.add(o,t[i]),n.push(a.data[o][a.displayKey]),s=n.join(", "))}),a.values=t,i=a.getIndex(t[0]),a.value=t[0],a.valueIndex=i}else-1!==(i=a.getIndex(t))?(a.valueIndex=i,s=a.data[i][a.displayKey],a.selectItem(i)):-1!==t&&t&&t.length>0?(s="",a.value=-1,a.valueIndex=-1):s="",a.value=t;a.input.dom.value=s,!1!==n&&a.onInput(),a.left&&a.updateLeft(),Fancy.isObject(a.data)||a.validate(s)},addValue(e){const t=this,n=t.getIndex(e);-1===n||t.valuesIndex.get(n)||(t.value=e,t.values.push(e),t.valuesIndex.add(n,e))},removeValue(t){let n=this,i=-1;e.each(n.values,(e,n)=>{String(e).toLocaleLowerCase()===String(t).toLocaleLowerCase()&&(i=n)}),-1!==i&&(n.values.splice(i,1),n.valuesIndex.remove(n.getIndex(t))),n.values.length?n.value=n.values[n.values.length-1]:(n.value=-1,n.valueIndex=-1)},updateInput(e){const t=this,n=[];t.valuesIndex.each((e,i,a)=>{n.push(t.data[e][t.displayKey])}),t.input.dom.value=n.join(", "),!1!==e&&t.onInput()},selectItem(e){const t=this;t.list&&(t.multiSelect||t.clearListActive(),t.clearFocused(),t.list.select("li").item(e).addCls(t.focusedItemCls,t.selectedItemCls))},render(){var t=this,n=e.get(t.renderTo||document.body).dom,i=e.newEl("div"),a=t.value,s=-1;i.attr("id",t.id),void 0===a?a="":t.multiSelect&&e.isArray(t.data)&&t.data.length>0?(a="",t.valuesIndex.each((e,n)=>{-1===s&&(s=e,t.valueIndex=e),t.data[e]&&(a+=t.data[e][t.displayKey]+", ")}),a=a.replace(/, $/,"")):-1!==(s=t.getIndex(a))?(t.valueIndex=s,a=t.data[s][t.displayKey]):a="",t.fire("beforerender"),i.addCls(e.cls,t.cls,t.fieldCls);let r="";t.labelWidth&&(r=`width:${t.labelWidth}px;`);let d=t.label;""===t.label?d="&nbsp;":void 0===t.label?d="&nbsp;":"right"!==t.labelAlign&&(d+=":"),i.update(t.tpl.getHTML({labelWidth:r,labelDisplay:!1===t.label?"display: none;":"",label:!1===d?"":d,emptyText:t.emptyText,inputHeight:"height:"+t.inputHeight+"px;",value:a})),t.el=i,t.setStyle(),t.input=t.el.getByTag("input"),t.inputContainer=t.el.select(`.${p}`),t.drop=t.el.select(`.${u}`),t.leftTpl&&(t.left=t.el.select("."+g),t.left.css({display:"block",width:t.leftWidth})),t.setSize(),n.appendChild(i.dom),"top"===t.labelAlign?t.el.addCls(y):"right"===t.labelAlign&&(t.el.addCls(m),e.$(i.dom).find(`.${o}`).insertAfter(e.$(i.dom).find(`.${l}`))),t.valueIndex&&(t.acceptedValue=t.value),t.editable?t.input.css("cursor","auto"):t.input&&t.input.attr("tabIndex",-1),t.disabled&&(t.addCls(h),t.input&&t.input.attr("tabIndex",-1)),t.renderList(),t.leftTpl&&(setTimeout(()=>{t.updateLeft()},1),setTimeout(()=>{t.updateLeft()},500),setTimeout(()=>{t.updateLeft()},1e3)),t.fire("afterrender"),t.fire("render")},renderList(){const t=this,i=e.newEl("div"),a=[];t.selectAllText&&a.push('<div class="fancy-combo-list-select-all"><div class="fancy-field-checkbox-input" style=""></div><span class="fancy-combo-list-select-all-text">'+t.selectAllText+"</span></div>"),!1===t.editable&&!1!==t.subSearch&&"checkbox"!==t.type&&a.push('<div class="fancy-combo-list-sub-search-container"></div>'),t.list&&t.list.destroy(),a.push(['<ul style="position: relative;">']),e.each(t.data,function(n,i){var s="",o=n[t.displayKey],l=n[t.valueKey];if(String(t.value).toLocaleLowerCase()===String(l).toLocaleLowerCase()&&(s=t.selectedItemCls),""===o||" "===o)o="&nbsp;";else if(t.listItemTpl){o=new e.Template(t.listItemTpl).getHTML(n)}t.multiSelect&&t.itemCheckBox?a.push('<li value="'+l+'" class="'+s+'"><div class="'+f+'" style=""></div><span class="'+v+'">'+o+"</span></li>"):a.push('<li value="'+l+'" class="'+s+'"><span class="'+v+'">'+o+"</span></li>")}),a.push("</ul>"),i.addCls(e.cls,n),i.update(a.join("")),i.css({display:"none",left:"0px",top:"0px",width:t.getListWidth()}),t.data.length>t.maxListRows&&i.select("ul").item(0).css({height:t.listRowHeight*t.maxListRows+"px",overflow:"auto"}),document.body.appendChild(i.dom),t.list=i,!1===t.editable&&"checkbox"!==t.type&&!1!==t.subSearch&&(t.subSearchField=new e.StringField({renderTo:t.list.select(".fancy-combo-list-sub-search-container").item(0).dom,label:!1,style:{padding:"2px 2px 0px 2px"},events:[{change:t.onSubSearchChange,scope:t}]}),t.subSearchField.setInputSize({width:t.getListWidth()-6,height:25}),t.subSearchField.input.on("keydown",t.onSubSearchKeyDown,t)),t.applyTheme()},getListWidth(){let e,t=this,n=t.inputWidth+14,i=t.minListWidth;return t.input&&(n=(e=t.input.parent().parent()).width()),i&&i>n&&(n=i),n},generateAheadData(){let t=this,n=t.input.dom.value.toLocaleLowerCase(),i=[];if(t.multiSelect){var a=n.split(", "),s=t.getInputSelection(),o=0;e.each(n,function(e,t){if(s.start<=t)return!0;","===n[t]&&o++}),n=a[o]}return e.each(t.data,function(e){var a=n;a&&(a=a.replace(/\(/g,"").replace(/\)/,"")),new RegExp("^"+a).test(e[t.displayKey].toLocaleLowerCase())&&i.push(e)}),t.data.length===i.length&&(i=[]),t.aheadData=i,i},renderAheadList(){var t,i=this,a=['<ul style="position: relative;">'],s=!1;i.getDisplayValue();i.aheadList?(i.aheadList.firstChild().destroy(),t=i.aheadList,s=!0):t=e.newEl("div"),e.each(i.aheadData,(t,n)=>{var s="",o=t[i.displayKey],l=t[i.valueKey];if(0===n&&(s=i.selectedItemCls),""===o||" "===o)o="&nbsp;";else if(i.listItemTpl){o=new e.Template(i.listItemTpl).getHTML(t)}a.push('<li value="'+l+'" class="'+s+'"><span class="'+v+'">'+o+"</span></li>")}),a.push("</ul>"),t.update(a.join("")),t.css({display:"none",left:"0px",top:"0px",width:i.getListWidth()}),t.css({"max-height":i.listRowHeight*i.maxListRows+"px",overflow:"auto"}),!1===s&&(t.addClass(e.cls,n),document.body.appendChild(t.dom),i.aheadList=t,i.onsAheadList()),i.applyTheme()},hide(){this.css("display","none"),this.hideList(),this.hideAheadList()},clear(){const e=this;e.multiSelect?e.set([],!1):e.set(-1,!1)},clearListActive(){const e=this.selectedItemCls,t=this.focusedItemCls;this.list.select(`.${t}`).removeCls(t),this.list.select(`.${e}`).removeCls(e)},clearFocused(){const e=this,t=e.focusedItemCls;e.list&&e.list.select(`.${t}`).removeCls(t),e.aheadList&&e.aheadList.select(`.${t}`).removeCls(t)},onInput(){const e=this,t=e.getValue(),n=e.acceptedValue;e.acceptedValue=e.get(),e.fire("change",t,n),e.left&&e.updateLeft()},setValue(e,t){this.set(e,t)},getDisplayValue(e,t){const n=this,i=n.getIndex(e);return t?i:n.data[i]?n.data[i][n.displayKey]:""},getValueKey(e,t){let n=this,i=0,a=n.data.length;for(;i<a;i++)if(String(n.data[i][n.displayKey]).toLocaleLowerCase()===String(e).toLocaleLowerCase())return t?i:n.data[i][n.valueKey]},get(){return this.getValue()},getValue(){const e=this;return e.multiSelect?e.values:-1===e.value||void 0===e.value?-1===e.value&&e.input.dom.value?e.input.dom.value:"":(e.valueKey,e.value)},size(e){var t=this,n=e.width,i=e.height,a=t.input,s=t.inputContainer,o=t.drop;"top"!==t.labelAlign&&(t.inputHeight=i),void 0!==i&&(t.height=i),void 0!==n&&(t.width=n),t.calcSize(),"top"===t.labelAlign?t.css({height:1.5*t.height,width:t.width}):t.css({height:t.height,width:t.width});let l=t.inputWidth,r=2;"dark"===t.theme&&(r=0);let d=l-r;t.left&&(d-=t.leftWidth),a.css({width:d,height:t.inputHeight,"margin-left":t.left?t.leftWidth:0}),s.css({width:l,height:t.inputHeight}),o.css("height",t.inputHeight)},onEnter(e,t){let n;var i,a=this,s=a.getActiveList(),o=a.focusedItemCls,l=a.selectedItemCls;if(a.multiSelect){if(!s)return;if((n=s.select(`.${o}`))&&n.dom||(n=s.select(`.${l}`).last()),n&&n.dom){i=n.attr("value"),a.addValue(i);var r=a.getDisplayValue(i,!0);a.selectItem(r),a.updateInput()}}else if(s)(n=s.select(`.${o}`))&&n.dom||(n=s.select(`.${l}`)),i=n.attr("value"),a.set(i);else if(""===a.input.dom.value)a.set(a.input.dom.value);else{let e=a.input.dom.value;a.detectedNewValue(e)}a.hideList(),a.hideAheadList()},onEsc(e,t){this.hideList(),this.hideAheadList()},onUp(e,t){var n=this,i=n.getActiveList(),a=n.focusedItemCls,s=n.selectedItemCls;if(i){i=n.getActiveList().select("ul"),t.preventDefault();let e=i.select(`.${a}`),d=!1;e.dom||(e=i.select(`.${s}`)),e.dom||(d=!0,e=i.lastChild()),e.length>1&&(e=e.item(0));var o=e.index(),l=i.select("li"),r=parseInt(i.css("height"));0===o||d?o=l.length-1:o--;const c=l.item(o),h=c.dom.offsetTop;h-i.dom.scrollTop>r?i.dom.scrollTop=1e4:h-i.dom.scrollTop<0&&(i.dom.scrollTop=h),n.clearFocused(),c.addClass(a)}},onDown(e,t){var n=this,i=n.getActiveList(),a=n.focusedItemCls,s=n.selectedItemCls;if(i){i=n.getActiveList().select("ul"),t.preventDefault();var o=i.select("."+a),l=!1;o.dom||(o=i.select("."+s)),o.dom||(l=!0,o=i.firstChild()),o.length>1&&(o=o.item(0));var r=parseInt(o.css("height")),d=o.index(),c=i.select("li"),h=parseInt(i.css("height"));d===c.length-1||l?d=0:d++;var u=c.item(d),p=u.dom.offsetTop,g=parseInt(u.css("height"));p-i.dom.scrollTop<0?i.dom.scrollTop=0:p+g+3-i.dom.scrollTop>h&&(i.dom.scrollTop=p-h+r+g),n.clearFocused(),u.addClass(a)}else n.showList()},scrollToListItem(e){const t=this.getActiveList().select("ul"),n=t.select("li"),i=n.item(e).dom.offsetTop;0===e?t.dom.scrollTop=0:e===n.length-1?t.dom.scrollTop=1e4:t.dom.scrollTop=i},getActiveList(){let e=this,t=!1;return e.list&&"none"!==e.list.css("display")?t=e.list:e.aheadList&&"none"!==e.aheadList.css("display")&&(t=e.aheadList),t},getTypeActiveList(){return this.list&&"none"!==this.list.css("display")?"list":this.aheadList&&"none"!==this.aheadList.css("display")?"ahead":void 0},initMultiSelect(){const t=this,n=t.value;t.values=[],t.valuesIndex=new e.Collection,void 0!==t.value&&null!==n&&""!==n&&(e.isArray(n)?(t.values=n,t.value=n[0]):t.values=[t.value],e.each(t.values,function(e){t.valuesIndex.add(t.getIndex(e),e)}))},getIndex(e){for(var t=this.data,n=0,i=t.length;n<i;n++)if(String(t[n][this.valueKey]).toLocaleLowerCase()==String(e).toLocaleLowerCase())return n;return-1},getFromInput(){const t=this,n=t.input.dom.value.split(","),i=[];return e.each(n,function(e){const n=e.replace(/ $/,"").replace(/^ /,""),a=t.getValueKey(n);a&&i.push(a)}),i},updateLeft(){const t=this,n=t.data[t.getIndex(t.getValue())];t.left.update(new e.Template(t.leftTpl).getHTML(n))},setData(t){const n=this;n.data=t,n.multiSelect&&(n.values=[],n.valuesIndex=new e.Collection,n.clearListActive()),n.clear(),n.renderList(),n.onsList()},onSelectAllClick(){const e=this.list.select("li"),t=this.list.select(".fancy-combo-list-select-all").item(0),n=t.hasClass("fancy-combo-item-selected");setTimeout(()=>{n?t.removeCls("fancy-combo-item-selected"):t.addCls("fancy-combo-item-selected")},100),e.each((e,t)=>{n?e.hasClass("fancy-combo-item-selected")&&e.dom.click():e.hasClass("fancy-combo-item-selected")||e.dom.click()})},onSubSearchChange(t,n){var i=this,a=i.list.select("li"),s=0,o=i.listRowHeight*i.maxListRows;n=n.toLocaleLowerCase(),e.each(i.data,(e,t)=>{new RegExp("^"+n).test(e[i.displayKey].toLocaleLowerCase())?(a.item(t).css("display","block"),s+=parseInt(a.item(t).css("height"))):a.item(t).css("display","none")});const l=i.list.select("ul").item(0);s>o?l.css("height",o):l.css("height",s)},isListInsideViewBox(t){const n=t.$dom.offset(),i=this.calcListHeight()+t.$dom.height();return!(n.top+i>e.getViewSize()[0]+Fancy.getScroll()[0])},calcListHeight(){let e=this,t=e.data.length*e.listRowHeight;return e.data.length>e.maxListRows&&(t=e.maxListRows*e.listRowHeight),t},detectedNewValue(t){const n=this;n.data.push({text:t,value:t}),n.multiSelect&&(n.values=[],n.valuesIndex=new e.Collection,n.clearListActive()),n.renderList(),n.onsList(),n.set(t),this.fire("add-new-value",t)}})}(),function(){const e=Fancy,t=e.CLEARFIX_CLS,n=e.FIELD_CLS,i=e.FIELD_LABEL_CLS,a=e.FIELD_TEXT_CLS,s=e.FIELD_BUTTON_CLS;e.define(["Fancy.form.field.Button","Fancy.ButtonField"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.button",pressed:!1,constructor:function(t){e.apply(this,t),this.Super("const",arguments)},init(){const e=this;e.addEvents("click"),e.Super("init",arguments),e.preRender(),e.render(),e.renderButton(),e.ons(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:`${n} ${s}`,value:"",width:100,emptyText:"",tpl:['<div class="'+i+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+a+'">',"</div>",'<div class="'+t+'"></div>'],renderButton(){const t=this;t.button=new e.Button({renderTo:t.el.select(`.${a}`).item(0).dom,text:t.buttonText,disabled:t.disabled,pressed:t.pressed,enableToggle:t.enableToggle,imageCls:t.imageCls,handler:function(){t.disabled||(t.scope?t.handler.apply(t.scope,[t]):t.handler(t))}})},ons(){const e=this,t=e.el;e.button.on("pressedchange",function(t,n){e.fire("pressedchange",n)}),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onClick(){const e=this;e.disabled||(e.fire("click"),e.handler&&e.handler())},setPressed(e){this.button.setPressed(e)}})}(),Fancy.define(["Fancy.form.field.SegButton","Fancy.SegButtonField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.button",allowToggle:!0,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("click","change"),e.Super("init",arguments),e.preRender(),e.render(),e.renderButton(),e.ons(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:"fancy fancy-field fancy-field-button",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">',"</div>",'<div class="fancy-clearfix"></div>'],renderButton(){const e=this;e.button=new Fancy.SegButton({renderTo:e.el.select(".fancy-field-text").item(0).dom,items:e.items,disabled:e.disabled,multiToggle:e.multiToggle,allowToggle:e.allowToggle})},ons(){const e=this,t=e.el;e.button.on("toggle",function(){e.disabled||e.fire("toggle")}),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onClick(){const e=this;e.disabled||(e.fire("click"),e.handler&&e.handler())},get(){const e=[];return Fancy.each(this.items,(t,n)=>{t.pressed&&(t.value?e.push(t.value):e.push(n))}),e.toString()},clear(e){this.allowToggle&&Fancy.each(this.items,t=>{t.setPressed(!1,e)})},setValue(e){const t=this.items;switch(this.clear(!1),Fancy.typeOf(e)){case"array":Fancy.each(e,e=>{switch(Fancy.typeOf(e)){case"string":Fancy.each(t,t=>{t.value===e&&t.setPressed(!0,!0)});break;case"number":t[e].setPressed(!0,!0)}});break;case"string":Fancy.each(t,t=>{t.value===e&&t.setPressed(!0,!0)});break;case"number":const n=t[e];n&&n.setPressed(!0,!0)}}}),Fancy.define("Fancy.form.field.Tab",{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.tab",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("collapsed","expanded"),e.Super("init",arguments);let t=0,n=e.items.length;for(;t<n;t++){const n=e.items[t];"top"===n.labelAlign&&0===t&&(n.style={"padding-left":"0px"})}e.preRender(),e.render()},fieldCls:"fancy fancy-field-tab",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-tab-items">',"</div>"]}),function(){const e=Fancy,t=e.CLEARFIX_CLS,n=e.FIELD_CLS,i=e.FIELD_RADIO_CLS,a=e.FIELD_RADIO_COLUMN_CLS,s=e.FIELD_TEXT_CLS,o=e.FIELD_RADIO_ON_CLS,l=e.FIELD_RADIO_INPUT_CLS,r=e.FIELD_LABEL_CLS,d=e.FIELD_ERROR_CLS;e.define(["Fancy.form.field.Radio","Fancy.Radio"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.radio",radioRows:1,constructor:function(){this.Super("const",arguments)},init:function(){const t=this;t.addEvents("focus","blur","input","up","down","change","key"),t.Super("init",arguments);let n="";t.column&&(t.cls+=" "+a,n+='<div style="margin-left: '+t.labelWidth+'px;">'),e.each(t.items,(e,i)=>{let a="",r=s;t.column||0===i||(a="margin-left:10px;"),e.value===t.value&&(r+=" "+o),n+=['<div class="'+r+'" value='+e.value+">",'<div class="'+l+'" style="float:left;'+a+'"></div>','<div style="float:left;margin:7px 0 0 0;">'+e.text+"</div>","</div>"].join("")}),t.column&&(n+="</div>"),t.itemsHTML=n,t.preRender(),t.render(),t.setColumnsStyle(),t.acceptedValue=t.value,t.set(t.value),t.ons()},labelText:"",labelWidth:60,value:!1,checkedCls:o,fieldCls:n+" "+i,tpl:['<div class="'+r+'" style="{labelWidth}{labelDisplay}">',"{label}",'<div class="'+d+'" style="{errorTextStyle}"></div>',"</div>","{itemsHTML}",'<div class="'+t+'"></div>'],ons(){const t=this,n=this.el;n.$dom.delegate(`.${s}`,"click",function(){t.disabled||t.set(e.get(this).attr("value"))}),n.on("mousedown",t.onMouseDown,t),n.on("mouseenter",t.onMouseOver,t),n.on("mouseleave",t.onMouseOut,t),t.tip&&n.on("mousemove",t.onMouseMove,t)},onClick(){const e=this,t=e.checkedCls;e.disabled||(e.addCls(t),e.toggleCls(t),e.value=e.hasCls(t),e.fire("change",e.value))},onMouseDown(e){this.disabled&&e.stopPropagation(),e.preventDefault()},set(e,t){const n=this,i=n.el,a=n.checkedCls;i.select(`.${s}`).removeCls(a),i.select("[value="+e+"]").addCls(a),n.value=e,!1!==t&&n.fire("change",n.value)},setValue(e,t){this.set(e,t)},getValue(){return this.value},get(){return this.getValue()},clear(){this.set(!1)},calcColumns(){var t=this,n=0,i=t.width;"top"!==t.labelAlign&&t.label&&(i-=t.labelWidth,i-=20),e.Array.each(t.items,function(e){e.text.length>n&&(n=e.text.length)});let a=Math.floor(i/(7*n+30));t.columns&&t.columns<=a?a=t.columns:t.columns=a,t.columnWidth=Math.ceil(i/a),t.rows=Math.ceil(t.items.length/a)},setColumnsStyle(){const e=this;if(!e.columns||1===e.rows)return;const t=e.el.select(`.${s}`),n=e.el.select(`.${s} .${l}`);t.each((t,i)=>{i%e.columns==0&&n.item(i).css("margin-left","0px"),t.css("width",e.columnWidth)})}})}(),Fancy.vtypes={},Fancy.addValid=((e,t)=>{Fancy.vtypes[e]=t}),Fancy.isValid=((e,t)=>{let n;if(Fancy.isString(e)?n=Fancy.vtypes[e]:Fancy.isObject(e)&&(e.type?(n=Fancy.vtypes[e.type],Fancy.applyIf(e,n)):n=e),n.before){let i=n.before,a=[e];Fancy.isString(i)?a.push(i):Fancy.isArray(i)&&(a=a.concat(i)),a.reverse();let s=0,o=a.length;for(;s<o;s++)if((n=Fancy.isObject(a[s])?a[s]:Fancy.vtypes[a[s]]).re){if(!1===n.re.test(t))return n}else if(n.fn&&!1===n.fn.apply(n,[t]))return n}else if(n.re){if(!1===n.re.test(t))return n}else if(!1===n.fn.apply(n,[t]))return n;return!0}),Fancy.addValid("notempty",{text:"Must be present",fn:e=>null!==e&&void 0!==e&&0!==String(e).length}),Fancy.addValid("notnan",{text:"Must be numeric",fn:e=>!isNaN(e)}),Fancy.addValid("min",{before:["notempty","notnan"],text:"Must be must be at least {param}",fn(e){return e>=this.param}}),Fancy.addValid("max",{before:["notempty","notnan"],text:"Must be no more than {param}",fn(e){return e<=this.param}}),Fancy.addValid("range",{before:["notempty","notnan"],text:"Must be between {min} and {max}",fn(e){return e>=this.min&&e<=this.max}}),Fancy.addValid("email",{before:"notempty",re:/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+\/=?\^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,text:"Is not a valid email address"}),Fancy.Mixin("Fancy.grid.mixin.Edit",{remove(e,t,n){let i=this,a=i.store,s="remove";if(i.store){if(t&&(s="removeAt"),Fancy.isArray(e))for(var o=0,l=e.length;o<l;o++)a[s](e[o],n);else a[s](e);!1!==n&&i.setSidesHeight(),clearInterval(i.removeInt),i.removeInt=setTimeout(()=>{i.update(),delete i.removeInt},1)}else setTimeout(()=>{i.remove(e,t)},100)},removeAt(e){this.remove(e,!0)},removeRow(e){this.remove(e,!0)},removeRowById(e){this.remove(e)},removeRowByID(e){this.remove(e)},removeAll(){const e=this;e.store.removeAll(),e.update(),e.scroller.update(),e.paging&&e.paging.updateBar(),e.isGroupable()&&e.grouping.reGroup()},add(e){const t=this;if(t.store)if(Fancy.isArray(e))for(var n=0,i=e.length;n<i;n++)t.add(e[n]);else t.store.add(e),t.setSidesHeight(),clearInterval(t.addInt),t.addInt=setTimeout(()=>{t.update(),delete t.addInt},1);else setTimeout(()=>{t.add(e)},100)},insert(e,t,n){var i,a=this,s=a.store;if(a.store)if(Fancy.isArray(t)){if(t.length){var o=t[0],l=Fancy.Object.keys(o);s.addField(l)}for(i=t.length-1;-1!==i;i--)a.insert(t[i],e,n);!1!==n&&a.setSidesHeight()}else if(Fancy.isArray(e)){if(e.length){o=e[0],l=Fancy.Object.keys(o);s.addField(l)}for(i=e.length-1;-1!==i;i--)a.insert(e[i],0,n);!1!==n&&a.setSidesHeight()}else{if(Fancy.isObject(e)&&void 0===t)s.addField(Fancy.Object.keys(e)),t=e,e=0;else if(Fancy.isObject(e)&&Fancy.isNumber(t)){s.addField(Fancy.Object.keys(e));const n=t;t=e,e=n}a.paging&&"server"!==s.pageType&&(e+=s.showPage*s.pageSize),s.insert(e,t,n),!1!==n&&a.setSidesHeight(),clearInterval(a.addInt),a.addInt=setTimeout(()=>{a.update(),delete a.addInt},1)}else setTimeout(()=>{a.insert(e,t,n)},100)},set(e,t,n){const i=this,a=i.store;i.store?Fancy.isObject(t)&&void 0===n?a.setItemData(e,t,n):a.set(e,t,n):setTimeout(()=>{i.set(e,t,n)},100)},setById(e,t,n){var i=this,a=i.store,s=a.getRow(e);if(void 0===s){if(void 0===a.getById(e))return!1;s=-1}if(!i.store)return setTimeout(()=>{-1===s?i.setById(s,t,n):i.set(s,t,n)},100),s;if(Fancy.isObject(t)&&void 0===n)for(const o in t){const l=i.getColumnByIndex(o);if(l&&"date"===l.type){const n=l.format,i=Fancy.Date.parse(t[o],n.read,n.mode),s=Fancy.Date.parse(a.getById(e).get(o),n.edit,n.mode);+i==+s&&delete t[o]}a.setItemData(s,t,n,e),-1===s&&a.getById(e).set(t)}else-1===s?a.getById(e).set(t,n):a.set(s,t,n,e);return s},undo(){const e=this,t=e.store,n=t.undoActions.splice(t.undoActions.length-1,1)[0];if(n)switch(n.type){case"edit":e.setById(n.id,n.key,n.oldValue);const i=n.value;n.value=n.oldValue,n.oldValue=i,t.redoActions.push(n),e.fire("undo");break;case"insert":t.undoStoppped=!0,e.remove(n.id),t.undoStoppped=!1,t.redoActions.push(n);break;case"remove":t.undoStoppped=!0,e.insert(n.rowIndex,n.data),t.undoStoppped=!1,t.redoActions.push(n)}},redo(){const e=this,t=e.store,n=t.redoActions.splice(t.redoActions.length-1,1)[0];switch(t.redoing=!0,n.type){case"edit":e.setById(n.id,n.key,n.oldValue);break;case"insert":e.insert(n.rowIndex,n.data);break;case"remove":e.remove(n.id)}delete t.redoing},undoAll(){let e=this,t=0,n=e.store.undoActions.length;for(;t<n;t++)e.undo()},editCell(e){const t=this,n={side:t.getSideByCell(e),rowIndex:Number(e.attr("index")),columnIndex:Number(e.parent().attr("index"))},i=t.getColumns(n.side);if(n.column=i[n.columnIndex],!0!==n.column.editable)return;switch(n.column.type){case"string":case"number":case"combo":case"currency":case"date":case"image":case"text":case"tree":break;default:return}n.cell=e.dom;const a=t.get(n.rowIndex);n.item=a,n.data=a.data,n.column.smartIndexFn?n.value=n.column.smartIndexFn(n.data):n.value=t.store.get(n.rowIndex,n.column.index),t.celledit.edit(n)},getCell(e){var t,n,i=this;if(void 0!==e.id&&void 0!==e.index){const a=i.getColumnOrderByKey(e.index),s=a.order,o=i.getRowById(e.id);if(t=a.side,!(n=i.getBody(t).getCell(o,s)).dom)return;return n}if(void 0!==e.rowIndex&&void 0!==e.columnIndex){if(t=e.side||"center",(n=i.getBody(t).getCell(e.rowIndex,e.columnIndex)).dom||(n=i.getBody("center").getCell(e.rowIndex,e.columnIndex)),n.dom||(n=i.getBody("left").getCell(e.rowIndex,e.columnIndex)),n.dom||(n=i.getBody("right").getCell(e.rowIndex,e.columnIndex)),!n.dom)return;return n}}}),Fancy.define(["Fancy.Grid","FancyGrid"],{extend:Fancy.Widget,mixins:["Fancy.grid.mixin.Grid",Fancy.panel.mixin.PrepareConfig,Fancy.panel.mixin.methods,"Fancy.grid.mixin.PrepareConfig","Fancy.grid.mixin.ActionColumn",Fancy.grid.mixin.Edit],plugins:[{type:"grid.updater"},{type:"grid.scroller"},{type:"grid.licence"},{type:"grid.refreshcolumns"}],type:"grid",theme:"default",i18n:"en",emptyText:"",prefix:"fancy-grid-",cls:"",widgetCls:Fancy.GRID_CLS,header:!0,shadow:!0,striped:!0,columnLines:!0,rowLines:!0,textSelection:!1,width:200,height:200,minWidth:200,minHeight:200,minColumnWidth:30,defaultColumnWidth:100,emptyValue:"&nbsp;",frame:!0,draggable:!1,activated:!1,multiSort:!1,tabEdit:!0,dirtyEnabled:!0,barScrollEnabled:!0,startResizing:!1,startEditByTyping:!1,filterCaseSensitive:!0,nativeResizeObserver:!1,dropOutSideActions:!0,constructor:function(e,t){const n=this;Fancy.isDom(e)?(t=t||{}).renderTo=e:t=e,t=t||{};const i=function(e){if(e){const n=t.lang;Fancy.apply(t,e),n&&Fancy.apply(t.lang,n)}t.id&&(n.id=t.id),n.initId(),n.initColumnsIdSeedByIndex(),t=n.prepareConfig(t,n),Fancy.applyConfig(n,t),n.Super("const",arguments)},a=function(){const e=t.i18n||n.i18n;!0===Fancy.loadLang(e,i)&&i({})};Fancy.modules.grid||Fancy.fullBuilt||!1===Fancy.MODULELOAD||!1===Fancy.MODULESLOAD?a():Fancy.nojQuery?Fancy.loadModule("dom",function(){Fancy.loadModule("grid",function(){a()})}):Fancy.loadModule("grid",function(){a()})},init(){const e=this;e.addEvents("beforerender","afterrender","render","show","hide","destroy"),e.addEvents("headercellclick","headercellmousemove","headercellmousedown","headercellenter","headercellleave","docmouseup","docclick","docmove","beforeinit","init","columnresize","columnclick","columndblclick","columnenter","columnleave","columnmousedown","columntitlechange","cellclick","celldblclick","cellenter","cellleave","cellmousedown","beforecellmousedown","rowclick","rowdblclick","rowenter","rowleave","rowtrackenter","rowtrackleave","beforecolumndrag","columndrag","columnhide","columnshow","columnremove","columnadd","scroll","nativescroll","remove","insert","set","change","edit","update","beforesort","sort","beforeload","load","servererror","serversuccess","select","selectrow","deselectrow","clearselect","activate","deactivate","beforeedit","startedit","beforeendedit","endedit","beforesaving","changepage","changepagesize","dropitems","dragstart","dragrows","collapse","expand","treecollapse","treeexpand","lockcolumn","rightlockcolumn","unlockcolumn","filter","contextmenu","statechange","changewidth","changeheight"),Fancy.loadStyle(),!0===Fancy.fullBuilt||!1===Fancy.MODULELOAD||!1===Fancy.MODULESLOAD||!0===e.fullBuilt||!0===e.neededModules||"datepicker"===e.wtype||"monthpicker"===e.wtype?Fancy.stylesLoaded?(e.initStore(),e.initPlugins(),e.ons(),e.initDateColumn(),e.fire("beforerender"),e.preRender(),e.render(),e.initElements(),e.initActionColumnHandler(),e.fire("render"),e.fire("afterrender"),e.setSides(),e.setSidesHeight(),e.setColumnsPosition(),e.lightStartUpdate(),e.initTextSelection(),e.initTouch(),e.initDebug(),e.fire("beforeinit"),setTimeout(()=>{e.inited=!0,e.fire("init"),e.setBodysHeight(),e.state||e._setColumnsAutoWidth()},100)):e.intWaitForStyle=setInterval(function(){Fancy.stylesLoaded&&(clearInterval(e.intWaitForStyle),e.init())},100):e.loadModules()},loadModules(){var e=this,t={},n=e.columns||[],i=e.leftColumns||[],a=e.rightColumns||[];Fancy.modules=Fancy.modules||{},Fancy.nojQuery&&(t.dom=!0),Fancy.isTouch&&(t.touch=!0),e.summary&&(t.summary=!0,e.summary.options&&(t.menu=!0)),e.exporter&&(t.exporter=!0,t.excel=!0),e.paging&&(t.paging=!0),(e.filter||e.searching)&&(t.filter=!0),e.data&&e.data.proxy&&(t.edit=!0),e.clicksToEdit&&(t.edit=!0),e.defaults&&e.defaults.editable&&(t.edit=!0),(e.stateful||e.state)&&(t.state=!0),Fancy.isObject(e.data)&&(e.data.proxy&&(t["server-data"]=!0,Fancy.nojQuery&&(t.ajax=!0)),e.data.chart&&(t["chart-integration"]=!0)),e.expander&&(t.expander=!0),e.isGroupedHeader&&(t["grouped-header"]=!0),e.grouping&&(t.grouping=!0),e.summary&&(t.summary=!0),e.exporter&&(t.exporter=!0,t.excel=!0),(e.trackOver||e.columnTrackOver||e.cellTrackOver||e.selection)&&(t.selection=!0),e.contextmenu&&(t.menu=!0),e.infinite&&(t.infinite=!0);const s=e=>{if(e.menu)return t.menu=!0,!0};Fancy.each(e.events,e=>{for(const n in e)"contextmenu"===n&&(t.menu=!0)}),Fancy.each(e.controls,e=>{"contextmenu"===e.event&&(t.menu=!0)}),Fancy.each(e.tbar,s),Fancy.each(e.bbar,s),Fancy.each(e.buttons,s),Fancy.each(e.subTBar,s);const o=n.concat(i).concat(a);for(var l in Fancy.each(o,n=>{switch(!0===n.draggable&&(t["column-drag"]=!0),!0===n.sortable&&(t.sort=!0),!0===n.editable&&(t.edit=!0),n.menu&&(t.menu=!0),n.filter&&(t.filter=!0),n.type){case"select":e.checkboxRowSelection=!0,t.selection=!0;break;case"combo":n.data&&n.data.proxy&&(t.ajax=!0);break;case"progressbar":case"progressdonut":case"grossloss":case"hbar":t.spark=!0;break;case"tree":t.tree=!0;break;case"date":t.date=!0,t.selection=!0}}),Fancy.isArray(e.tbar)&&Fancy.each(e.tbar,e=>{switch(e.action){case"add":case"remove":t.edit=!0}}),e.gridToGrid&&(t.dd=!0),e.rowDragDrop&&(t.dd=!0),e.neededModules={length:0},t)void 0===Fancy.modules[l]&&(e.neededModules[l]=!0,e.neededModules.length++);if(0===e.neededModules.length)return e.neededModules=!0,void e.init();const r=function(t){delete e.neededModules[t],e.neededModules.length--,0===e.neededModules.length&&(e.neededModules=!0,e.init())};if(e.neededModules.dom)Fancy.loadModule("dom",function(t){if(delete e.neededModules[t],e.neededModules.length--,0===e.neededModules.length)e.neededModules=!0,e.init();else for(var n in e.neededModules)"length"!==n&&Fancy.loadModule(n,r)});else for(var l in e.neededModules)"length"!==l&&Fancy.loadModule(l,r)},lockColumn(e,t){const n=this;if(1===n.columns.length)return!1;Fancy.isString(e)&&Fancy.each(n.columns,(t,n)=>{if(t.index===e)return e=n,!0});const i=n.removeColumn(e,t);n.insertColumn(i,n.leftColumns.length,"left"),n.header&&(n.leftHeader.reSetCheckBoxes(),n.groupheader&&(n.header.fixGroupHeaderSizing(),n.leftHeader.fixGroupHeaderSizing())),n.body.reSetIndexes(),n.leftBody.reSetIndexes(),n.fire("lockcolumn",{column:i}),n.update()},rightLockColumn(e,t){const n=this;if(1===n.columns.length)return!1;Fancy.isString(e)&&Fancy.each(n.columns,function(t,n){if(t.index===e)return e=n,!0});const i=n.removeColumn(e,t);n.insertColumn(i,0,"right"),n.header&&(n.rightHeader.reSetCheckBoxes(),n.groupheader&&(n.header.fixGroupHeaderSizing(),n.rightHeader.fixGroupHeaderSizing())),n.body.reSetIndexes(),n.rightBody.reSetIndexes(),n.fire("rightlockcolumn",{column:i}),n.update()},unLockColumn(e,t){const n=this;let i;switch(void 0===t&&(Fancy.isString(e)?(Fancy.each(n.leftColumns,function(n,i){if(n.index===e)return t="left",e=i,!0}),void 0===t&&Fancy.each(n.rightColumns,function(n,i){if(n.index===e)return t="right",e=i,!0})):t="left"),t){case"left":Fancy.isString(e)&&Fancy.each(n.leftColumns,function(t,n){if(t.index===e)return e=n,!0}),i=n.removeColumn(e,t),n.insertColumn(i,0,"center","left"),0===n.leftColumns.length&&(n.leftEl.addCls(Fancy.GRID_LEFT_EMPTY_CLS),n.centerEl.css("left","0px"));break;case"right":if(Fancy.isString(e)&&Fancy.each(n.rightColumns,function(t,n){if(t.index===e)return e=n,!0}),i=n.removeColumn(e,t),n.insertColumn(i,n.columns.length,"center","right"),0===n.rightColumns.length){n.rightEl.addCls(Fancy.GRID_RIGHT_EMPTY_CLS);const e=parseInt(n.body.el.css("width"));n.body.el.css("width",e+2)}}"left"===t&&n.isGroupable()&&0===n.leftColumns.length&&n.grouping.insertGroupEls(),n.header&&n.groupheader&&(n.header.fixGroupHeaderSizing(),n.rightHeader&&n.rightHeader.fixGroupHeaderSizing(),n.leftHeader&&n.leftHeader.fixGroupHeaderSizing()),n.body.reSetIndexes(),n.leftBody.reSetIndexes(),n.rightBody.reSetIndexes(),n.fire("unlockcolumn",{column:i})},moveColumn(e,t,n,i,a){const s=this;let o;if(a){for(var l=0,r=a.end-a.start+1,d=a.cell.attr("index"),c=s.getHeader(t),h=a.cell.dom.outerHTML;l<r;l++)s.moveColumn(e,t,a.end-l,i);const n=s.getColumns(t),o=c.el.select("."+Fancy.GRID_HEADER_CELL_CLS);for(r=(l=i)+(a.end-a.start+1);l<r;l++){const e=n[l],t=o.item(l);e.grouping=d,t.attr("group-index",d)}return c.el.append(h),void c.fixGroupHeaderSizing()}if("center"===e)switch(o=s.removeColumn(n,"center"),t){case"left":s.insertColumn(o,i,"left","center");break;case"right":s.insertColumn(o,i,"right","center")}else if("left"===e)switch(o=s.removeColumn(n,"left"),t){case"center":s.insertColumn(o,i,"center","left");break;case"right":s.insertColumn(o,i,"right","left")}else if("right"===e)switch(o=s.removeColumn(n,"right"),t){case"center":s.insertColumn(o,i,"center","right");break;case"left":s.insertColumn(o,i,"left","right")}s.groupheader&&(s.header.fixGroupHeaderSizing(),s.leftColumns&&s.leftHeader.fixGroupHeaderSizing(),s.rightColumns&&s.rightHeader.fixGroupHeaderSizing()),s.getHeader(e).reSetCheckBoxes(),s.getHeader(t).reSetCheckBoxes(),s.update()},updateColumnsVisibility(){const e=this;e.columns&&(e.header&&e.header.updateCellsVisibility(),e.body.updateColumnsVisibility()),e.leftColumns&&(e.leftHeader&&e.leftHeader.updateCellsVisibility(),e.leftBody.updateColumnsVisibility()),e.rightColumns&&(e.rightHeader&&e.rightHeader.updateCellsVisibility(),e.rightBody.updateColumnsVisibility())},initColumnsIdSeedByIndex(){this.columnsIdsSeed={}},getColumnId(e){const t=this;return void 0===t.columnsIdsSeed[e]?t.columnsIdsSeed[e]=0:t.columnsIdsSeed[e]++,t.columnsIdsSeed[e]?e+"-"+t.columnsIdsSeed[e]:e},isGroupable(){return this.grouping&&this.grouping.by},_setColumnsAutoWidth(){const e=this;if(!e.autoColumnWidth)return;if(e.state&&!Fancy.Object.isEmpty(e.state.getState())&&!e.allowAutoWidthStateIsEmpty)return;if(e._firstTimeAutoColumnWidth)return;const t=e.getColumns();Fancy.each(t,function(t){t.autoWidth&&!t.hidden&&(t.index||t.smartIndexFn||t.render)&&e.autoSizeColumn(t.id,!0,t)}),setTimeout(()=>{e._firstTimeAutoColumnWidth=!0,delete e.allowAutoWidthStateIsEmpty},1e3)}}),FancyGrid.get=(e=>{const t=Fancy.get(e);if(!t.dom)return;const n=t.select(`.${Fancy.GRID_CLS}`).item(0);if(!n.dom)return;const i=n.dom.id;return Fancy.getWidget(i)}),FancyGrid.defineTheme=Fancy.defineTheme,FancyGrid.defineController=Fancy.defineController,FancyGrid.addValid=Fancy.addValid,!Fancy.nojQuery&&Fancy.$&&(Fancy.$.fn.FancyGrid=function(e){return this.selector?e.renderTo=Fancy.$(this.selector)[0].id:e.renderTo=this.attr("id"),new Fancy.Grid(e)}),function(){const e=Fancy;e.define("Fancy.grid.plugin.RowHeight",{extend:e.Plugin,ptype:"grid.rowheight",inWidgetName:"rowheight",cellTip:"{value}",stopped:!0,waitingForParentVisibility:!1,constructor:function(){this.Super("const",arguments),this.rows={},this.rowIndexes=[],this.rowIndexesSum=[]},init(){this.Super("init",arguments),this.ons()},ons(){const e=this,t=e.widget;t.on("init",e.onInit,e),t.on("update",e.onUpdate,e),t.on("columnresize",e.onColumnResize,e),t.on("changepage",e.onChangePage,e),t.on("sort",e.onSort,e)},onInit(){const e=this,t=e.widget;setTimeout(()=>{t.scroller.update(e.totalHeight)},50)},onUpdate(){var t=this,n=t.widget,i=n.getDataView(),a=0;e.each(i,i=>{const s=i.id,o=t.rows[s],l=n.getRowById(s),r=n.getDomRow(l);e.each(r,t=>{e.get(t).css("height",o)}),a+=o}),t.totalHeight=a,n.isGroupable()&&(t.totalHeight+=n.grouping.getGroupRowsHeight()),setTimeout(()=>{n.setSidesHeight(t.totalHeight),n.scroller.update(t.totalHeight)},50)},add(t,n,i){const a=this;a.rows[t]&&a.rows[t]>n||(a.rows[t]=n,a.rowIndexes[i]=n,clearInterval(a.intIndexesSum),a.intIndexesSum=setTimeout(()=>{a.rowIndexesSum=[],e.each(a.rowIndexes,(e,t)=>{a.rowIndexesSum[t]=0===t?e:a.rowIndexesSum[t-1]+e})},1))},getRowsHeight(t){var n=this,i=0;return e.each(t,e=>{const t=e.get("id");i+=n.rows[t]}),i},onColumnResize(e,t){const n=this;n.rows={},"text"===t.column.type&&t.column.autoHeight&&setTimeout(()=>{n.widget.update(),n.onUpdate()},400)},onChangePage(){this.rows={}},onSort(){this.rows={}},waitToShow(){const e=this;if(e.waitingForParentVisibility)return;e.waitingForParentVisibility=!0;const t=e.widget,n=e.getHiddenParent(t.el);n&&(e.intWaitToShow=setInterval(()=>{"none"!==n.css("display")&&(clearInterval(e.intWaitToShow),e.widget.update(),e.onUpdate())},350))},getHiddenParent:function(e,t=0){if(!(++t>10)){if("none"===e.css("display"))return e;if("body"!==e.dom.tagName.toLocaleLowerCase())return e=e.parent(),this.getHiddenParent(e,t)}}})}(),function(){const e=Fancy,t=e.TOOLTIP_CLS,n=e.TOOLTIP_INNER_CLS;e.define("Fancy.grid.plugin.CellTip",{extend:e.Plugin,ptype:"grid.celltip",inWidgetName:"celltip",cellTip:"{value}",stopped:!0,constructor:function(){this.Super("const",arguments)},init(){this.Super("init",arguments),this.ons()},ons(){const t=this,n=t.widget,i=e.get(document);n.on("cellenter",t.onCellEnter,t),n.on("cellleave",t.onCellLeave,t),i.on("touchend",t.onTouchEnd,t),i.on("mousemove",t.onDocMove,t)},onCellEnter(t,n){let i=this,a=n.column,s=i.cellTip,o=n.e;if(n&&a.cellTip){if(e.isString(a.cellTip))s=a.cellTip;else if(e.isFunction(a.cellTip)&&!1===(s=a.cellTip(n)))return;const t=new e.Template(s),l={title:a.title,value:n.value,columnIndex:0,rowIndex:0};i.stopped=!1,e.apply(l,n.data),e.tip.update(t.getHTML(l)),e.tip.show(o.pageX+15,o.pageY-25)}},onCellLeave(){this.stopped=!0,e.tip.hide(500)},onTouchEnd(){this.stopped=!0,e.tip.hide(500)},onDocMove(i){if(!0===this.stopped)return;const a=this,s=a.widget;if("none"===s.el.css("display")||s.panel&&s.panel.el&&"none"===s.panel.el.css("display"))return a.stopped=!0,void e.tip.hide(500);const o=e.get(i.target);return"body"===o.prop("tagName").toLocaleLowerCase()?(a.stopped=!0,void e.tip.hide(500)):o.hasClass(t)||o.hasClass(n)||!1!==s.el.within(o)?void e.tip.show(i.pageX+15,i.pageY-25):(a.stopped=!0,void e.tip.hide(500))}})}(),function(){const e=Fancy,t=e.TOOLTIP_CLS,n=e.TOOLTIP_INNER_CLS;e.define("Fancy.grid.plugin.HeaderCellTip",{extend:e.Plugin,ptype:"grid.headercelltip",inWidgetName:"headercelltip",cellTip:"{title}",stopped:!0,constructor:function(){this.Super("const",arguments)},init(){this.Super("init",arguments),this.ons()},ons(){const t=this,n=t.widget,i=e.get(document);n.on("headercellenter",t.onCellEnter,t),n.on("headercellleave",t.onCellLeave,t),i.on("touchend",t.onTouchEnd,t),i.on("mousemove",t.onDocMove,t)},onCellEnter(t,n){var i=n.column,a=this.cellTip,s=n.e;if(i.headerCellTip){const t={title:i.title,columnIndex:n.columnIndex,side:n.side};if(e.isString(i.headerCellTip))a=i.headerCellTip;else if(e.isFunction(i.headerCellTip)&&(n.data=t,!1===(a=i.headerCellTip(n))))return;const o=new e.Template(a);this.stopped=!1,e.apply(t,n.data),e.tip.update(o.getHTML(t)),e.tip.show(s.pageX+15,s.pageY-25)}},onCellLeave(){this.stopped=!0,e.tip.hide(500)},onTouchEnd(){this.stopped=!0,e.tip.hide(500)},onDocMove(i){if(!0===this.stopped)return;const a=this,s=a.widget;if("none"===s.el.css("display")||s.panel&&s.panel.el&&"none"===s.panel.el.css("display"))return a.stopped=!0,void e.tip.hide(500);const o=e.get(i.target);return"body"===o.prop("tagName").toLocaleLowerCase()?(a.stopped=!0,void e.tip.hide(500)):o.hasClass(t)||o.hasClass(n)||!1!==s.el.within(o)?void e.tip.show(i.pageX+15,i.pageY-25):(a.stopped=!0,void e.tip.hide(500))}})}(),function(){const e=Fancy,t=e.TOOLTIP_CLS,n=e.TOOLTIP_INNER_CLS;e.define("Fancy.ToolTip",{extend:e.Widget,constructor:function(){this.Super("const",arguments)},init(){this.initTpl(),this.render(),this.ons()},tpl:[`<div class="${n}">{text}</div>`],widgetCls:t,cls:"",extraCls:"",render(){const t=this,n=e.get(t.renderTo||document.body).dom,i=e.newEl("div");i.addCls(e.cls,t.widgetCls,t.cls,t.extraCls),i.update(t.tpl.getHTML({text:t.text})),t.el=e.get(n.appendChild(i.dom))},show(e,t){const n=this;clearInterval(n.timeout),delete n.timeout,"none"===n.css("display")&&n.css({display:"block"}),n.css({left:e,top:t})},hide(e){const t=this;clearInterval(t.timeout),e?t.timeout=setTimeout(()=>{t.el.hide(),delete t.timeout},e):t.el.hide()},destroy(){this.el.destroy()},update(e){this.el.select(`.${n}`).update(e)},ons(){this.el.on("mouseenter",this.onMouseEnter,this)},onMouseEnter(){this.hide(500)}}),e.tip={update(t){e.tip=new e.ToolTip({text:t})},show(t,n){e.tip=new e.ToolTip({text:" "}),e.tip.show(t,n)},hide(){e.tip=new e.ToolTip({text:" "})}}}(),Fancy.enableCompo=(()=>{var e,t=document,n=0,i={};function a(){if(0!==n)for(const n in i){var e,a,o=i[n],l=t.querySelectorAll(n),r=o.appPreSelector?o.appPreSelector+"-":"data-",d=o.preSelector?o.preSelector+"-":"fancy-",c=0,h=l.length;if(0===l.length)return;for(;c<h;c++){var u={},p=l[c],g=p.id||"rand-id-"+ +new Date,y=p.attributes;for(e=0,a=y.length;e<a;e++){var m=y[e],f=m.name,v=m.value;new RegExp(r).test(f)&&(v=s(v),u[f.replace(r,"")]=v)}!function(){var t=p.getElementsByTagName("*");for(e=0,a=t.length;e<a;e++){var n,i,o=t[e],l=o.tagName.toLowerCase();new RegExp(d).test(l)&&(n=l.replace(d,""),i=s(o.innerHTML),u[n.replace(r,"")]=i)}}(),p.outerHTML='<div id="'+g+'"></div>',o.init(t.getElementById(g),u)}}}function s(e){return/\[/.test(e)||/\{/.test(e)?(e=e.replace(/\n/g,""),e=new Function("return "+e+";")()):e=isNaN(Number(e))?e.replace(/\n/g,""):Number(e),e}Fancy.Component=function(e,t){n++,i[e]=t},Fancy.stopWatch=function(){clearInterval(e)},a(),t.addEventListener("DOMContentLoaded",function(){a()}),setTimeout(function(){a()},1),e=setInterval(function(){a()},250),Fancy.Component("fancy-grid",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyGrid(t)}}),Fancy.Component("fancy-form",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyForm(t)}}),Fancy.Component("fancy-tab",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyTab(t)}})}),Fancy});