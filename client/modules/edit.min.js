Fancy.define("Fancy.grid.plugin.Edit",{extend:Fancy.Plugin,ptype:"grid.edit",inWidgetName:"edit",clicksToEdit:2,tabColumnsSupport:{date:!0,combo:!0,image:!0,number:!0,string:!0,text:!0},constructor:function(a){this.Super("const",arguments)},init:function(){var a=this,b=a.widget,c=b.store;a.addEvents("tab"),a.Super("init",arguments),b.once("render",function(){a.ons(),c.on("beforeupdate",a.onStoreCRUDBeforeUpdate,a),c.on("update",a.onStoreCRUDUpdate,a),c.on("beforedestroy",a.onStoreCRUDBeforeDestroy,a),c.on("destroy",a.onStoreCRUDDestroy,a),c.on("create",a.onCreate,a)})},ons:function(){var a=this,b=a.widget,c=b.store,d="cell"+a.getClickEventName();b.on("cellclick",a.onClickCell,a),c.on("set",a.onStoreSet,a),a.on("tab",a.onTab,a),b.once("init",function(){"cell"!==d&&b.on(d,a.onClickCellToEdit,a)}),b.on("activate",a.onGridActivate,a),b.on("deactivate",a.onGridDeActivate,a)},onGridActivate:function(){Fancy.get(document).on("keydown",this.onKeyDown,this)},onGridDeActivate:function(){Fancy.get(document).un("keydown",this.onKeyDown,this)},onKeyDown:function(a){var b=a.keyCode,c=Fancy.key;switch(b){case c.TAB:this.fire("tab",a)}},onTab:function(a,b){var a=this,c=a.widget;if(a.activeCellEditParams){b.preventDefault();var d=a.getNextCellEditParam();c.celledit&&(c.celledit.hideEditor(),!1!==c.tabEdit&&setTimeout(function(){c.celledit.edit(d)},100))}},getNextCellEditParam:function(){for(var a,b,c,d,e=this,f=e.widget,g=f.store,h=e.activeCellEditParams,i=f.leftColumns,j=h.columnIndex,k=h.rowIndex,l=h.side,m=f.getColumns(l),n=m[j+1],o=0,p=20;o<p;o++){var q=e.getNextCellInfo({side:l,columnIndex:j,rowIndex:k});if(l=q.side,j=q.columnIndex,k=q.rowIndex,m=f.getColumns(l),n=m[q.columnIndex],e.tabColumnsSupport[n.type]&&!0===n.editable)break}return a=f.getBody(l),b=a.getCell(k,j).dom,b||(l="center",i.length&&(l="left"),k=0,j=0,a=f.getBody(l),b=a.getCell(k,j).dom),c=n.index,d=g.getId(k),{id:g.getId(k),side:l,column:n,cell:b,columnIndex:j,rowIndex:k,value:g.get(k,c),data:g.get(k),item:g.getById(d)}},getNextCellInfo:function(a){var b=this,c=b.widget,d=a.side,e=c.getColumns(d),f=a.columnIndex,g=a.rowIndex,h=e[f+1],i=c.rightColumns,j=c.leftColumns;if(h)f++;else switch(d){case"left":d="center",f=0;break;case"center":i.length?(d="right",f=0):j.length?(d="left",f=0,g++):(f=0,g++);break;case"right":j.length?(d="left",f=0,g++):(d="center",f=0,g++)}return{side:d,rowIndex:g,columnIndex:f}},getClickEventName:function(){switch(this.clicksToEdit){case 1:return"click";case 2:return"dblclick";case!1:return""}},stopEditor:function(){this.stopped=!0},onClickCell:function(a,b){var c=this.widget,d=b.column;d.editable&&("checkbox"===d.type||"switcher"===d.type)&&c.celledit&&c.celledit.onCheckBoxChange(b)},onClickCellToEdit:function(a,b){var c=this,d=c.widget,e=b.column;if(d.rowedit||d.celledit&&d.celledit.hideEditor(),c.fire("beforedit"),!0===c.stopped)return void(c.stopped=!1);d.rowedit?d.rowedit.edit(b):e.editable&&"checkbox"!==e.type&&"switcher"!==e.type&&d.celledit&&d.celledit.edit(b)},onStoreSet:function(a,b){this.widget.updater.updateRow(b.rowIndex)},onStoreCRUDBeforeUpdate:function(){var a=this,b=a.widget,c=a.activeCellEditParams;c&&b.updater.updateRow(c.rowIndex)},onStoreCRUDUpdate:function(a,b,c,d){delete a.changed[b],this.clearDirty()},onStoreCRUDBeforeDestroy:function(){},onStoreCRUDDestroy:function(){this.widget.store.loadData(),this.clearDirty()},clearDirty:function(){var a=this.widget;setTimeout(function(){a.leftBody.clearDirty(),a.body.clearDirty(),a.rightBody.clearDirty()},500)},onCreate:function(a,b){var c=this,d=c.widget;d.updater.update(),d.fire("insert",b),c.clearDirty()}}),function(){var a=Fancy,b=a.GRID_CELL_CLS;a.define("Fancy.grid.plugin.CellEdit",{extend:a.Plugin,ptype:"grid.celledit",inWidgetName:"celledit",editorsCls:"fancy-grid-editors",constructor:function(a){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var a=this,b=a.widget;b.once("render",function(){a.initEditorContainer(),a.checkAutoInitEditors(),b.on("scroll",a.onScroll,a),b.on("nativescroll",a.onNativeScroll,a),b.on("docclick",a.onDocClick,a),b.on("headercellmousedown",a.onHeaderCellMouseDown,a)})},onDocClick:function(c,d){var e=this,f=e.activeCellEditParams,g=e.activeEditor,h=!0,i=d.target,j=a.get(i);if(void 0!==g&&"date"!==f.column.type){if("combo"!==f.column.type){return void(j.closest("."+b).dom||g.el.within(i)||g.hide())}!1===g.el.within(i)&&!1===g.list.within(i)&&!0!==e.comboClick&&(h=!1),!1===h&&g.hide(),e.comboClick=!1}},initEditorContainer:function(){var a=this,b=a.widget;a.editorsContainer=b.el.select("."+a.editorsCls)},edit:function(a){var b=this,c=b.widget,d=a.column;"$selected"!==d.index&&(b.activeCellEditParams=a,c.edit.activeCellEditParams=a,d.editor=b.generateEditor(d),c.scroller.scrollToCell(a.cell),b.showEditor(a))},generateEditor:function(b){var c,d,e=this,f=e.widget,g={position:"absolute",left:"0px",top:"0px",display:"none",padding:"0px"},h=b.type,i=b.vtype,j=f.theme;if(b.editor)return b.editor;d=e.editorsContainer.dom;var k={renderTo:d,label:!1,style:g,checkValidOnTyping:!0};switch(h){case"combo":var l="text",m="text",n=b.data,o=[{change:e.onComboChange,scope:e}];if(b.editorEvents)for(var p=0,q=b.editorEvents.length;p<q;p++)o.push(b.editorEvents[p]);void 0!==b.displayKey&&(l=b.displayKey,m=l),"default"===j&&(j=void 0),b.minListWidth&&(k.minListWidth=b.minListWidth),b.subSearch&&(k.subSearch=b.subSearch),Fancy.apply(k,{theme:j,data:n,displayKey:l,valueKey:m,value:0,padding:!1,vtype:i,events:o}),b.emptyText&&(k.emptyText=b.emptyText),b.displayTpl&&(k.displayTpl=b.displayTpl),b.listItemTpl&&(k.listItemTpl=b.listItemTpl),b.leftTpl&&(k.leftTpl=b.leftTpl),b.leftWidth&&(k.leftWidth=b.leftWidth),c=new a.Combo(k);break;case"text":c=new a.TextArea({renderTo:d,label:!1,style:g,vtype:i,checkValidOnTyping:!0,events:[{enter:e.onEditorEnter,scope:e},{beforehide:e.onEditorBeforeHide,scope:e},{blur:e.onBlur,scope:e}]});break;case"image":case"string":case"tree":case"color":c=new a.StringField({renderTo:d,label:!1,style:g,vtype:i,format:b.format,checkValidOnTyping:!0,events:[{enter:e.onEditorEnter,scope:e},{beforehide:e.onEditorBeforeHide,scope:e},{blur:e.onBlur,scope:e}]});break;case"number":case"currency":a.apply(k,{vtype:i,format:b.format,events:[{enter:e.onEditorEnter,scope:e},{beforehide:e.onEditorBeforeHide,scope:e},{blur:e.onBlur,scope:e}]}),void 0!==b.spin&&(k.spin=b.spin),void 0!==b.step&&(k.step=b.step),void 0!==b.min&&(k.min=b.min),void 0!==b.max&&(k.max=b.max),c=new a.NumberField(k);break;case"date":c=new a.DateField({renderTo:d,label:!1,style:g,format:b.format,lang:f.lang,vtype:i,theme:j,checkValidOnTyping:!0,events:[{enter:e.onEditorEnter,scope:e},{beforehide:e.onEditorBeforeHide,scope:e},{blur:e.onBlur,scope:e}]});break;default:throw new Error("[FancyGrid error] - type "+h+" editor does not exit")}return c},showEditor:function(a){var b=this,c=b.widget,d=a.column,e=d.type,f=d.editor,g=a.cell,h=b.getCellPosition(g),i=b.getCellSize(g);"combo"===e&&(b.comboClick=!0),b.activeEditor=f,b.setEditorValue(a),0===a.rowIndex&&i.height++,d.minEditorWidth&&i.width<d.minEditorWidth&&(i.width=d.minEditorWidth),b.setEditorSize(i),f.show(),f.el.css(h),f.focus(),"combo"===e&&void 0!==a.value&&f.set(a.value,!1),c.fire("startedit",a)},setEditorSize:function(a){var b=this;"field.combo"===b.activeEditor.wtype?b.activeEditor.size(a):b.activeEditor.setInputSize({width:a.width,height:a.height})},hideEditor:function(){var a,b,c,d=this,e=d.widget,f=e.store,g=d.activeCellEditParams,h=d.activeEditor;h&&(c=g.column,b=h.get(),"server"===f.proxyType&&"combo"!==c.type&&(a=d.getActiveColumnKey(),b=d.prepareValue(b),f.set(g.rowIndex,a,b)),h.hide(),h.hideErrorTip()),delete d.activeEditor,e.el.dom.scrollTop&&(e.el.dom.scrollTop=0)},getCellPosition:function(b){var c=this,d=c.widget,e=d.gridBorders,f=a.get(b),g=f.offset(),h=d.el.offset();return{left:parseInt(g.left)-parseInt(h.left)-2+"px",top:parseInt(g.top)-parseInt(h.top)-(e[0]+e[2])+"px"}},getCellSize:function(b){var c=this,d=c.widget,e=a.get(b),f=e.width(),g=e.height(),h=2;return a.nojQuery&&2===d.panelBorderWidth&&(h=1),f+=parseInt(e.css("border-right-width"))*h,g+=parseInt(e.css("border-bottom-width"))*h,{width:f,height:g}},setEditorValue:function(b){var c=this,d=c.activeEditor;switch(b.column.type){case"combo":-1!==d.valueIndex&&d.set(d.getValueKey(b.value),!1);break;case"date":b.value||(b.value="");var e=b.column.format,f=a.Date.parse(b.value,e.read,e.mode);d.set(f);break;default:d.set(b.value)}},onEditorEnter:function(a,b){this.hideEditor()},onHeaderCellMouseDown:function(){this.hideEditor()},onKey:function(a,b){},setValue:function(a){var b,c=this,d=c.widget,e=d.store,f=c.activeCellEditParams,g=c.activeEditor;void 0!==g&&!1!==g.isValid()&&"server"!==e.proxyType&&(b=c.getActiveColumnKey(),a=c.prepareValue(a),"field.date"===g.type&&g.isEqual(e.get(f.rowIndex,b))||e.set(f.rowIndex,b,a))},onEditorBeforeHide:function(a){a.isValid()&&this.setValue(a.getValue())},onScroll:function(){this.hideEditor()},onNativeScroll:function(){this.hideEditor()},onBlur:function(a){var b=this;if(!b.activeEditor||a.id===b.activeEditor.id){if(!0===a.mouseDownSpinUp||a.mouseDownSpinDown)return;b.hideEditor()}},prepareValue:function(b){var c=this,d=c.getActiveColumnType(),e=c.activeCellEditParams,f=e.column,g=f.format;switch(d){case"number":case"currency":if(g&&g.inputFn){var h="",i=0,j=b.length;if(a.isNumber(b))return b;for(;i<j;i++)isNaN(Number(b[i]))||(h+=b[i]);b=h}else""!==b&&(b=Number(b));break;case"date":if(f.format&&f.format.read){var k=f.editor.getDate();b=a.Date.format(k,f.format.read,void 0,f.format.mode)}}return b},getActiveColumnType:function(){return this.activeCellEditParams.column.type},getActiveColumnKey:function(){return this.activeCellEditParams.column.index},onCheckBoxChange:function(a){var b=this,c=b.widget,d=a.column,e=d.index,f=c.store,g=b.checkBoxChangedValue;b.activeEditor&&b.hideEditor(),void 0!==b.checkBoxChangedValue&&(delete b.checkBoxChangedValue,b.activeCellEditParams=a,c.edit.activeCellEditParams=a,f.set(a.rowIndex,e,g))},onComboChange:function(a,b){var c=this,d=c.widget,e=d.store,f=c.activeCellEditParams,g=c.getActiveColumnKey(),h=a.getDisplayValue(b);e.set(f.rowIndex,g,h),c.hideEditor()},checkAutoInitEditors:function(){var b=this,c=b.widget;a.each(c.columns,function(a){a.editorAutoInit&&(a.editor=b.generateEditor(a))})}})}(),function(){var a=Fancy,b=a.each,c=a.GRID_CELL_CLS,d=a.FIELD_CLS,e=a.GRID_ROW_EDIT_CLS,f=a.GRID_ROW_EDIT_BUTTONS_CLS,g=a.GRID_ROW_EDIT_BUTTON_UPDATE_CLS,h=a.GRID_ROW_EDIT_BUTTON_CANCEL_CLS,i=a.ANIMATE_DURATION;a.define("Fancy.grid.plugin.RowEdit",{extend:a.Plugin,ptype:"grid.rowedit",inWidgetName:"rowedit",rendered:!1,constructor:function(a){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var a=this,b=a.widget;b.on("scroll",a.onScroll,a),b.on("columnresize",a.onColumnResize,a),b.on("lockcolumn",a.onLockColumn,a),b.on("rightlockcolumn",a.onRightLockColumn,a),b.on("unlockcolumn",a.onUnLockColumn,a),b.on("columndrag",a.onColumnDrag,a),b.grouping&&(b.on("collapse",a.onCollapse,a),b.on("expand",a.onExpand,a))},onCollapse:function(){this.hide()},onExpand:function(){this.hide()},edit:function(a){var b=this,c=b.widget,d=a.column;d&&"$selected"===d.index||(c.scroller.scrollToCell(a.cell),b.showEditor(a))},showEditor:function(b){var c=this;if(c.changed={},c.rendered){var d="none"===c.el.css("display");c.show(),c.changePosition(b.rowIndex,!d),d?c.setValues(b):setTimeout(function(){c.setValues(b)},a.ANIMATE_DURATION)}else c.render(),c.changePosition(b.rowIndex,!1),c.setValues(b);c.setSizes()},render:function(){var a=this,b=a.widget;b.leftColumns&&(a.leftEl=a.renderTo(b.leftBody.el,b.leftColumns)),b.columns&&(a.el=a.renderTo(b.body.el,b.columns)),b.rightColumns&&(a.rightEl=a.renderTo(b.rightBody.el,b.rightColumns)),a.renderButtons(),a.rendered=!0},renderTo:function(b,c,f,g,h){var i,j,k,l,m=this,n=m.widget,o=a.get(document.createElement("div")),p=0,q=c.length,r=n.theme,s={float:"left",margin:"0px",padding:"0px"};if(g){var t=b.select("."+d);switch(p=f,q=f+1,g){case"right":t.length&&(l=t.item(f));break;case"left":t.length&&(k=t.item(f));break;case"center":switch(h){case"left":l=t.item(0);break;case"right":k=t.item(t.length-1)}}}else o.addCls(e),i=a.get(b.dom.appendChild(o.dom));for(-1===p&&(p=0,q=1);p<q;p++){j=c[p];var u=j.width,v={index:j.index,label:!1,style:s,width:u,vtype:j.vtype,format:j.format,stopPropagation:!0,theme:r,checkValidOnTyping:!0,events:[{change:m.onFieldChange,delay:100,scope:m},{enter:m.onFieldEnter,scope:m}]};switch(g){case"left":k?v.renderAfter=k:v.renderTo=b.dom;break;case"right":l?v.renderBefore=l:v.renderTo=b.dom;break;case"center":switch(h){case"left":v.renderBefore=t.item(0);break;case"right":v.renderAfter=t.item(t.length-1)}break;default:v.renderTo=i.dom}var w;if(!1===j.editable)switch(j.type){case"string":case"number":w=new a.TextField(v);break;default:w=new a.EmptyField(v)}else switch(j.type){case"date":j.format&&(v.format=j.format),w=new a.DateField(v);break;case"image":case"string":case"color":w=new a.StringField(v);break;case"number":case"currency":j.spin&&(v.spin=j.spin),j.step&&(v.step=j.step),j.min&&(v.min=j.min),j.max&&(v.max=j.max),w=new a.NumberField(v);break;case"combo":a.apply(v,{data:j.data,value:-1,padding:!1}),j.displayKey?(v.displayKey=j.displayKey,v.valueKey=j.displayKey):(v.displayKey="text",v.valueKey="text"),j.minListWidth&&(v.minListWidth=j.minListWidth),j.subSearch&&(v.subSearch=j.subSearch),w=new a.Combo(v);break;case"checkbox":var x;switch(j.cellAlign){case"left":x=7;break;case"center":x=(j.width-20-2)/2;break;case"right":x=(j.width-20)/2+11}a.apply(v,{renderId:!0,value:!1,style:{padding:"0px",display:"inline-block","padding-left":x,float:"left",margin:"0px"}}),w=new a.CheckBox(v);break;case"switcher":var x;switch(j.cellAlign){case"left":case void 0:x=7;break;case"center":x=(j.width-20-2)/2;break;case"right":x=(j.width-20)/2+11}a.apply(v,{renderId:!0,value:!1,style:{padding:"0px",display:"inline-block","padding-left":x,float:"left",margin:"0px"}}),w=new a.Switcher(v);break;default:w=new a.EmptyField(v)}j.rowEditor=w}return i},renderButtons:function(){var b,c=this,d=c.widget,e=d.lang,i=a.get(document.createElement("div"));i.addCls(f),b=a.get(d.body.el.dom.appendChild(i.dom)),c.buttonsEl=b,c.buttonUpdate=new a.Button({cls:g,renderTo:b.dom,text:e.update,events:[{click:c.onClickUpdate,scope:c}]}),c.buttonCancel=new a.Button({cls:h,renderTo:b.dom,text:e.cancel,events:[{click:c.onClickCancel,scope:c}]})},setSizes:function(){var a=this,b=a.widget;b.leftColumns&&a._setSizes(b.leftBody.el.select("."+c+'[index="0"]'),b.leftColumns,"left"),b.columns&&a._setSizes(b.body.el.select("."+c+'[index="0"]'),b.columns),b.rightColumns&&a._setSizes(b.rightBody.el.select("."+c+'[index="0"]'),b.rightColumns,"right"),a.setElSize()},setElSize:function(){var a=this.widget,b=a.getCenterViewWidth(),c=a.getCenterFullWidth();b<c&&this.el.css("width",c)},_setSizes:function(b,c,d){for(var e,f,g,h,i=this,j=0,k=c.length,l=1,m=2;j<k;j++)e=c[j],g=b.item(j).dom,a.get(g),f=i.getCellSize(g),(h=e.rowEditor)&&("left"!==d&&"right"!==d||j!==k-1||f.width--,"left"===d&&"select"===e.type&&f.width--,f.height-=1,j===k-1?h.el.css("width",f.width-2):h.el.css("width",f.width-1),h.el.css("height",f.height),f.width-=2*l,f.width-=2*m,f.height-=2*m,i.setEditorSize(h,f))},getCellSize:function(b){var c=a.get(b),d=c.width(),e=c.height(),f=2;return a.nojQuery&&(f=1),d+=parseInt(c.css("border-right-width"))*f,e+=parseInt(c.css("border-bottom-width"))*f,{width:d,height:e}},setEditorSize:function(a,b){"field.combo"===a.wtype?(a.size(b),a.el.css("width",b.width+5)):a.setInputSize({width:b.width,height:b.height})},changePosition:function(a,b){var c=this,d=c.widget,e=d.scroller.getScroll(),f=d.scroller.getBottomScroll(),g=d.cellHeight*a-1-e,h=0;d.grouping&&(h+=d.grouping.getOffsetForRow(a),g+=h),c.leftEl&&(!1!==b?c.leftEl.animate({top:g},i):c.leftEl.css("top",g)),c.el&&(!1!==b?c.el.animate({top:g},i):c.el.css("top",g)),c.rightEl&&(!1!==b?c.rightEl.animate({top:g},i):c.rightEl.css("top",g));var j=d.getViewTotal()-3<a,k=g;a<3&&(j=!1),j?d.grouping?d.getViewTotal()-3<a-d.grouping.getSpecialRowsUnder(a)?k=g-parseInt(c.buttonsEl.css("height"))+1:(k=g+d.cellHeight,j=!1):k=g-parseInt(c.buttonsEl.css("height"))+1:k=g+d.cellHeight,!1!==b?c.buttonsEl.animate({top:k},i):c.buttonsEl.css("top",k),c.el.css("left",-f),c.changeButtonsLeftPos(),c.activeRowIndex=a},changeButtonsLeftPos:function(){var a=this,b=a.widget,c=b.getCenterViewWidth(),d=parseInt(a.buttonsEl.css("width"));a.buttonsEl.css("left",(c-d)/2)},setValues:function(a){var b=this,c=b.widget;c.leftColumns&&b._setValues(a.data,c.leftColumns),c.columns&&b._setValues(a.data,c.columns),c.rightColumns&&b._setValues(a.data,c.rightColumns),b.activeId=a.id,b.activeRowIndex=a.rowIndex},_setValues:function(a,c){b(c,function(b){var c=b.rowEditor;if(c)switch(b.type){case"action":case"button":case"order":case"select":case"expand":case"rowdrag":break;default:c.set(a[b.index],!1)}})},onScroll:function(){var a=this;!1!==a.rendered&&void 0!==a.activeRowIndex&&a.changePosition(a.activeRowIndex,!1)},onColumnResize:function(){var a=this;!1!==a.rendered&&setTimeout(function(){a.setSizes()},i)},onClickUpdate:function(){var a=this,b=a.widget,c=b.store,d=a.prepareChanged(),e=c.getRow(a.activeId);c.setItemData(e,d),b.update(),a.hide()},prepareChanged:function(){var b=this,c=b.widget,d=b.changed;for(var e in d){var f=c.getColumnByIndex(e);switch(f.type){case"date":var g=a.Date.parse(d[e],f.format.edit,f.format.mode),h=a.Date.format(g,f.format.read,f.format.mode);d[e]=h}}return d},onClickCancel:function(){this.hide()},hide:function(){var a=this;a.el&&(a.leftEl&&a.leftEl.hide(),a.el.hide(),a.rightEl&&a.rightEl.hide(),a.buttonsEl.hide())},show:function(){var a=this;a.leftEl&&("none"===a.leftEl.css("display")&&a.leftEl.css("opacity",0),a.leftEl.show(),a.leftEl.animate({opacity:1},i)),"none"===a.el.css("display")&&a.el.css("opacity",0),a.el.show(),a.el.animate({opacity:1},i),a.rightEl&&("none"===a.rightEl.css("display")&&a.rightEl.css("opacity",0),a.rightEl.show(),a.rightEl.animate({opacity:1},i)),"none"===a.buttonsEl.css("display")&&a.buttonsEl.css("opacity",0),a.buttonsEl.show(),a.buttonsEl.animate({opacity:1},i)},onFieldChange:function(a,b,c){var d=this;a.isValid()?d.changed[a.index]=b:delete d.changed[a.index]},onFieldEnter:function(){var a=this,b=a.widget,c=b.store,d=c.getRow(a.activeId);c.setItemData(d,a.changed),b.update(),a.hide()},hideField:function(a,b){var c=this.widget,d=c.getColumns(b),e=d[a];e.rowEditor&&e.rowEditor.hide()},showField:function(a,b){var c=this.widget,d=c.getColumns(b),e=d[a];e.rowEditor&&e.rowEditor.show()},moveEditor:function(a,b,c,d){var f,g=this,h=g.widget,i=h.store,j=h.getColumns(c),k=a.rowEditor,l=h.getBody(c),m=l.el.select("."+e),n=i.getById(g.activeId),o=n.get(a.index);m.dom&&(void 0===g.activeId&&(o=i.ge1t(g.activeRowIndex)[a.index]),k.destroy(),g.renderTo(m,j,b,c,d),f=g.getField(b,c),a.rowEditor=f,f.set(o),g.setSizes(),g.changeButtonsLeftPos(),g.reSetColumnsEditorsLinks())},getField:function(b,c){var f=this.widget,g=f.getBody(c);switch(c){case"left":b++}return a.getWidget(g.el.select("."+e+" ."+d).item(b).attr("id"))},reSetColumnsEditorsLinks:function(){var c=this,f=c.widget,g=f.body.el.select("."+e+" ."+d);b(f.columns,function(b,c){b.rowEditor=a.getWidget(g.item(c).attr("id"))}),g=f.leftBody.el.select("."+e+" ."+d),b(f.leftColumns,function(b,c){b.rowEditor=a.getWidget(g.item(c).attr("id"))}),g=f.rightBody.el.select("."+e+" ."+d),b(f.rightColumns,function(b,c){b.rowEditor=a.getWidget(g.item(c).attr("id"))})},onColumnDrag:function(){var a=this;a.destroyEls(),a.hide()},onLockColumn:function(){var a=this;a.destroyEls(),a.hide()},onRightLockColumn:function(){var a=this;a.destroyEls(),a.hide()},onUnLockColumn:function(){var a=this;a.destroyEls(),a.hide()},destroyEls:function(){var b=this,c=b.widget;b.rendered&&(b.rendered=!1,c.leftColumns&&(a.each(c.leftColumns,function(a){a.rowEditor.destroy()}),b.leftEl.destroy()),c.columns&&(a.each(c.columns,function(a){a.rowEditor.destroy()}),b.el.destroy()),c.rightColumns&&(a.each(c.rightColumns,function(a){a.rowEditor.destroy()}),b.rightEl.destroy()))}})}();