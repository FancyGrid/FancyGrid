Fancy.modules.form=!0,function(){const e=Fancy,t=e.MODAL_CLS,a=e.FIELD_NOT_VALID_CLS,s=e.FORM_CLS,i=e.FORM_BODY_CLS,n=e.PANEL_BODY_INNER_CLS,l=e.FORM_PANEL_CLS,r=e.PANEL_SHADOW_CLS,d=e.FIELD_BLANK_ERR_CLS,c=e.FIELD_TAB_CLS,o=e.FIELD_TAB_ACTIVE_CLS,h=e.TAB_TBAR_ACTIVE_CLS,p=e.PANEL_CLS,b=e.PANEL_TBAR_CLS,f=e.PANEL_BBAR_CLS,u=e.PANEL_SUB_TBAR_CLS,g=e.PANEL_BUTTONS_CLS,m=e.TAB_TBAR_CLS,y=e.FIELD_TEXT_CLS;e.Mixin("Fancy.form.mixin.Form",{tabScrollStep:80,init(){const t=this;t.calcFieldSize(),t.Super("init",arguments),t.addEvents("init","set","changetab"),!0===e.fullBuilt||!1===e.MODULELOAD||!1===e.MODULESLOAD||!0===t.fullBuilt||!0===t.neededModules?(t.fire("beforerender"),t.applyDefaults(),t.preRender(),t.render(),t.scrollable&&t.checkScroll(),t.ons(),t.fire("init")):t.loadModules()},cls:"",widgetCls:s,value:"",width:200,height:300,emptyText:"",tpl:['<div class="'+i+'"></div>'],preRender(){const e=this;e.initRenderTo(),(e.title||e.tbar||e.bbar||e.buttons)&&e.renderPanel()},renderPanel(){const t=this,a={renderTo:t.renderTo,renderOuter:t.renderOuter,title:t.title,subTitle:t.subTitle,subTitleHeight:t.subTitleHeight,width:t.width,height:t.height,titleHeight:t.titleHeight,barHeight:t.barHeight,subTBarHeight:t.subTBarHeight||t.barHeight,tbarHeight:t.tbarHeight||t.barHeight,bbarHeight:t.bbarHeight||t.barHeight,buttonsHeight:t.buttonsHeight||t.barHeight,theme:t.theme,shadow:t.shadow,style:t.style||{},window:t.window,modal:t.modal,frame:t.frame,items:[t],tabs:t.tabs,draggable:t.draggable,minWidth:t.minWidth,minHeight:t.minHeight,panelBodyBorders:t.panelBodyBorders,resizable:t.resizable,tabScrollStep:t.tabScrollStep};e.each(t.buttons,a=>{e.isObject(a)&&(a.scope=a.scope||t)}),e.each(t.bbar,a=>{e.isObject(a)&&(a.scope=a.scope||t)}),e.each(t.tbar,a=>{e.isObject(a)&&(a.scope=a.scope||t)}),e.each(t.subTBar,a=>{e.isObject(a)&&(a.scope=a.scope||t)}),t.cls&&(a.cls=t.cls,delete t.cls),t.tabs&&(a.tbar=t.generateTabs(),t.height-=t.barHeight),t.bbar&&(a.bbar=t.bbar,t.height-=t.bbarHeight||t.barHeight),t.tbar&&(a.tbar=t.tbar,t.height-=t.tbarHeight||t.barHeight),t.subTBar&&(a.subTBar=t.subTBar,t.height-=t.subTBarHeight||t.barHeight),t.buttons&&(a.buttons=t.buttons,t.height-=t.buttonsHeight||t.barHeight,a.buttons=t.buttons),t.footer&&(a.footer=t.footer,t.height-=t.barHeight),t.panel=new e.Panel(a),t.bbar=t.panel.bbar,t.tbar=t.panel.tbar,t.buttons=t.panel.buttons,t.extraCls&&t.panel&&t.panel.addCls(t.extraCls),t.panel&&t.panel.addCls(l),t.title&&(t.height-=t.titleHeight),t.subTitle&&(t.height-=t.subTitleHeight,t.height+=t.panelBodyBorders[2]),t.height-=t.panelBodyBorders[0],t.renderTo=t.panel.el.select("."+n).dom},initRenderTo(){let t=this.renderTo||document.body;e.isString(t)&&((t=document.getElementById(t))||(t=e.select(t).item(0))),this.renderTo=t},render(){let t=this,a=e.get(t.renderTo||document.body),s=e.get(document.createElement("div"));if(t.renderOuter&&!t.panel&&(s=a),!a.dom)throw new Error(`[FancyGrid Error 1] - Could not find renderTo element: ${t.renderTo}`);s.addCls(t.cls,e.cls,t.widgetCls),Fancy.loadingStyle&&(t.panel?(t.panel.el.css("opacity",0),t.intervalStyleLoad=setInterval(()=>{Fancy.loadingStyle||(clearInterval(t.intervalStyleLoad),t.panel.el.animate({opacity:1,force:!0}))},100)):(s.css("opacity",0),t.intervalStyleLoad=setInterval(()=>{Fancy.loadingStyle||(clearInterval(t.intervalStyleLoad),t.el.animate({opacity:1,force:!0}))},100))),s.attr("id")||s.attr("id",t.id),s.css({width:t.width+"px",height:t.height+"px"}),s.update(t.tpl.join(" ")),t.renderOuter&&!t.panel?(t.el=s,e.isObject(t.style)&&t.el.css(t.style)):t.el=e.get(a.dom.appendChild(s.dom)),void 0===t.panel&&(t.shadow&&s.addCls(r),"default"!==t.theme&&s.addCls(Fancy.getThemeCSSCls(t.theme))),t._items=[],t.renderItems(),t.items=t._items,delete t._items,(t.tabs||t.tabbed)&&t.setActiveTab(),t.$tabs&&t.$prepareTabs(),t.fire("afterrender"),t.fire("render"),t.rendered=!0},generateTabs(){const t=this,a=[];if(t.tabs){let s=0,i=t.tabs.length;for(;s<i;s++){let i={type:"tab"};e.isString(t.tabs[s])?i.text=t.tabs[s]:i=t.tabs[s],t.tabs[s]=i,void 0===t.tabs[s].handler&&(t.tabs[s].handler=function(e){return function(){t.setActiveTab(e)}}(s)),a.push(t.tabs[s])}}return a},setActiveTab(e){const t=this,a=t.el.select(`.${c}`),s=t.el.select(`.${o}`);if(void 0!==e&&(t.activeTab=e),void 0===t.activeTab&&(t.activeTab=0),s.removeCls(o),a.item(t.activeTab).addCls(o),t.tabs){const e=t.panel.el.select(`.${b} .${m}`);e.removeCls(h),e.item(t.activeTab).addCls(h)}t.fire("changetab",t.activeTab)},renderItems(t,a){let s,n=this,l=0;for(s=(a=a||n.items).length,t=t||n.el.getByClass(i);l<s;l++){let s,i=a[l];switch(i.theme=n.theme,i.i18n=n.i18n,i.type){case"pass":case"password":s=e.form.field.String,i.type="string",i.isPassword=!0;break;case"hidden":s=e.form.field.String,i.hidden=!0;break;case"line":case"row":s=e.form.field.Line,i=n.applyDefaults(i);break;case"set":case"fieldset":i.form=n,s=e.form.field.Set,i=n.applyDefaults(i);break;case"tab":s=e.form.field.Tab,i=n.applyDefaults(i),n.$tabs=n.$tabs||[],n.$tabs.push(i.items);break;case"string":case void 0:s=e.form.field.String;break;case"number":s=e.form.field.Number;break;case"textarea":s=e.form.field.TextArea;break;case"checkbox":s=e.form.field.CheckBox;break;case"switcher":s=e.form.field.Switcher;break;case"combo":s=e.form.field.Combo;break;case"html":s=e.form.field.HTML;break;case"radio":s=e.form.field.Radio;break;case"date":s=e.form.field.Date;break;case"recaptcha":s=e.form.field.ReCaptcha;break;case"button":s=e.form.field.Button;break;case"segbutton":s=e.form.field.SegButton;break;default:throw new Error(`type ${i.type} is not set`)}i.renderTo=i.renderTo||t;const r=new s(i);switch(i.type){case"line":case"row":case"set":case"fieldset":n.renderItems(r.el.select(`.${y}`).dom,r.items);break;case"tab":n.renderItems(r.el.select(".fancy-field-tab-items").dom,r.items);break;default:n._items.push(r)}}},applyDefaults(t){const a=this;if(void 0!==t){var s,i;if(t.defaults)for(s=0,i=t.items.length;s<i;s++)e.applyIf(t.items[s],t.defaults);return t}for(var n=a.items,l=0,r=n.length,d=a.defaults||{};l<r;l++)e.applyIf(n[l],d)},ons(){const t=this;e.each(t.items,e=>{switch(e.type){case"line":case"row":break;case"set":case"fieldset":break;case"tab":case"button":case"segbutton":break;default:e.on("change",t.onChange,t)}}),t.responsive&&e.$(window).bind("resize",function(){t.onWindowResize(),clearInterval(t.intWindowResize),t.intWindowResize=setTimeout(()=>{t.onWindowResize(),delete t.intWindowResize,setTimeout(()=>{t.onWindowResize()},300)},30)})},onChange(e,t,a){this.fire("set",{name:e.name,value:t,oldValue:a})},getValues(){return this.get()},get(t){const a=this;if(t){let s;return e.each(a.items,a=>{switch(a.type){case"html":case"button":return}if(a.name===t)return s=a.get(),"number"===a.type&&""!==s&&" "!==s&&e.isString(s)&&(s=Number(s)),!0}),s}{const t={};return e.each(a.items,e=>{switch(e.type){case"html":case"button":return}void 0!==e.name&&(t[e.name]=e.get())}),t}},set(t,a){const s=this;if(e.isObject(t))for(const e in t)s.set(e,t[e]);else if(t)return e.each(s.items,e=>{e.name===t&&e.set(a)}),a},clear(t){const s=this;e.each(s.items,e=>{switch(e.type){case"html":case"recaptcha":case"button":return}!1!==t&&e.clear(),delete e.acceptValue,s.hasCls(a)&&(s.removeCls(a),s.css("height",parseInt(s.css("height"))-6+"px")),s.hasCls(d)&&(s.removeCls(d),s.css("height",parseInt(s.css("height"))-6+"px")),e.name&&s.params&&s.params[e.name]&&delete s.params[e.name]})},submit(t={}){const a=this,s=t.params||{},i=a.get();t.method?a.method=t.method:a.method="GET",t.failure?a.failure=t.failure:delete a.failure,t.success?a.success=t.success:delete a.success,t.url&&(a.url=t.url),a.clear(!1),!1!==a.valid()&&(a.params&&"wait"===a.params.recaptcha?a.submit(t):a.params&&""===a.params.recaptcha||(e.applyIf(s,i),a.params=a.params||{},e.applyIf(s,i),e.applyIf(s,a.params),a.params=s,a.params["g-recaptcha-response"]=a.params.recaptcha,delete a.params.recaptcha,e.Ajax(a)))},valid(){let t=!0;return e.each(this.items,e=>{switch(e.type){case"field.string":case"string":case"number":case"field.number":case"textarea":case"field.textarea":break;default:return}!0===t?t=e.onBlur():e.onBlur()}),!!t},getItem(t,a){let s,i=!1;return e.each(this.items,(e,a)=>{if(e.name===t)return i=e,s=a,!0}),a?{item:i,order:s}:i},showAt(){const e=this.panel;e&&e.showAt.apply(e,arguments)},show(){const e=this,t=e.panel;setTimeout(()=>{t?t.show.apply(t,arguments):e.el.show()},30)},hide(){const a=this;a.panel?a.panel.css({display:"none"}):a.css({display:"none"});const s=e.select(`.${t}`);s.dom&&s.css("display","none");let i=0,n=a.items.length;for(;i<n;i++)"combo"===a.items[i].type&&a.items[i].hideList()},setHeight(e){const t=this;t.panel&&(t.panel.css("height",e),t.buttons&&(e-=t.buttonsHeight||t.barHeight),t.bbar&&(e-=t.bbarHeight||t.barHeight),(t.tbar||t.tabs)&&(e-=t.tbarHeight||t.barHeight),t.title&&(e-=t.titleHeight),e-=t.panelBodyBorders[0],e-=t.panelBodyBorders[2]),t.css("height",e)},setWidth(t){const a=this;a.panel&&(a.panel.css("width",t),t-=a.panelBodyBorders[1],t-=a.panelBodyBorders[3]),a.css("width",t);const s={};e.each(a.items,a=>{if(a.lineName)return s[a.lineName]=s[a.lineName]||[],void s[a.lineName].push(a);let i;switch(a.type){case"line":i=t;i-=parseInt(a.css("margin-left")),i-=parseInt(a.css("margin-right")),e.each(a.items,e=>{switch(e.type){case"button":i-=e.css("width"),i-=parseInt(e.css("margin-left")),i-=parseInt(e.css("margin-right"));break;default:0,e.css("width")}});break;default:i=t,i-=parseInt(a.css("margin-left")),i-=parseInt(a.css("margin-right")),a.setWidth(i)}}),e.each(s,a=>{var s=[],i=t,n=0;e.each(a,(e,t)=>{const l=parseInt(e.el.css("width"));switch(i-=parseInt(e.css("padding-left")),t===a.length-1&&(i-=parseInt(e.css("padding-right"))),e.type){case"button":return void(i-=l)}n+=l,s.push(l)});var l=[];e.each(a,e=>{switch(e.type){case"button":break;default:l.push(e)}});const r=n/100,d=i/100;e.each(s,(e,t)=>{const a=e/r*d;l[t].setWidth(a)})})},getHeight(){const e=this.panel;return e?e.getHeight():parseInt(this.css("height"))},getWidth(){let e,t=this;return e=t.panel?parseInt(t.panel.css("width")):parseInt(t.css("width"))},calcFieldSize(){var t,a=this,s=a.width,i=a.defaults||{},n=a.maxLabelNumber;i.width=s-2*a.panelBorderWidth,e.each(a.items,t=>{switch(t.type){case"set":case"tab":"tab"===t.type&&(a.tabbed=!0);var i="set"===t.type?62:20;e.each(t.items,e=>{void 0===e.width&&(e.width=s-i),e.label&&e.label.length>n&&(n=e.label.length)}),t.defaults=t.defaults||{},t.defaults.labelWidth=t.defaults.labelWidth||8*(n+1);break;case"line":var l,r=t.items.length,d=!1,c=s;e.each(t.items,e=>{void 0===e.label&&"top"!==e.labelAlign&&(e.label=!1),e.width&&(c-=e.width,r--)}),l=(c-8-8-8)/r,e.each(t.items,e=>{e.width||(e.width=l),(e.labelWidth||e.inputWidth)&&(d=!0)}),!1===d&&e.each(t.items,e=>{"top"===e.labelAlign?e.labelWidth=l:e.labelWidth=100}),t.defaults=t.defaults||{},void 0===t.defaults.labelWidth&&(t.defaults.labelWidth=a.labelWidth);break;default:t.label&&t.label.length>n&&(n=t.label.length)}}),(t=6*++n)<80&&(t=80),i.labelWidth=t,a.inputWidth&&(i.inputWidth=a.inputWidth),a.defaults=i},destroy(){const e=this;e.el.destroy(),e.panel&&e.panel.el.destroy()},each(e,t){let a=this.items,s=0,i=a.length;if(t)for(;s<i;s++)e.apply(this,[a[s]]);else for(;s<i;s++)e(a[s])},loadModules(){const t=this,a=e.modules||{},s={},i=t.items||[];e.modules=a,e.nojQuery&&(s.dom=!0),e.isTouch&&(s.touch=!0);let n=0,l=i.length;for(;n<l;n++){const e=i[n];if("date"===e.type&&(s.grid=!0,s.selection=!0,s.date=!0),e.items){let t=0,a=e.items.length;for(;t<a;t++){"date"===e.items[t].type&&(s.grid=!0,s.selection=!0,s.date=!0)}}}for(var r in t.neededModules={length:0},s)void 0===e.modules[r]&&(t.neededModules[r]=!0,t.neededModules.length++);if(0===t.neededModules.length)return t.neededModules=!0,void t.init();const d=function(e){delete t.neededModules[e],t.neededModules.length--,0===t.neededModules.length&&(t.neededModules=!0,t.init())};for(var r in t.neededModules)"length"!==r&&e.loadModule(r,d)},prevTab(){const e=this;e.activeTab--,e.activeTab<0&&(e.activeTab=0),e.setActiveTab()},nextTab(){const e=this,t=e.el.select(`.${c}`).length;e.activeTab++,e.activeTab>=t&&(e.activeTab=t-1),e.setActiveTab()},onWindowResize(){let t,a=this,i=a.renderTo;a.panel&&(i=a.panel.renderTo),((t=a.responsive?e.get(i):a.panel?a.panel.el:e.get(i)).hasClass(p)||t.hasClass(s))&&(t=t.parent());let n=t.width();void 0!==t.dom&&(0===n&&(n=t.parent().width()),a.responsive&&a.setWidth(n))},hideBar(e){let t,a,s=this;switch(e){case"tbar":t=b;break;case"subtbar":t=u;break;case"bbar":t=f;break;case"buttons":t=g;break;default:throw new Error("[FancyGrid Error]: bar does not exist")}if("none"!==(a=s.panel.el.select("."+t)).css("display")){a.hide();const e=parseInt(s.panel.el.css("height"));s.panel.el.css("height",e-s.barHeight)}},showBar(e){var t,a;switch(e){case"tbar":t=b;break;case"subtbar":t=u;break;case"bbar":t=f;break;case"buttons":t=g;break;default:throw new Error("[FancyGrid Error]: bar does not exist")}if("none"==(a=this.panel.el.select(`.${t}`)).css("display")){a.show();const e=parseInt(this.panel.el.css("height"));this.panel.el.css("height",e+this.barHeight)}},$prepareTabs(){let t=this,a=0,s=0;e.each(t.items,e=>{t.$tabs[s][a]=e,a++,t.$tabs[s][a]||(a=0,s++)})},remove(t){let a,s=this;(a=e.isString(t)?s.getItem(t,!0):{item:s.items[t],order:t}).item.destroy(),s.items.splice(a.order,1)},checkScroll(){let t=this.el.select(`.${i}`).item(0),a=parseInt(t.css("height")),s=0;e.each(this.items,function(e){s+=parseInt(e.css("height"))}),a<s&&t.css({"overflow-y":"scroll","overflow-x":"hidden"})}})}(),Fancy.Mixin("Fancy.form.mixin.PrepareConfig",{prepareConfig(e,t){const a=this;return e.renderOuter&&(e.renderTo=e.renderOuter),e=a.prepareConfigTheme(e,t),e=a.prepareConfigSize(e,t),e=a.prepareConfigLang(e,t),e=a.prepareConfigBars(e,t),e=a.prepareConfigDefaults(e),e=a.prepareConfigItems(e),e=a.prepareConfigFooter(e)},prepareConfigSize(e){let t,a=this,s=e.renderTo;return void 0===e.width&&s&&(e.responsive=!0,t=Fancy.get(s),e.width=parseInt(t.width())),void 0===e.height||"fit"===e.height&&setTimeout(()=>{a.setHeightFit(),a.on("changetab",a.onChangeTab,a)}),e},prepareConfigDefaults(e){if(e.defaults)for(const t in e.defaults)Fancy.each(e.items,a=>{void 0===a[t]&&(a[t]=e.defaults[t])});return e},prepareConfigBars(e){const t=function(t){for(var a=0,s=t.length;a<s;a++)switch(t[a].type){case"date":if(!t[a].format){var i=e.lang.date;t[a].format={read:i.read,write:i.write,edit:i.edit}}e.i18n&&(t[a].i18n=e.i18n)}};return t(e.tbar||[]),t(e.subTBar||[]),t(e.bbar||[]),t(e.buttons||[]),e},prepareConfigItems(e){const t=this,a=function(e){e.theme=t.theme||"",void 0===e.labelWidth&&(e.labelWidth=t.labelWidth),void 0===e.inputWidth&&(e.inputWidth=t.inputWidth),"pass"!==e.type&&"password"!==e.type||(e.type="string",e.isPassword=!0),e.items&&Fancy.each(e.items,a)};return Fancy.each(e.items,a),e},setHeightFit(){const e=this,t=!!(e.title||e.subTitle||e.tbar||e.bbar||e.buttons||e.panel),a=e.panelBodyBorders,s=e.gridWithoutPanelBorders,i=e.gridBorders;e.heightFit=!0;let n=e.fieldHeight,l=e.items;if(e.$tabs){var r=e.activeTab||0;l=e.$tabs[r]}Fancy.each(l,e=>{e.hidden||(n+=parseInt(e.css("height")))}),e.title&&(n+=e.titleHeight),(e.tbar||e.tabs)&&(n+=e.tbarHeight||e.barHeight),e.bbar&&(n+=e.bbarHeight||e.barHeight),e.buttons&&(n+=e.buttonsHeight||e.barHeight),e.subTBar&&(n+=e.subTBarHeight||e.barHeight),e.footer&&(n+=e.barHeight),n+=t?a[0]+a[2]+i[0]+i[2]:s[0]+s[2]+i[0]+i[2],e.minHeight&&n<e.minHeight&&(n=e.minHeight),e.setHeight(n)},onChangeTab(){this.setHeightFit()}}),Fancy.define(["Fancy.form.field.Line","Fancy.FieldLine"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.line",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.Super("init",arguments);var t,a=0,s=e.items.length,i=Fancy.id(null,"fancy-line-");if(e.parentSet)var n=e.width/e.items.length;for(;a<s;a++){var l=e.items[a];void 0===l.width&&(l.width=n),l.style=l.style||{},l.lineName=i,"top"===l.labelAlign?(t=!0,e.parentSet&&(l.style.padding="0px"),l.label&&(l.labelWidth=l.width-16,100===l.labelWidth&&(l.labelWidth=7*(l.label.length+1+1)),l.width<l.labelWidth&&(l.labelWidth=7*(l.label.length+1+1)))):(l.style["padding-top"]="0px",!l.labelWidth&&l.label&&(l.labelWidth=7*(l.label.length+1+1))),0===a&&(l.style["padding-left"]="0px")}e.preRender(),e.render(),t&&e.css("height","48px")},fieldCls:"fancy fancy-field fancy-field-line",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-text fancy-field-line-items">',"</div>"]}),Fancy.define(["Fancy.form.field.Set","Fancy.SetField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.set",padding:"8px 11px 0px 8px",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("beforecollapse","collapse","expanded","expand","beforeexpand","beforeexpanded"),e.Super("init",arguments),Fancy.each(e.items,(e,t)=>{"top"===e.labelAlign&&0===t&&(e.style={"padding-left":"0px"}),"line"===e.type&&(e.padding=!1,e.parentSet=!0)}),e.preRender(),e.render(),void 0!==e.checkbox&&e.initCheckBox(),e.on("beforecollapse",e.onBeforeCollapsed,e),e.on("expanded",e.onExpanded,e)},fieldCls:"fancy-field-set",value:"",width:100,emptyText:"",tpl:["<fieldset>","<legend>",'<div class="fancy-field-checkbox-input" style="float:left;margin-top: 4px;display: none;"></div>','<div class="fancy-field-set-label" style="float:left;">{label}</div>','<div class="fancy-clearfix"></div>',"</legend>",'<div class="fancy-field-text fancy-field-set-items">',"</div>","</fieldset>"],initCheckBox(){const e=this,t=e.el.select(".fancy-field-checkbox-input");t.css("display",""),!0===e.checkbox&&e.addCls("fancy-checkbox-on");const a=e.el.select(".fancy-field-set-items");setTimeout(()=>{!0===e.checkbox||e.fire("collapse")},1),!0===e.checkbox?(a.css("display",""),e.removeCls("fancy-set-collapsed")):(a.css("display","none"),e.addCls("fancy-set-collapsed")),t.on("click",function(){e.toggleCls("fancy-checkbox-on");const t=e.el.hasCls("fancy-checkbox-on"),a=e.el.select(".fancy-field-set-items");t?(e.fire("beforeexpanded"),e.fire("beforeexpand"),a.css("display",""),e.removeCls("fancy-set-collapsed"),e.fire("expanded"),e.fire("expand")):(e.fire("beforecollapse"),a.css("display","none"),e.addCls("fancy-set-collapsed"),e.fire("collapse"))})},onBeforeCollapsed(){const e=this.form,t=this.el.select(".fancy-field-set-items"),a=parseInt(t.css("height"));e.setHeight(e.getHeight()-a)},onExpanded(){const e=this.form,t=this.el.select(".fancy-field-set-items"),a=parseInt(t.css("height"));e.setHeight(e.getHeight()+a)}}),Fancy.define(["Fancy.form.field.HTML","Fancy.HTMLField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.html",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("focus","blur","input","enter","up","down","esc","change","key"),e.Super("init",arguments),e.preRender(),e.render(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:"fancy-field-html",value:"",width:100,emptyText:"",tpl:['<div class="" style="">',"{value}","</div>"],render(){const e=this,t=e.renderTo||document.body,a=document.createElement("div");e.fire("beforerender"),a.innerHTML=e.tpl.getHTML({value:e.value,height:e.height}),e.el=t.appendChild(a),e.el=Fancy.get(e.el),e.el.addCls(e.cls,Fancy.cls,e.fieldCls),e.acceptedValue=e.value,e.fire("afterrender"),e.fire("render")},set(e,t){const a=this;a.el.firstChild().update(e),!1!==t&&a.onInput()},get(){return this.el.firstChild().dom.innerHTML}}),Fancy.define(["Fancy.form.field.ReCaptcha","Fancy.ReCaptcha"],{type:"field.recaptcha",mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init(){const e=this;e.addEvents("focus","blur","input","enter","up","down","esc","change","key"),e.Super("init",arguments),e.tpl=new Fancy.Template(e.tpl),e.render(),e.name="recaptcha",e.hidden&&e.css("display","none"),e.style&&e.css(e.style);const t=document.createElement("script");t.type="text/javascript",t.src="https://www.google.com/recaptcha/api.js",Fancy.get(document.head).append(t)},get(){const e=this,t=e.el.select("form");return e.value?e.value:(e.value="wait",t.one("submit",function(t){t.preventDefault(),e.value=Fancy.$(this).serialize().replace("g-recaptcha-response=","")}),t.submit(),e.value)},fieldCls:Fancy.FIELD_CLS,value:"",width:100,tpl:['<form method="POST">','<div class="g-recaptcha" data-sitekey="{key}"></div>',"</form>"]});